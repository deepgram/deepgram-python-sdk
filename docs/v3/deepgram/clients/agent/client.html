<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>deepgram.clients.agent.client API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../agent.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;deepgram.clients.agent</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#AgentWebSocketClient">AgentWebSocketClient</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AgentWebSocketClient.__init__">AgentWebSocketClient</a>
                        </li>
                        <li>
                                <a class="function" href="#AgentWebSocketClient.start">start</a>
                        </li>
                        <li>
                                <a class="function" href="#AgentWebSocketClient.on">on</a>
                        </li>
                        <li>
                                <a class="function" href="#AgentWebSocketClient.keep_alive">keep_alive</a>
                        </li>
                        <li>
                                <a class="function" href="#AgentWebSocketClient.finish">finish</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AsyncAgentWebSocketClient">AsyncAgentWebSocketClient</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AsyncAgentWebSocketClient.__init__">AsyncAgentWebSocketClient</a>
                        </li>
                        <li>
                                <a class="function" href="#AsyncAgentWebSocketClient.start">start</a>
                        </li>
                        <li>
                                <a class="function" href="#AsyncAgentWebSocketClient.on">on</a>
                        </li>
                        <li>
                                <a class="function" href="#AsyncAgentWebSocketClient.keep_alive">keep_alive</a>
                        </li>
                        <li>
                                <a class="function" href="#AsyncAgentWebSocketClient.finish">finish</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#OpenResponse">OpenResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#OpenResponse.__init__">OpenResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#OpenResponse.type">type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CloseResponse">CloseResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CloseResponse.__init__">CloseResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#CloseResponse.type">type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ErrorResponse">ErrorResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ErrorResponse.__init__">ErrorResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#ErrorResponse.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#ErrorResponse.message">message</a>
                        </li>
                        <li>
                                <a class="variable" href="#ErrorResponse.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#ErrorResponse.variant">variant</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UnhandledResponse">UnhandledResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#UnhandledResponse.__init__">UnhandledResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#UnhandledResponse.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#UnhandledResponse.raw">raw</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#WelcomeResponse">WelcomeResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#WelcomeResponse.__init__">WelcomeResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#WelcomeResponse.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#WelcomeResponse.session_id">session_id</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SettingsAppliedResponse">SettingsAppliedResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SettingsAppliedResponse.__init__">SettingsAppliedResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#SettingsAppliedResponse.type">type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ConversationTextResponse">ConversationTextResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ConversationTextResponse.__init__">ConversationTextResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConversationTextResponse.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConversationTextResponse.role">role</a>
                        </li>
                        <li>
                                <a class="variable" href="#ConversationTextResponse.content">content</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UserStartedSpeakingResponse">UserStartedSpeakingResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#UserStartedSpeakingResponse.__init__">UserStartedSpeakingResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#UserStartedSpeakingResponse.type">type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AgentThinkingResponse">AgentThinkingResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AgentThinkingResponse.__init__">AgentThinkingResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#AgentThinkingResponse.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#AgentThinkingResponse.content">content</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#FunctionCalling">FunctionCalling</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FunctionCalling.__init__">FunctionCalling</a>
                        </li>
                        <li>
                                <a class="variable" href="#FunctionCalling.type">type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#FunctionCallRequest">FunctionCallRequest</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FunctionCallRequest.__init__">FunctionCallRequest</a>
                        </li>
                        <li>
                                <a class="variable" href="#FunctionCallRequest.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#FunctionCallRequest.function_name">function_name</a>
                        </li>
                        <li>
                                <a class="variable" href="#FunctionCallRequest.function_call_id">function_call_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#FunctionCallRequest.input">input</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AgentStartedSpeakingResponse">AgentStartedSpeakingResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AgentStartedSpeakingResponse.__init__">AgentStartedSpeakingResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#AgentStartedSpeakingResponse.total_latency">total_latency</a>
                        </li>
                        <li>
                                <a class="variable" href="#AgentStartedSpeakingResponse.tts_latency">tts_latency</a>
                        </li>
                        <li>
                                <a class="variable" href="#AgentStartedSpeakingResponse.ttt_latency">ttt_latency</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AgentAudioDoneResponse">AgentAudioDoneResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AgentAudioDoneResponse.__init__">AgentAudioDoneResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#AgentAudioDoneResponse.type">type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#InjectionRefusedResponse">InjectionRefusedResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#InjectionRefusedResponse.__init__">InjectionRefusedResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#InjectionRefusedResponse.type">type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SettingsConfigurationOptions">SettingsConfigurationOptions</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SettingsConfigurationOptions.__init__">SettingsConfigurationOptions</a>
                        </li>
                        <li>
                                <a class="variable" href="#SettingsConfigurationOptions.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#SettingsConfigurationOptions.audio">audio</a>
                        </li>
                        <li>
                                <a class="variable" href="#SettingsConfigurationOptions.agent">agent</a>
                        </li>
                        <li>
                                <a class="variable" href="#SettingsConfigurationOptions.context">context</a>
                        </li>
                        <li>
                                <a class="function" href="#SettingsConfigurationOptions.check">check</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UpdateInstructionsOptions">UpdateInstructionsOptions</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#UpdateInstructionsOptions.__init__">UpdateInstructionsOptions</a>
                        </li>
                        <li>
                                <a class="variable" href="#UpdateInstructionsOptions.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#UpdateInstructionsOptions.instructions">instructions</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UpdateSpeakOptions">UpdateSpeakOptions</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#UpdateSpeakOptions.__init__">UpdateSpeakOptions</a>
                        </li>
                        <li>
                                <a class="variable" href="#UpdateSpeakOptions.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#UpdateSpeakOptions.model">model</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#InjectAgentMessageOptions">InjectAgentMessageOptions</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#InjectAgentMessageOptions.__init__">InjectAgentMessageOptions</a>
                        </li>
                        <li>
                                <a class="variable" href="#InjectAgentMessageOptions.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#InjectAgentMessageOptions.message">message</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#FunctionCallResponse">FunctionCallResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FunctionCallResponse.__init__">FunctionCallResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#FunctionCallResponse.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#FunctionCallResponse.function_call_id">function_call_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#FunctionCallResponse.output">output</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AgentKeepAlive">AgentKeepAlive</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AgentKeepAlive.__init__">AgentKeepAlive</a>
                        </li>
                        <li>
                                <a class="variable" href="#AgentKeepAlive.type">type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Listen">Listen</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Listen.__init__">Listen</a>
                        </li>
                        <li>
                                <a class="variable" href="#Listen.model">model</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Speak">Speak</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Speak.__init__">Speak</a>
                        </li>
                        <li>
                                <a class="variable" href="#Speak.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#Speak.provider">provider</a>
                        </li>
                        <li>
                                <a class="variable" href="#Speak.voice_id">voice_id</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Header">Header</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Header.__init__">Header</a>
                        </li>
                        <li>
                                <a class="variable" href="#Header.key">key</a>
                        </li>
                        <li>
                                <a class="variable" href="#Header.value">value</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Item">Item</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Item.__init__">Item</a>
                        </li>
                        <li>
                                <a class="variable" href="#Item.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#Item.description">description</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Properties">Properties</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Properties.__init__">Properties</a>
                        </li>
                        <li>
                                <a class="variable" href="#Properties.item">item</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Parameters">Parameters</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Parameters.__init__">Parameters</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameters.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameters.properties">properties</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameters.required">required</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Function">Function</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Function.__init__">Function</a>
                        </li>
                        <li>
                                <a class="variable" href="#Function.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Function.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#Function.url">url</a>
                        </li>
                        <li>
                                <a class="variable" href="#Function.method">method</a>
                        </li>
                        <li>
                                <a class="variable" href="#Function.headers">headers</a>
                        </li>
                        <li>
                                <a class="variable" href="#Function.parameters">parameters</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Provider">Provider</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Provider.__init__">Provider</a>
                        </li>
                        <li>
                                <a class="variable" href="#Provider.type">type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Think">Think</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Think.__init__">Think</a>
                        </li>
                        <li>
                                <a class="variable" href="#Think.provider">provider</a>
                        </li>
                        <li>
                                <a class="variable" href="#Think.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#Think.instructions">instructions</a>
                        </li>
                        <li>
                                <a class="variable" href="#Think.functions">functions</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Agent">Agent</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Agent.__init__">Agent</a>
                        </li>
                        <li>
                                <a class="variable" href="#Agent.listen">listen</a>
                        </li>
                        <li>
                                <a class="variable" href="#Agent.think">think</a>
                        </li>
                        <li>
                                <a class="variable" href="#Agent.speak">speak</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Input">Input</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Input.__init__">Input</a>
                        </li>
                        <li>
                                <a class="variable" href="#Input.encoding">encoding</a>
                        </li>
                        <li>
                                <a class="variable" href="#Input.sample_rate">sample_rate</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Output">Output</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Output.__init__">Output</a>
                        </li>
                        <li>
                                <a class="variable" href="#Output.encoding">encoding</a>
                        </li>
                        <li>
                                <a class="variable" href="#Output.sample_rate">sample_rate</a>
                        </li>
                        <li>
                                <a class="variable" href="#Output.bitrate">bitrate</a>
                        </li>
                        <li>
                                <a class="variable" href="#Output.container">container</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Audio">Audio</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Audio.__init__">Audio</a>
                        </li>
                        <li>
                                <a class="variable" href="#Audio.input">input</a>
                        </li>
                        <li>
                                <a class="variable" href="#Audio.output">output</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Context">Context</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Context.__init__">Context</a>
                        </li>
                        <li>
                                <a class="variable" href="#Context.messages">messages</a>
                        </li>
                        <li>
                                <a class="variable" href="#Context.replay">replay</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../../deepgram.html">deepgram</a><wbr>.<a href="./../../clients.html">clients</a><wbr>.<a href="./../agent.html">agent</a><wbr>.client    </h1>

                
                        <input id="mod-client-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-client-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="c1"># Copyright 2024 Deepgram SDK contributors. All Rights Reserved.</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="c1"># Use of this source code is governed by a MIT license that can be found in the LICENSE file.</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="c1"># SPDX-License-Identifier: MIT</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="c1"># websocket</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.v1</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a>    <span class="n">AgentWebSocketClient</span> <span class="k">as</span> <span class="n">LatestAgentWebSocketClient</span><span class="p">,</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>    <span class="n">AsyncAgentWebSocketClient</span> <span class="k">as</span> <span class="n">LatestAsyncAgentWebSocketClient</span><span class="p">,</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="p">)</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.v1</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a>    <span class="c1">#### common websocket response</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a>    <span class="n">BaseResponse</span> <span class="k">as</span> <span class="n">LatestBaseResponse</span><span class="p">,</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a>    <span class="n">OpenResponse</span> <span class="k">as</span> <span class="n">LatestOpenResponse</span><span class="p">,</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a>    <span class="n">CloseResponse</span> <span class="k">as</span> <span class="n">LatestCloseResponse</span><span class="p">,</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a>    <span class="n">ErrorResponse</span> <span class="k">as</span> <span class="n">LatestErrorResponse</span><span class="p">,</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a>    <span class="n">UnhandledResponse</span> <span class="k">as</span> <span class="n">LatestUnhandledResponse</span><span class="p">,</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a>    <span class="c1">#### unique</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a>    <span class="n">WelcomeResponse</span> <span class="k">as</span> <span class="n">LatestWelcomeResponse</span><span class="p">,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a>    <span class="n">SettingsAppliedResponse</span> <span class="k">as</span> <span class="n">LatestSettingsAppliedResponse</span><span class="p">,</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a>    <span class="n">ConversationTextResponse</span> <span class="k">as</span> <span class="n">LatestConversationTextResponse</span><span class="p">,</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>    <span class="n">UserStartedSpeakingResponse</span> <span class="k">as</span> <span class="n">LatestUserStartedSpeakingResponse</span><span class="p">,</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a>    <span class="n">AgentThinkingResponse</span> <span class="k">as</span> <span class="n">LatestAgentThinkingResponse</span><span class="p">,</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>    <span class="n">FunctionCalling</span> <span class="k">as</span> <span class="n">LatestFunctionCalling</span><span class="p">,</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a>    <span class="n">FunctionCallRequest</span> <span class="k">as</span> <span class="n">LatestFunctionCallRequest</span><span class="p">,</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>    <span class="n">AgentStartedSpeakingResponse</span> <span class="k">as</span> <span class="n">LatestAgentStartedSpeakingResponse</span><span class="p">,</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a>    <span class="n">AgentAudioDoneResponse</span> <span class="k">as</span> <span class="n">LatestAgentAudioDoneResponse</span><span class="p">,</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>    <span class="n">InjectionRefusedResponse</span> <span class="k">as</span> <span class="n">LatestInjectionRefusedResponse</span><span class="p">,</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="p">)</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.v1</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>    <span class="c1"># top level</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>    <span class="n">SettingsConfigurationOptions</span> <span class="k">as</span> <span class="n">LatestSettingsConfigurationOptions</span><span class="p">,</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>    <span class="n">UpdateInstructionsOptions</span> <span class="k">as</span> <span class="n">LatestUpdateInstructionsOptions</span><span class="p">,</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a>    <span class="n">UpdateSpeakOptions</span> <span class="k">as</span> <span class="n">LatestUpdateSpeakOptions</span><span class="p">,</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>    <span class="n">InjectAgentMessageOptions</span> <span class="k">as</span> <span class="n">LatestInjectAgentMessageOptions</span><span class="p">,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>    <span class="n">FunctionCallResponse</span> <span class="k">as</span> <span class="n">LatestFunctionCallResponse</span><span class="p">,</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>    <span class="n">AgentKeepAlive</span> <span class="k">as</span> <span class="n">LatestAgentKeepAlive</span><span class="p">,</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>    <span class="c1"># sub level</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>    <span class="n">Listen</span> <span class="k">as</span> <span class="n">LatestListen</span><span class="p">,</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a>    <span class="n">Speak</span> <span class="k">as</span> <span class="n">LatestSpeak</span><span class="p">,</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>    <span class="n">Header</span> <span class="k">as</span> <span class="n">LatestHeader</span><span class="p">,</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>    <span class="n">Item</span> <span class="k">as</span> <span class="n">LatestItem</span><span class="p">,</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a>    <span class="n">Properties</span> <span class="k">as</span> <span class="n">LatestProperties</span><span class="p">,</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a>    <span class="n">Parameters</span> <span class="k">as</span> <span class="n">LatestParameters</span><span class="p">,</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>    <span class="n">Function</span> <span class="k">as</span> <span class="n">LatestFunction</span><span class="p">,</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>    <span class="n">Provider</span> <span class="k">as</span> <span class="n">LatestProvider</span><span class="p">,</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>    <span class="n">Think</span> <span class="k">as</span> <span class="n">LatestThink</span><span class="p">,</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>    <span class="n">Agent</span> <span class="k">as</span> <span class="n">LatestAgent</span><span class="p">,</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>    <span class="n">Input</span> <span class="k">as</span> <span class="n">LatestInput</span><span class="p">,</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>    <span class="n">Output</span> <span class="k">as</span> <span class="n">LatestOutput</span><span class="p">,</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>    <span class="n">Audio</span> <span class="k">as</span> <span class="n">LatestAudio</span><span class="p">,</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>    <span class="n">Context</span> <span class="k">as</span> <span class="n">LatestContext</span><span class="p">,</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="p">)</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="c1"># The vX/client.py points to the current supported version in the SDK.</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="c1"># Older versions are supported in the SDK for backwards compatibility.</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="n">AgentWebSocketClient</span> <span class="o">=</span> <span class="n">LatestAgentWebSocketClient</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="n">AsyncAgentWebSocketClient</span> <span class="o">=</span> <span class="n">LatestAsyncAgentWebSocketClient</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="n">OpenResponse</span> <span class="o">=</span> <span class="n">LatestOpenResponse</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="n">CloseResponse</span> <span class="o">=</span> <span class="n">LatestCloseResponse</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">LatestErrorResponse</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="n">UnhandledResponse</span> <span class="o">=</span> <span class="n">LatestUnhandledResponse</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="n">WelcomeResponse</span> <span class="o">=</span> <span class="n">LatestWelcomeResponse</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="n">SettingsAppliedResponse</span> <span class="o">=</span> <span class="n">LatestSettingsAppliedResponse</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="n">ConversationTextResponse</span> <span class="o">=</span> <span class="n">LatestConversationTextResponse</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="n">UserStartedSpeakingResponse</span> <span class="o">=</span> <span class="n">LatestUserStartedSpeakingResponse</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="n">AgentThinkingResponse</span> <span class="o">=</span> <span class="n">LatestAgentThinkingResponse</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="n">FunctionCalling</span> <span class="o">=</span> <span class="n">LatestFunctionCalling</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="n">FunctionCallRequest</span> <span class="o">=</span> <span class="n">LatestFunctionCallRequest</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="n">AgentStartedSpeakingResponse</span> <span class="o">=</span> <span class="n">LatestAgentStartedSpeakingResponse</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="n">AgentAudioDoneResponse</span> <span class="o">=</span> <span class="n">LatestAgentAudioDoneResponse</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="n">InjectionRefusedResponse</span> <span class="o">=</span> <span class="n">LatestInjectionRefusedResponse</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="n">SettingsConfigurationOptions</span> <span class="o">=</span> <span class="n">LatestSettingsConfigurationOptions</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="n">UpdateInstructionsOptions</span> <span class="o">=</span> <span class="n">LatestUpdateInstructionsOptions</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="n">UpdateSpeakOptions</span> <span class="o">=</span> <span class="n">LatestUpdateSpeakOptions</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="n">InjectAgentMessageOptions</span> <span class="o">=</span> <span class="n">LatestInjectAgentMessageOptions</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="n">FunctionCallResponse</span> <span class="o">=</span> <span class="n">LatestFunctionCallResponse</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="n">AgentKeepAlive</span> <span class="o">=</span> <span class="n">LatestAgentKeepAlive</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="n">Listen</span> <span class="o">=</span> <span class="n">LatestListen</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="n">Speak</span> <span class="o">=</span> <span class="n">LatestSpeak</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="n">Header</span> <span class="o">=</span> <span class="n">LatestHeader</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="n">Item</span> <span class="o">=</span> <span class="n">LatestItem</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="n">Properties</span> <span class="o">=</span> <span class="n">LatestProperties</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="n">Parameters</span> <span class="o">=</span> <span class="n">LatestParameters</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="n">Function</span> <span class="o">=</span> <span class="n">LatestFunction</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="n">Provider</span> <span class="o">=</span> <span class="n">LatestProvider</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="n">Think</span> <span class="o">=</span> <span class="n">LatestThink</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="n">Agent</span> <span class="o">=</span> <span class="n">LatestAgent</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="n">Input</span> <span class="o">=</span> <span class="n">LatestInput</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="n">Output</span> <span class="o">=</span> <span class="n">LatestOutput</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="n">Audio</span> <span class="o">=</span> <span class="n">LatestAudio</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="n">Context</span> <span class="o">=</span> <span class="n">LatestContext</span>
</span></pre></div>


            </section>
                <section id="AgentWebSocketClient">
                            <input id="AgentWebSocketClient-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AgentWebSocketClient</span><wbr>(<span class="base"><a href="../common/v1/abstract_sync_websocket.html#AbstractSyncWebSocketClient">deepgram.clients.common.v1.abstract_sync_websocket.AbstractSyncWebSocketClient</a></span>):

                <label class="view-source-button" for="AgentWebSocketClient-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AgentWebSocketClient"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AgentWebSocketClient-60"><a href="#AgentWebSocketClient-60"><span class="linenos"> 60</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AgentWebSocketClient</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-61"><a href="#AgentWebSocketClient-61"><span class="linenos"> 61</span></a>    <span class="n">AbstractSyncWebSocketClient</span>
</span><span id="AgentWebSocketClient-62"><a href="#AgentWebSocketClient-62"><span class="linenos"> 62</span></a><span class="p">):</span>  <span class="c1"># pylint: disable=too-many-instance-attributes</span>
</span><span id="AgentWebSocketClient-63"><a href="#AgentWebSocketClient-63"><span class="linenos"> 63</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-64"><a href="#AgentWebSocketClient-64"><span class="linenos"> 64</span></a><span class="sd">    Client for interacting with Deepgram&#39;s live transcription services over WebSockets.</span>
</span><span id="AgentWebSocketClient-65"><a href="#AgentWebSocketClient-65"><span class="linenos"> 65</span></a>
</span><span id="AgentWebSocketClient-66"><a href="#AgentWebSocketClient-66"><span class="linenos"> 66</span></a><span class="sd">     This class provides methods to establish a WebSocket connection for live transcription and handle real-time transcription events.</span>
</span><span id="AgentWebSocketClient-67"><a href="#AgentWebSocketClient-67"><span class="linenos"> 67</span></a>
</span><span id="AgentWebSocketClient-68"><a href="#AgentWebSocketClient-68"><span class="linenos"> 68</span></a><span class="sd">     Args:</span>
</span><span id="AgentWebSocketClient-69"><a href="#AgentWebSocketClient-69"><span class="linenos"> 69</span></a><span class="sd">         config (DeepgramClientOptions): all the options for the client.</span>
</span><span id="AgentWebSocketClient-70"><a href="#AgentWebSocketClient-70"><span class="linenos"> 70</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-71"><a href="#AgentWebSocketClient-71"><span class="linenos"> 71</span></a>
</span><span id="AgentWebSocketClient-72"><a href="#AgentWebSocketClient-72"><span class="linenos"> 72</span></a>    <span class="n">_logger</span><span class="p">:</span> <span class="n">verboselogs</span><span class="o">.</span><span class="n">VerboseLogger</span>
</span><span id="AgentWebSocketClient-73"><a href="#AgentWebSocketClient-73"><span class="linenos"> 73</span></a>    <span class="n">_config</span><span class="p">:</span> <span class="n">DeepgramClientOptions</span>
</span><span id="AgentWebSocketClient-74"><a href="#AgentWebSocketClient-74"><span class="linenos"> 74</span></a>    <span class="n">_endpoint</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="AgentWebSocketClient-75"><a href="#AgentWebSocketClient-75"><span class="linenos"> 75</span></a>
</span><span id="AgentWebSocketClient-76"><a href="#AgentWebSocketClient-76"><span class="linenos"> 76</span></a>    <span class="n">_event_handlers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">AgentWebSocketEvents</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span>
</span><span id="AgentWebSocketClient-77"><a href="#AgentWebSocketClient-77"><span class="linenos"> 77</span></a>
</span><span id="AgentWebSocketClient-78"><a href="#AgentWebSocketClient-78"><span class="linenos"> 78</span></a>    <span class="n">_keep_alive_thread</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="AgentWebSocketClient-79"><a href="#AgentWebSocketClient-79"><span class="linenos"> 79</span></a>
</span><span id="AgentWebSocketClient-80"><a href="#AgentWebSocketClient-80"><span class="linenos"> 80</span></a>    <span class="n">_kwargs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-81"><a href="#AgentWebSocketClient-81"><span class="linenos"> 81</span></a>    <span class="n">_addons</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-82"><a href="#AgentWebSocketClient-82"><span class="linenos"> 82</span></a>    <span class="c1"># note the distinction here. We can&#39;t use _config because it&#39;s already used in the parent</span>
</span><span id="AgentWebSocketClient-83"><a href="#AgentWebSocketClient-83"><span class="linenos"> 83</span></a>    <span class="n">_settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SettingsConfigurationOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-84"><a href="#AgentWebSocketClient-84"><span class="linenos"> 84</span></a>    <span class="n">_headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-85"><a href="#AgentWebSocketClient-85"><span class="linenos"> 85</span></a>
</span><span id="AgentWebSocketClient-86"><a href="#AgentWebSocketClient-86"><span class="linenos"> 86</span></a>    <span class="n">_speaker_created</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient-87"><a href="#AgentWebSocketClient-87"><span class="linenos"> 87</span></a>    <span class="n">_speaker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Speaker</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-88"><a href="#AgentWebSocketClient-88"><span class="linenos"> 88</span></a>    <span class="n">_microphone_created</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient-89"><a href="#AgentWebSocketClient-89"><span class="linenos"> 89</span></a>    <span class="n">_microphone</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Microphone</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-90"><a href="#AgentWebSocketClient-90"><span class="linenos"> 90</span></a>
</span><span id="AgentWebSocketClient-91"><a href="#AgentWebSocketClient-91"><span class="linenos"> 91</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">DeepgramClientOptions</span><span class="p">):</span>
</span><span id="AgentWebSocketClient-92"><a href="#AgentWebSocketClient-92"><span class="linenos"> 92</span></a>        <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-93"><a href="#AgentWebSocketClient-93"><span class="linenos"> 93</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Config is required&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-94"><a href="#AgentWebSocketClient-94"><span class="linenos"> 94</span></a>
</span><span id="AgentWebSocketClient-95"><a href="#AgentWebSocketClient-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">verboselogs</span><span class="o">.</span><span class="n">VerboseLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-96"><a href="#AgentWebSocketClient-96"><span class="linenos"> 96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">())</span>
</span><span id="AgentWebSocketClient-97"><a href="#AgentWebSocketClient-97"><span class="linenos"> 97</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">verbose</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-98"><a href="#AgentWebSocketClient-98"><span class="linenos"> 98</span></a>
</span><span id="AgentWebSocketClient-99"><a href="#AgentWebSocketClient-99"><span class="linenos"> 99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
</span><span id="AgentWebSocketClient-100"><a href="#AgentWebSocketClient-100"><span class="linenos">100</span></a>
</span><span id="AgentWebSocketClient-101"><a href="#AgentWebSocketClient-101"><span class="linenos">101</span></a>        <span class="c1"># needs to be &quot;wss://agent.deepgram.com/agent&quot;</span>
</span><span id="AgentWebSocketClient-102"><a href="#AgentWebSocketClient-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span> <span class="o">=</span> <span class="s2">&quot;agent&quot;</span>
</span><span id="AgentWebSocketClient-103"><a href="#AgentWebSocketClient-103"><span class="linenos">103</span></a>
</span><span id="AgentWebSocketClient-104"><a href="#AgentWebSocketClient-104"><span class="linenos">104</span></a>        <span class="c1"># override the endpoint since it needs to be &quot;wss://agent.deepgram.com/agent&quot;</span>
</span><span id="AgentWebSocketClient-105"><a href="#AgentWebSocketClient-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;agent.deepgram.com&quot;</span>
</span><span id="AgentWebSocketClient-106"><a href="#AgentWebSocketClient-106"><span class="linenos">106</span></a>
</span><span id="AgentWebSocketClient-107"><a href="#AgentWebSocketClient-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-108"><a href="#AgentWebSocketClient-108"><span class="linenos">108</span></a>
</span><span id="AgentWebSocketClient-109"><a href="#AgentWebSocketClient-109"><span class="linenos">109</span></a>        <span class="c1"># init handlers</span>
</span><span id="AgentWebSocketClient-110"><a href="#AgentWebSocketClient-110"><span class="linenos">110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_event_handlers</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AgentWebSocketClient-111"><a href="#AgentWebSocketClient-111"><span class="linenos">111</span></a>            <span class="n">event</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-112"><a href="#AgentWebSocketClient-112"><span class="linenos">112</span></a>        <span class="p">}</span>
</span><span id="AgentWebSocketClient-113"><a href="#AgentWebSocketClient-113"><span class="linenos">113</span></a>
</span><span id="AgentWebSocketClient-114"><a href="#AgentWebSocketClient-114"><span class="linenos">114</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-115"><a href="#AgentWebSocketClient-115"><span class="linenos">115</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;microphone_record is enabled&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-116"><a href="#AgentWebSocketClient-116"><span class="linenos">116</span></a>            <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record_rate&quot;</span><span class="p">,</span> <span class="n">MICROPHONE_RATE</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-117"><a href="#AgentWebSocketClient-117"><span class="linenos">117</span></a>            <span class="n">channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-118"><a href="#AgentWebSocketClient-118"><span class="linenos">118</span></a>                <span class="s2">&quot;microphone_record_channels&quot;</span><span class="p">,</span> <span class="n">MICROPHONE_CHANNELS</span>
</span><span id="AgentWebSocketClient-119"><a href="#AgentWebSocketClient-119"><span class="linenos">119</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient-120"><a href="#AgentWebSocketClient-120"><span class="linenos">120</span></a>            <span class="n">device_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record_device_index&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-121"><a href="#AgentWebSocketClient-121"><span class="linenos">121</span></a>
</span><span id="AgentWebSocketClient-122"><a href="#AgentWebSocketClient-122"><span class="linenos">122</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;rate: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">rate</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-123"><a href="#AgentWebSocketClient-123"><span class="linenos">123</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;channels: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-124"><a href="#AgentWebSocketClient-124"><span class="linenos">124</span></a>
</span><span id="AgentWebSocketClient-125"><a href="#AgentWebSocketClient-125"><span class="linenos">125</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AgentWebSocketClient-126"><a href="#AgentWebSocketClient-126"><span class="linenos">126</span></a>
</span><span id="AgentWebSocketClient-127"><a href="#AgentWebSocketClient-127"><span class="linenos">127</span></a>            <span class="k">if</span> <span class="n">device_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-128"><a href="#AgentWebSocketClient-128"><span class="linenos">128</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;device_index: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">device_index</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-129"><a href="#AgentWebSocketClient-129"><span class="linenos">129</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="n">Microphone</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-130"><a href="#AgentWebSocketClient-130"><span class="linenos">130</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-131"><a href="#AgentWebSocketClient-131"><span class="linenos">131</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-132"><a href="#AgentWebSocketClient-132"><span class="linenos">132</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-133"><a href="#AgentWebSocketClient-133"><span class="linenos">133</span></a>                    <span class="n">input_device_index</span><span class="o">=</span><span class="n">device_index</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-134"><a href="#AgentWebSocketClient-134"><span class="linenos">134</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-135"><a href="#AgentWebSocketClient-135"><span class="linenos">135</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-136"><a href="#AgentWebSocketClient-136"><span class="linenos">136</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="n">Microphone</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-137"><a href="#AgentWebSocketClient-137"><span class="linenos">137</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-138"><a href="#AgentWebSocketClient-138"><span class="linenos">138</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-139"><a href="#AgentWebSocketClient-139"><span class="linenos">139</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-140"><a href="#AgentWebSocketClient-140"><span class="linenos">140</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-141"><a href="#AgentWebSocketClient-141"><span class="linenos">141</span></a>
</span><span id="AgentWebSocketClient-142"><a href="#AgentWebSocketClient-142"><span class="linenos">142</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-143"><a href="#AgentWebSocketClient-143"><span class="linenos">143</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;speaker_playback is enabled&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-144"><a href="#AgentWebSocketClient-144"><span class="linenos">144</span></a>            <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback_rate&quot;</span><span class="p">,</span> <span class="n">SPEAKER_RATE</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-145"><a href="#AgentWebSocketClient-145"><span class="linenos">145</span></a>            <span class="n">channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-146"><a href="#AgentWebSocketClient-146"><span class="linenos">146</span></a>                <span class="s2">&quot;speaker_playback_channels&quot;</span><span class="p">,</span> <span class="n">SPEAKER_CHANNELS</span>
</span><span id="AgentWebSocketClient-147"><a href="#AgentWebSocketClient-147"><span class="linenos">147</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient-148"><a href="#AgentWebSocketClient-148"><span class="linenos">148</span></a>            <span class="n">playback_delta_in_ms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-149"><a href="#AgentWebSocketClient-149"><span class="linenos">149</span></a>                <span class="s2">&quot;speaker_playback_delta_in_ms&quot;</span><span class="p">,</span> <span class="n">SPEAKER_PLAYBACK_DELTA</span>
</span><span id="AgentWebSocketClient-150"><a href="#AgentWebSocketClient-150"><span class="linenos">150</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient-151"><a href="#AgentWebSocketClient-151"><span class="linenos">151</span></a>            <span class="n">device_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback_device_index&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-152"><a href="#AgentWebSocketClient-152"><span class="linenos">152</span></a>
</span><span id="AgentWebSocketClient-153"><a href="#AgentWebSocketClient-153"><span class="linenos">153</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;rate: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">rate</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-154"><a href="#AgentWebSocketClient-154"><span class="linenos">154</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;channels: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-155"><a href="#AgentWebSocketClient-155"><span class="linenos">155</span></a>
</span><span id="AgentWebSocketClient-156"><a href="#AgentWebSocketClient-156"><span class="linenos">156</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AgentWebSocketClient-157"><a href="#AgentWebSocketClient-157"><span class="linenos">157</span></a>
</span><span id="AgentWebSocketClient-158"><a href="#AgentWebSocketClient-158"><span class="linenos">158</span></a>            <span class="k">if</span> <span class="n">device_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-159"><a href="#AgentWebSocketClient-159"><span class="linenos">159</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;device_index: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">device_index</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-160"><a href="#AgentWebSocketClient-160"><span class="linenos">160</span></a>
</span><span id="AgentWebSocketClient-161"><a href="#AgentWebSocketClient-161"><span class="linenos">161</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="n">Speaker</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-162"><a href="#AgentWebSocketClient-162"><span class="linenos">162</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-163"><a href="#AgentWebSocketClient-163"><span class="linenos">163</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-164"><a href="#AgentWebSocketClient-164"><span class="linenos">164</span></a>                    <span class="n">last_play_delta_in_ms</span><span class="o">=</span><span class="n">playback_delta_in_ms</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-165"><a href="#AgentWebSocketClient-165"><span class="linenos">165</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-166"><a href="#AgentWebSocketClient-166"><span class="linenos">166</span></a>                    <span class="n">output_device_index</span><span class="o">=</span><span class="n">device_index</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-167"><a href="#AgentWebSocketClient-167"><span class="linenos">167</span></a>                    <span class="n">microphone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-168"><a href="#AgentWebSocketClient-168"><span class="linenos">168</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-169"><a href="#AgentWebSocketClient-169"><span class="linenos">169</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-170"><a href="#AgentWebSocketClient-170"><span class="linenos">170</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="n">Speaker</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-171"><a href="#AgentWebSocketClient-171"><span class="linenos">171</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-172"><a href="#AgentWebSocketClient-172"><span class="linenos">172</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-173"><a href="#AgentWebSocketClient-173"><span class="linenos">173</span></a>                    <span class="n">last_play_delta_in_ms</span><span class="o">=</span><span class="n">playback_delta_in_ms</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-174"><a href="#AgentWebSocketClient-174"><span class="linenos">174</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-175"><a href="#AgentWebSocketClient-175"><span class="linenos">175</span></a>                    <span class="n">microphone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-176"><a href="#AgentWebSocketClient-176"><span class="linenos">176</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-177"><a href="#AgentWebSocketClient-177"><span class="linenos">177</span></a>
</span><span id="AgentWebSocketClient-178"><a href="#AgentWebSocketClient-178"><span class="linenos">178</span></a>        <span class="c1"># call the parent constructor</span>
</span><span id="AgentWebSocketClient-179"><a href="#AgentWebSocketClient-179"><span class="linenos">179</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-180"><a href="#AgentWebSocketClient-180"><span class="linenos">180</span></a>
</span><span id="AgentWebSocketClient-181"><a href="#AgentWebSocketClient-181"><span class="linenos">181</span></a>    <span class="c1"># pylint: disable=too-many-statements,too-many-branches</span>
</span><span id="AgentWebSocketClient-182"><a href="#AgentWebSocketClient-182"><span class="linenos">182</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-183"><a href="#AgentWebSocketClient-183"><span class="linenos">183</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-184"><a href="#AgentWebSocketClient-184"><span class="linenos">184</span></a>        <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SettingsConfigurationOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-185"><a href="#AgentWebSocketClient-185"><span class="linenos">185</span></a>        <span class="n">addons</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-186"><a href="#AgentWebSocketClient-186"><span class="linenos">186</span></a>        <span class="n">headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-187"><a href="#AgentWebSocketClient-187"><span class="linenos">187</span></a>        <span class="n">members</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-188"><a href="#AgentWebSocketClient-188"><span class="linenos">188</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-189"><a href="#AgentWebSocketClient-189"><span class="linenos">189</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-190"><a href="#AgentWebSocketClient-190"><span class="linenos">190</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-191"><a href="#AgentWebSocketClient-191"><span class="linenos">191</span></a><span class="sd">        Starts the WebSocket connection for agent API.</span>
</span><span id="AgentWebSocketClient-192"><a href="#AgentWebSocketClient-192"><span class="linenos">192</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-193"><a href="#AgentWebSocketClient-193"><span class="linenos">193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start ENTER&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-194"><a href="#AgentWebSocketClient-194"><span class="linenos">194</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;settings: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-195"><a href="#AgentWebSocketClient-195"><span class="linenos">195</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;addons: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">addons</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-196"><a href="#AgentWebSocketClient-196"><span class="linenos">196</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;headers: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-197"><a href="#AgentWebSocketClient-197"><span class="linenos">197</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;members: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">members</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-198"><a href="#AgentWebSocketClient-198"><span class="linenos">198</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;kwargs: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-199"><a href="#AgentWebSocketClient-199"><span class="linenos">199</span></a>
</span><span id="AgentWebSocketClient-200"><a href="#AgentWebSocketClient-200"><span class="linenos">200</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">SettingsConfigurationOptions</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">options</span><span class="o">.</span><span class="n">check</span><span class="p">():</span>
</span><span id="AgentWebSocketClient-201"><a href="#AgentWebSocketClient-201"><span class="linenos">201</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;settings.check failed&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-202"><a href="#AgentWebSocketClient-202"><span class="linenos">202</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-203"><a href="#AgentWebSocketClient-203"><span class="linenos">203</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Fatal agent settings error&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-204"><a href="#AgentWebSocketClient-204"><span class="linenos">204</span></a>
</span><span id="AgentWebSocketClient-205"><a href="#AgentWebSocketClient-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_addons</span> <span class="o">=</span> <span class="n">addons</span>
</span><span id="AgentWebSocketClient-206"><a href="#AgentWebSocketClient-206"><span class="linenos">206</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="n">headers</span>
</span><span id="AgentWebSocketClient-207"><a href="#AgentWebSocketClient-207"><span class="linenos">207</span></a>
</span><span id="AgentWebSocketClient-208"><a href="#AgentWebSocketClient-208"><span class="linenos">208</span></a>        <span class="c1"># add &quot;members&quot; as members of the class</span>
</span><span id="AgentWebSocketClient-209"><a href="#AgentWebSocketClient-209"><span class="linenos">209</span></a>        <span class="k">if</span> <span class="n">members</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-210"><a href="#AgentWebSocketClient-210"><span class="linenos">210</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">members</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-211"><a href="#AgentWebSocketClient-211"><span class="linenos">211</span></a>
</span><span id="AgentWebSocketClient-212"><a href="#AgentWebSocketClient-212"><span class="linenos">212</span></a>        <span class="c1"># set kwargs as members of the class</span>
</span><span id="AgentWebSocketClient-213"><a href="#AgentWebSocketClient-213"><span class="linenos">213</span></a>        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-214"><a href="#AgentWebSocketClient-214"><span class="linenos">214</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
</span><span id="AgentWebSocketClient-215"><a href="#AgentWebSocketClient-215"><span class="linenos">215</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-216"><a href="#AgentWebSocketClient-216"><span class="linenos">216</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="AgentWebSocketClient-217"><a href="#AgentWebSocketClient-217"><span class="linenos">217</span></a>
</span><span id="AgentWebSocketClient-218"><a href="#AgentWebSocketClient-218"><span class="linenos">218</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">SettingsConfigurationOptions</span><span class="p">):</span>
</span><span id="AgentWebSocketClient-219"><a href="#AgentWebSocketClient-219"><span class="linenos">219</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is class&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-220"><a href="#AgentWebSocketClient-220"><span class="linenos">220</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="AgentWebSocketClient-221"><a href="#AgentWebSocketClient-221"><span class="linenos">221</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="AgentWebSocketClient-222"><a href="#AgentWebSocketClient-222"><span class="linenos">222</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is dict&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-223"><a href="#AgentWebSocketClient-223"><span class="linenos">223</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">SettingsConfigurationOptions</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-224"><a href="#AgentWebSocketClient-224"><span class="linenos">224</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="AgentWebSocketClient-225"><a href="#AgentWebSocketClient-225"><span class="linenos">225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is json&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-226"><a href="#AgentWebSocketClient-226"><span class="linenos">226</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">SettingsConfigurationOptions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-227"><a href="#AgentWebSocketClient-227"><span class="linenos">227</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-228"><a href="#AgentWebSocketClient-228"><span class="linenos">228</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Invalid options type&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-229"><a href="#AgentWebSocketClient-229"><span class="linenos">229</span></a>
</span><span id="AgentWebSocketClient-230"><a href="#AgentWebSocketClient-230"><span class="linenos">230</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-231"><a href="#AgentWebSocketClient-231"><span class="linenos">231</span></a>            <span class="c1"># speaker substitutes the listening thread</span>
</span><span id="AgentWebSocketClient-232"><a href="#AgentWebSocketClient-232"><span class="linenos">232</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-233"><a href="#AgentWebSocketClient-233"><span class="linenos">233</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;passing speaker to delegate_listening&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-234"><a href="#AgentWebSocketClient-234"><span class="linenos">234</span></a>                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">delegate_listening</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-235"><a href="#AgentWebSocketClient-235"><span class="linenos">235</span></a>
</span><span id="AgentWebSocketClient-236"><a href="#AgentWebSocketClient-236"><span class="linenos">236</span></a>            <span class="c1"># call parent start</span>
</span><span id="AgentWebSocketClient-237"><a href="#AgentWebSocketClient-237"><span class="linenos">237</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient-238"><a href="#AgentWebSocketClient-238"><span class="linenos">238</span></a>                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-239"><a href="#AgentWebSocketClient-239"><span class="linenos">239</span></a>                    <span class="p">{},</span>
</span><span id="AgentWebSocketClient-240"><a href="#AgentWebSocketClient-240"><span class="linenos">240</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_addons</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-241"><a href="#AgentWebSocketClient-241"><span class="linenos">241</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-242"><a href="#AgentWebSocketClient-242"><span class="linenos">242</span></a>                    <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-243"><a href="#AgentWebSocketClient-243"><span class="linenos">243</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-244"><a href="#AgentWebSocketClient-244"><span class="linenos">244</span></a>                <span class="ow">is</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient-245"><a href="#AgentWebSocketClient-245"><span class="linenos">245</span></a>            <span class="p">):</span>
</span><span id="AgentWebSocketClient-246"><a href="#AgentWebSocketClient-246"><span class="linenos">246</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start failed&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-247"><a href="#AgentWebSocketClient-247"><span class="linenos">247</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-248"><a href="#AgentWebSocketClient-248"><span class="linenos">248</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient-249"><a href="#AgentWebSocketClient-249"><span class="linenos">249</span></a>
</span><span id="AgentWebSocketClient-250"><a href="#AgentWebSocketClient-250"><span class="linenos">250</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-251"><a href="#AgentWebSocketClient-251"><span class="linenos">251</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;speaker is delegate_listening. Starting speaker&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-252"><a href="#AgentWebSocketClient-252"><span class="linenos">252</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-253"><a href="#AgentWebSocketClient-253"><span class="linenos">253</span></a>
</span><span id="AgentWebSocketClient-254"><a href="#AgentWebSocketClient-254"><span class="linenos">254</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-255"><a href="#AgentWebSocketClient-255"><span class="linenos">255</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-256"><a href="#AgentWebSocketClient-256"><span class="linenos">256</span></a>                    <span class="s2">&quot;speaker is delegate_listening. Starting microphone&quot;</span>
</span><span id="AgentWebSocketClient-257"><a href="#AgentWebSocketClient-257"><span class="linenos">257</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-258"><a href="#AgentWebSocketClient-258"><span class="linenos">258</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">set_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-259"><a href="#AgentWebSocketClient-259"><span class="linenos">259</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-260"><a href="#AgentWebSocketClient-260"><span class="linenos">260</span></a>
</span><span id="AgentWebSocketClient-261"><a href="#AgentWebSocketClient-261"><span class="linenos">261</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AgentWebSocketClient-262"><a href="#AgentWebSocketClient-262"><span class="linenos">262</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AgentWebSocketClient-263"><a href="#AgentWebSocketClient-263"><span class="linenos">263</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-264"><a href="#AgentWebSocketClient-264"><span class="linenos">264</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AgentWebSocketClient-265"><a href="#AgentWebSocketClient-265"><span class="linenos">265</span></a>
</span><span id="AgentWebSocketClient-266"><a href="#AgentWebSocketClient-266"><span class="linenos">266</span></a>            <span class="c1"># keepalive thread</span>
</span><span id="AgentWebSocketClient-267"><a href="#AgentWebSocketClient-267"><span class="linenos">267</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">is_keep_alive_enabled</span><span class="p">():</span>
</span><span id="AgentWebSocketClient-268"><a href="#AgentWebSocketClient-268"><span class="linenos">268</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keepalive is enabled&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-269"><a href="#AgentWebSocketClient-269"><span class="linenos">269</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-270"><a href="#AgentWebSocketClient-270"><span class="linenos">270</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-271"><a href="#AgentWebSocketClient-271"><span class="linenos">271</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-272"><a href="#AgentWebSocketClient-272"><span class="linenos">272</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keepalive is disabled&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-273"><a href="#AgentWebSocketClient-273"><span class="linenos">273</span></a>
</span><span id="AgentWebSocketClient-274"><a href="#AgentWebSocketClient-274"><span class="linenos">274</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AgentWebSocketClient-275"><a href="#AgentWebSocketClient-275"><span class="linenos">275</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AgentWebSocketClient-276"><a href="#AgentWebSocketClient-276"><span class="linenos">276</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-277"><a href="#AgentWebSocketClient-277"><span class="linenos">277</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AgentWebSocketClient-278"><a href="#AgentWebSocketClient-278"><span class="linenos">278</span></a>
</span><span id="AgentWebSocketClient-279"><a href="#AgentWebSocketClient-279"><span class="linenos">279</span></a>            <span class="c1"># send the configurationsetting message</span>
</span><span id="AgentWebSocketClient-280"><a href="#AgentWebSocketClient-280"><span class="linenos">280</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;Sending ConfigurationSettings...&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-281"><a href="#AgentWebSocketClient-281"><span class="linenos">281</span></a>            <span class="n">ret_send_cs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">))</span>
</span><span id="AgentWebSocketClient-282"><a href="#AgentWebSocketClient-282"><span class="linenos">282</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">ret_send_cs</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-283"><a href="#AgentWebSocketClient-283"><span class="linenos">283</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;ConfigurationSettings failed&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-284"><a href="#AgentWebSocketClient-284"><span class="linenos">284</span></a>
</span><span id="AgentWebSocketClient-285"><a href="#AgentWebSocketClient-285"><span class="linenos">285</span></a>                <span class="n">err_error</span><span class="p">:</span> <span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-286"><a href="#AgentWebSocketClient-286"><span class="linenos">286</span></a>                    <span class="s2">&quot;Exception in AgentWebSocketClient.start&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-287"><a href="#AgentWebSocketClient-287"><span class="linenos">287</span></a>                    <span class="s2">&quot;ConfigurationSettings failed to send&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-288"><a href="#AgentWebSocketClient-288"><span class="linenos">288</span></a>                    <span class="s2">&quot;Exception&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-289"><a href="#AgentWebSocketClient-289"><span class="linenos">289</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-290"><a href="#AgentWebSocketClient-290"><span class="linenos">290</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-291"><a href="#AgentWebSocketClient-291"><span class="linenos">291</span></a>                    <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-292"><a href="#AgentWebSocketClient-292"><span class="linenos">292</span></a>                    <span class="n">error</span><span class="o">=</span><span class="n">err_error</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-293"><a href="#AgentWebSocketClient-293"><span class="linenos">293</span></a>                    <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-294"><a href="#AgentWebSocketClient-294"><span class="linenos">294</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-295"><a href="#AgentWebSocketClient-295"><span class="linenos">295</span></a>
</span><span id="AgentWebSocketClient-296"><a href="#AgentWebSocketClient-296"><span class="linenos">296</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-297"><a href="#AgentWebSocketClient-297"><span class="linenos">297</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient-298"><a href="#AgentWebSocketClient-298"><span class="linenos">298</span></a>
</span><span id="AgentWebSocketClient-299"><a href="#AgentWebSocketClient-299"><span class="linenos">299</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;start succeeded&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-300"><a href="#AgentWebSocketClient-300"><span class="linenos">300</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-301"><a href="#AgentWebSocketClient-301"><span class="linenos">301</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="AgentWebSocketClient-302"><a href="#AgentWebSocketClient-302"><span class="linenos">302</span></a>
</span><span id="AgentWebSocketClient-303"><a href="#AgentWebSocketClient-303"><span class="linenos">303</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
</span><span id="AgentWebSocketClient-304"><a href="#AgentWebSocketClient-304"><span class="linenos">304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-305"><a href="#AgentWebSocketClient-305"><span class="linenos">305</span></a>                <span class="s2">&quot;WebSocketException in AgentWebSocketClient.start: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span>
</span><span id="AgentWebSocketClient-306"><a href="#AgentWebSocketClient-306"><span class="linenos">306</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient-307"><a href="#AgentWebSocketClient-307"><span class="linenos">307</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-308"><a href="#AgentWebSocketClient-308"><span class="linenos">308</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;termination_exception_connect&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-309"><a href="#AgentWebSocketClient-309"><span class="linenos">309</span></a>                <span class="k">raise</span> <span class="n">e</span>
</span><span id="AgentWebSocketClient-310"><a href="#AgentWebSocketClient-310"><span class="linenos">310</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient-311"><a href="#AgentWebSocketClient-311"><span class="linenos">311</span></a>
</span><span id="AgentWebSocketClient-312"><a href="#AgentWebSocketClient-312"><span class="linenos">312</span></a>    <span class="c1"># pylint: enable=too-many-statements,too-many-branches</span>
</span><span id="AgentWebSocketClient-313"><a href="#AgentWebSocketClient-313"><span class="linenos">313</span></a>
</span><span id="AgentWebSocketClient-314"><a href="#AgentWebSocketClient-314"><span class="linenos">314</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">AgentWebSocketEvents</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-315"><a href="#AgentWebSocketClient-315"><span class="linenos">315</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-316"><a href="#AgentWebSocketClient-316"><span class="linenos">316</span></a><span class="sd">        Registers event handlers for specific events.</span>
</span><span id="AgentWebSocketClient-317"><a href="#AgentWebSocketClient-317"><span class="linenos">317</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-318"><a href="#AgentWebSocketClient-318"><span class="linenos">318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;event subscribed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-319"><a href="#AgentWebSocketClient-319"><span class="linenos">319</span></a>        <span class="k">if</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">callable</span><span class="p">(</span><span class="n">handler</span><span class="p">):</span>
</span><span id="AgentWebSocketClient-320"><a href="#AgentWebSocketClient-320"><span class="linenos">320</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_event_handlers</span><span class="p">[</span><span class="n">event</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-321"><a href="#AgentWebSocketClient-321"><span class="linenos">321</span></a>
</span><span id="AgentWebSocketClient-322"><a href="#AgentWebSocketClient-322"><span class="linenos">322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">AgentWebSocketEvents</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-323"><a href="#AgentWebSocketClient-323"><span class="linenos">323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-324"><a href="#AgentWebSocketClient-324"><span class="linenos">324</span></a><span class="sd">        Emits events to the registered event handlers.</span>
</span><span id="AgentWebSocketClient-325"><a href="#AgentWebSocketClient-325"><span class="linenos">325</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-326"><a href="#AgentWebSocketClient-326"><span class="linenos">326</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient._emit ENTER&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-327"><a href="#AgentWebSocketClient-327"><span class="linenos">327</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;callback handlers for: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-328"><a href="#AgentWebSocketClient-328"><span class="linenos">328</span></a>
</span><span id="AgentWebSocketClient-329"><a href="#AgentWebSocketClient-329"><span class="linenos">329</span></a>        <span class="c1"># debug the threads</span>
</span><span id="AgentWebSocketClient-330"><a href="#AgentWebSocketClient-330"><span class="linenos">330</span></a>        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AgentWebSocketClient-331"><a href="#AgentWebSocketClient-331"><span class="linenos">331</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-332"><a href="#AgentWebSocketClient-332"><span class="linenos">332</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AgentWebSocketClient-333"><a href="#AgentWebSocketClient-333"><span class="linenos">333</span></a>
</span><span id="AgentWebSocketClient-334"><a href="#AgentWebSocketClient-334"><span class="linenos">334</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;callback handlers for: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-335"><a href="#AgentWebSocketClient-335"><span class="linenos">335</span></a>        <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event_handlers</span><span class="p">[</span><span class="n">event</span><span class="p">]:</span>
</span><span id="AgentWebSocketClient-336"><a href="#AgentWebSocketClient-336"><span class="linenos">336</span></a>            <span class="n">handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-337"><a href="#AgentWebSocketClient-337"><span class="linenos">337</span></a>
</span><span id="AgentWebSocketClient-338"><a href="#AgentWebSocketClient-338"><span class="linenos">338</span></a>        <span class="c1"># debug the threads</span>
</span><span id="AgentWebSocketClient-339"><a href="#AgentWebSocketClient-339"><span class="linenos">339</span></a>        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AgentWebSocketClient-340"><a href="#AgentWebSocketClient-340"><span class="linenos">340</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-341"><a href="#AgentWebSocketClient-341"><span class="linenos">341</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AgentWebSocketClient-342"><a href="#AgentWebSocketClient-342"><span class="linenos">342</span></a>
</span><span id="AgentWebSocketClient-343"><a href="#AgentWebSocketClient-343"><span class="linenos">343</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient._emit LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-344"><a href="#AgentWebSocketClient-344"><span class="linenos">344</span></a>
</span><span id="AgentWebSocketClient-345"><a href="#AgentWebSocketClient-345"><span class="linenos">345</span></a>    <span class="c1"># pylint: disable=too-many-return-statements,too-many-statements,too-many-locals,too-many-branches</span>
</span><span id="AgentWebSocketClient-346"><a href="#AgentWebSocketClient-346"><span class="linenos">346</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_process_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-347"><a href="#AgentWebSocketClient-347"><span class="linenos">347</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-348"><a href="#AgentWebSocketClient-348"><span class="linenos">348</span></a><span class="sd">        Processes messages received over the WebSocket connection.</span>
</span><span id="AgentWebSocketClient-349"><a href="#AgentWebSocketClient-349"><span class="linenos">349</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-350"><a href="#AgentWebSocketClient-350"><span class="linenos">350</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient._process_text ENTER&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-351"><a href="#AgentWebSocketClient-351"><span class="linenos">351</span></a>
</span><span id="AgentWebSocketClient-352"><a href="#AgentWebSocketClient-352"><span class="linenos">352</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-353"><a href="#AgentWebSocketClient-353"><span class="linenos">353</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Text data received&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-354"><a href="#AgentWebSocketClient-354"><span class="linenos">354</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-355"><a href="#AgentWebSocketClient-355"><span class="linenos">355</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;message is empty&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-356"><a href="#AgentWebSocketClient-356"><span class="linenos">356</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient._process_text LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-357"><a href="#AgentWebSocketClient-357"><span class="linenos">357</span></a>                <span class="k">return</span>
</span><span id="AgentWebSocketClient-358"><a href="#AgentWebSocketClient-358"><span class="linenos">358</span></a>
</span><span id="AgentWebSocketClient-359"><a href="#AgentWebSocketClient-359"><span class="linenos">359</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-360"><a href="#AgentWebSocketClient-360"><span class="linenos">360</span></a>            <span class="n">response_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-361"><a href="#AgentWebSocketClient-361"><span class="linenos">361</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;response_type: </span><span class="si">%s</span><span class="s2">, data: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response_type</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-362"><a href="#AgentWebSocketClient-362"><span class="linenos">362</span></a>
</span><span id="AgentWebSocketClient-363"><a href="#AgentWebSocketClient-363"><span class="linenos">363</span></a>            <span class="k">match</span> <span class="n">response_type</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-364"><a href="#AgentWebSocketClient-364"><span class="linenos">364</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Open</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-365"><a href="#AgentWebSocketClient-365"><span class="linenos">365</span></a>                    <span class="n">open_result</span><span class="p">:</span> <span class="n">OpenResponse</span> <span class="o">=</span> <span class="n">OpenResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-366"><a href="#AgentWebSocketClient-366"><span class="linenos">366</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;OpenResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">open_result</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-367"><a href="#AgentWebSocketClient-367"><span class="linenos">367</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-368"><a href="#AgentWebSocketClient-368"><span class="linenos">368</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Open</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-369"><a href="#AgentWebSocketClient-369"><span class="linenos">369</span></a>                        <span class="nb">open</span><span class="o">=</span><span class="n">open_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-370"><a href="#AgentWebSocketClient-370"><span class="linenos">370</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-371"><a href="#AgentWebSocketClient-371"><span class="linenos">371</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-372"><a href="#AgentWebSocketClient-372"><span class="linenos">372</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Welcome</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-373"><a href="#AgentWebSocketClient-373"><span class="linenos">373</span></a>                    <span class="n">welcome_result</span><span class="p">:</span> <span class="n">WelcomeResponse</span> <span class="o">=</span> <span class="n">WelcomeResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-374"><a href="#AgentWebSocketClient-374"><span class="linenos">374</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;WelcomeResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">welcome_result</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-375"><a href="#AgentWebSocketClient-375"><span class="linenos">375</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-376"><a href="#AgentWebSocketClient-376"><span class="linenos">376</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Welcome</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-377"><a href="#AgentWebSocketClient-377"><span class="linenos">377</span></a>                        <span class="n">welcome</span><span class="o">=</span><span class="n">welcome_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-378"><a href="#AgentWebSocketClient-378"><span class="linenos">378</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-379"><a href="#AgentWebSocketClient-379"><span class="linenos">379</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-380"><a href="#AgentWebSocketClient-380"><span class="linenos">380</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">SettingsApplied</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-381"><a href="#AgentWebSocketClient-381"><span class="linenos">381</span></a>                    <span class="n">settings_applied_result</span><span class="p">:</span> <span class="n">SettingsAppliedResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient-382"><a href="#AgentWebSocketClient-382"><span class="linenos">382</span></a>                        <span class="n">SettingsAppliedResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-383"><a href="#AgentWebSocketClient-383"><span class="linenos">383</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-384"><a href="#AgentWebSocketClient-384"><span class="linenos">384</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-385"><a href="#AgentWebSocketClient-385"><span class="linenos">385</span></a>                        <span class="s2">&quot;SettingsAppliedResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">settings_applied_result</span>
</span><span id="AgentWebSocketClient-386"><a href="#AgentWebSocketClient-386"><span class="linenos">386</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-387"><a href="#AgentWebSocketClient-387"><span class="linenos">387</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-388"><a href="#AgentWebSocketClient-388"><span class="linenos">388</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">SettingsApplied</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-389"><a href="#AgentWebSocketClient-389"><span class="linenos">389</span></a>                        <span class="n">settings_applied</span><span class="o">=</span><span class="n">settings_applied_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-390"><a href="#AgentWebSocketClient-390"><span class="linenos">390</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-391"><a href="#AgentWebSocketClient-391"><span class="linenos">391</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-392"><a href="#AgentWebSocketClient-392"><span class="linenos">392</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">ConversationText</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-393"><a href="#AgentWebSocketClient-393"><span class="linenos">393</span></a>                    <span class="n">conversation_text_result</span><span class="p">:</span> <span class="n">ConversationTextResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient-394"><a href="#AgentWebSocketClient-394"><span class="linenos">394</span></a>                        <span class="n">ConversationTextResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-395"><a href="#AgentWebSocketClient-395"><span class="linenos">395</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-396"><a href="#AgentWebSocketClient-396"><span class="linenos">396</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-397"><a href="#AgentWebSocketClient-397"><span class="linenos">397</span></a>                        <span class="s2">&quot;ConversationTextResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">conversation_text_result</span>
</span><span id="AgentWebSocketClient-398"><a href="#AgentWebSocketClient-398"><span class="linenos">398</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-399"><a href="#AgentWebSocketClient-399"><span class="linenos">399</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-400"><a href="#AgentWebSocketClient-400"><span class="linenos">400</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">ConversationText</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-401"><a href="#AgentWebSocketClient-401"><span class="linenos">401</span></a>                        <span class="n">conversation_text</span><span class="o">=</span><span class="n">conversation_text_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-402"><a href="#AgentWebSocketClient-402"><span class="linenos">402</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-403"><a href="#AgentWebSocketClient-403"><span class="linenos">403</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-404"><a href="#AgentWebSocketClient-404"><span class="linenos">404</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">UserStartedSpeaking</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-405"><a href="#AgentWebSocketClient-405"><span class="linenos">405</span></a>                    <span class="n">user_started_speaking_result</span><span class="p">:</span> <span class="n">UserStartedSpeakingResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient-406"><a href="#AgentWebSocketClient-406"><span class="linenos">406</span></a>                        <span class="n">UserStartedSpeakingResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-407"><a href="#AgentWebSocketClient-407"><span class="linenos">407</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-408"><a href="#AgentWebSocketClient-408"><span class="linenos">408</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-409"><a href="#AgentWebSocketClient-409"><span class="linenos">409</span></a>                        <span class="s2">&quot;UserStartedSpeakingResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">user_started_speaking_result</span>
</span><span id="AgentWebSocketClient-410"><a href="#AgentWebSocketClient-410"><span class="linenos">410</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-411"><a href="#AgentWebSocketClient-411"><span class="linenos">411</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-412"><a href="#AgentWebSocketClient-412"><span class="linenos">412</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">UserStartedSpeaking</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-413"><a href="#AgentWebSocketClient-413"><span class="linenos">413</span></a>                        <span class="n">user_started_speaking</span><span class="o">=</span><span class="n">user_started_speaking_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-414"><a href="#AgentWebSocketClient-414"><span class="linenos">414</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-415"><a href="#AgentWebSocketClient-415"><span class="linenos">415</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-416"><a href="#AgentWebSocketClient-416"><span class="linenos">416</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentThinking</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-417"><a href="#AgentWebSocketClient-417"><span class="linenos">417</span></a>                    <span class="n">agent_thinking_result</span><span class="p">:</span> <span class="n">AgentThinkingResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient-418"><a href="#AgentWebSocketClient-418"><span class="linenos">418</span></a>                        <span class="n">AgentThinkingResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-419"><a href="#AgentWebSocketClient-419"><span class="linenos">419</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-420"><a href="#AgentWebSocketClient-420"><span class="linenos">420</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-421"><a href="#AgentWebSocketClient-421"><span class="linenos">421</span></a>                        <span class="s2">&quot;AgentThinkingResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">agent_thinking_result</span>
</span><span id="AgentWebSocketClient-422"><a href="#AgentWebSocketClient-422"><span class="linenos">422</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-423"><a href="#AgentWebSocketClient-423"><span class="linenos">423</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-424"><a href="#AgentWebSocketClient-424"><span class="linenos">424</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentThinking</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-425"><a href="#AgentWebSocketClient-425"><span class="linenos">425</span></a>                        <span class="n">agent_thinking</span><span class="o">=</span><span class="n">agent_thinking_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-426"><a href="#AgentWebSocketClient-426"><span class="linenos">426</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-427"><a href="#AgentWebSocketClient-427"><span class="linenos">427</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-428"><a href="#AgentWebSocketClient-428"><span class="linenos">428</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">FunctionCalling</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-429"><a href="#AgentWebSocketClient-429"><span class="linenos">429</span></a>                    <span class="n">function_calling_result</span><span class="p">:</span> <span class="n">FunctionCalling</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient-430"><a href="#AgentWebSocketClient-430"><span class="linenos">430</span></a>                        <span class="n">FunctionCalling</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-431"><a href="#AgentWebSocketClient-431"><span class="linenos">431</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-432"><a href="#AgentWebSocketClient-432"><span class="linenos">432</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;FunctionCalling: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">function_calling_result</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-433"><a href="#AgentWebSocketClient-433"><span class="linenos">433</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-434"><a href="#AgentWebSocketClient-434"><span class="linenos">434</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">FunctionCalling</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-435"><a href="#AgentWebSocketClient-435"><span class="linenos">435</span></a>                        <span class="n">function_calling</span><span class="o">=</span><span class="n">function_calling_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-436"><a href="#AgentWebSocketClient-436"><span class="linenos">436</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-437"><a href="#AgentWebSocketClient-437"><span class="linenos">437</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-438"><a href="#AgentWebSocketClient-438"><span class="linenos">438</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">FunctionCallRequest</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-439"><a href="#AgentWebSocketClient-439"><span class="linenos">439</span></a>                    <span class="n">function_call_request_result</span><span class="p">:</span> <span class="n">FunctionCallRequest</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient-440"><a href="#AgentWebSocketClient-440"><span class="linenos">440</span></a>                        <span class="n">FunctionCallRequest</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-441"><a href="#AgentWebSocketClient-441"><span class="linenos">441</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-442"><a href="#AgentWebSocketClient-442"><span class="linenos">442</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-443"><a href="#AgentWebSocketClient-443"><span class="linenos">443</span></a>                        <span class="s2">&quot;FunctionCallRequest: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">function_call_request_result</span>
</span><span id="AgentWebSocketClient-444"><a href="#AgentWebSocketClient-444"><span class="linenos">444</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-445"><a href="#AgentWebSocketClient-445"><span class="linenos">445</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-446"><a href="#AgentWebSocketClient-446"><span class="linenos">446</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">FunctionCallRequest</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-447"><a href="#AgentWebSocketClient-447"><span class="linenos">447</span></a>                        <span class="n">function_call_request</span><span class="o">=</span><span class="n">function_call_request_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-448"><a href="#AgentWebSocketClient-448"><span class="linenos">448</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-449"><a href="#AgentWebSocketClient-449"><span class="linenos">449</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-450"><a href="#AgentWebSocketClient-450"><span class="linenos">450</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentStartedSpeaking</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-451"><a href="#AgentWebSocketClient-451"><span class="linenos">451</span></a>                    <span class="n">agent_started_speaking_result</span><span class="p">:</span> <span class="n">AgentStartedSpeakingResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient-452"><a href="#AgentWebSocketClient-452"><span class="linenos">452</span></a>                        <span class="n">AgentStartedSpeakingResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-453"><a href="#AgentWebSocketClient-453"><span class="linenos">453</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-454"><a href="#AgentWebSocketClient-454"><span class="linenos">454</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-455"><a href="#AgentWebSocketClient-455"><span class="linenos">455</span></a>                        <span class="s2">&quot;AgentStartedSpeakingResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-456"><a href="#AgentWebSocketClient-456"><span class="linenos">456</span></a>                        <span class="n">agent_started_speaking_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-457"><a href="#AgentWebSocketClient-457"><span class="linenos">457</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-458"><a href="#AgentWebSocketClient-458"><span class="linenos">458</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-459"><a href="#AgentWebSocketClient-459"><span class="linenos">459</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentStartedSpeaking</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-460"><a href="#AgentWebSocketClient-460"><span class="linenos">460</span></a>                        <span class="n">agent_started_speaking</span><span class="o">=</span><span class="n">agent_started_speaking_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-461"><a href="#AgentWebSocketClient-461"><span class="linenos">461</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-462"><a href="#AgentWebSocketClient-462"><span class="linenos">462</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-463"><a href="#AgentWebSocketClient-463"><span class="linenos">463</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentAudioDone</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-464"><a href="#AgentWebSocketClient-464"><span class="linenos">464</span></a>                    <span class="n">agent_audio_done_result</span><span class="p">:</span> <span class="n">AgentAudioDoneResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient-465"><a href="#AgentWebSocketClient-465"><span class="linenos">465</span></a>                        <span class="n">AgentAudioDoneResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-466"><a href="#AgentWebSocketClient-466"><span class="linenos">466</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-467"><a href="#AgentWebSocketClient-467"><span class="linenos">467</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-468"><a href="#AgentWebSocketClient-468"><span class="linenos">468</span></a>                        <span class="s2">&quot;AgentAudioDoneResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">agent_audio_done_result</span>
</span><span id="AgentWebSocketClient-469"><a href="#AgentWebSocketClient-469"><span class="linenos">469</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-470"><a href="#AgentWebSocketClient-470"><span class="linenos">470</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-471"><a href="#AgentWebSocketClient-471"><span class="linenos">471</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentAudioDone</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-472"><a href="#AgentWebSocketClient-472"><span class="linenos">472</span></a>                        <span class="n">agent_audio_done</span><span class="o">=</span><span class="n">agent_audio_done_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-473"><a href="#AgentWebSocketClient-473"><span class="linenos">473</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-474"><a href="#AgentWebSocketClient-474"><span class="linenos">474</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-475"><a href="#AgentWebSocketClient-475"><span class="linenos">475</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">InjectionRefused</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-476"><a href="#AgentWebSocketClient-476"><span class="linenos">476</span></a>                    <span class="n">injection_refused_result</span><span class="p">:</span> <span class="n">InjectionRefusedResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient-477"><a href="#AgentWebSocketClient-477"><span class="linenos">477</span></a>                        <span class="n">InjectionRefusedResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-478"><a href="#AgentWebSocketClient-478"><span class="linenos">478</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-479"><a href="#AgentWebSocketClient-479"><span class="linenos">479</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-480"><a href="#AgentWebSocketClient-480"><span class="linenos">480</span></a>                        <span class="s2">&quot;InjectionRefused: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">injection_refused_result</span>
</span><span id="AgentWebSocketClient-481"><a href="#AgentWebSocketClient-481"><span class="linenos">481</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-482"><a href="#AgentWebSocketClient-482"><span class="linenos">482</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-483"><a href="#AgentWebSocketClient-483"><span class="linenos">483</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">InjectionRefused</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-484"><a href="#AgentWebSocketClient-484"><span class="linenos">484</span></a>                        <span class="n">injection_refused</span><span class="o">=</span><span class="n">injection_refused_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-485"><a href="#AgentWebSocketClient-485"><span class="linenos">485</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-486"><a href="#AgentWebSocketClient-486"><span class="linenos">486</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-487"><a href="#AgentWebSocketClient-487"><span class="linenos">487</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Close</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-488"><a href="#AgentWebSocketClient-488"><span class="linenos">488</span></a>                    <span class="n">close_result</span><span class="p">:</span> <span class="n">CloseResponse</span> <span class="o">=</span> <span class="n">CloseResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-489"><a href="#AgentWebSocketClient-489"><span class="linenos">489</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;CloseResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">close_result</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-490"><a href="#AgentWebSocketClient-490"><span class="linenos">490</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-491"><a href="#AgentWebSocketClient-491"><span class="linenos">491</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Close</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-492"><a href="#AgentWebSocketClient-492"><span class="linenos">492</span></a>                        <span class="n">close</span><span class="o">=</span><span class="n">close_result</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-493"><a href="#AgentWebSocketClient-493"><span class="linenos">493</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-494"><a href="#AgentWebSocketClient-494"><span class="linenos">494</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-495"><a href="#AgentWebSocketClient-495"><span class="linenos">495</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-496"><a href="#AgentWebSocketClient-496"><span class="linenos">496</span></a>                    <span class="n">err_error</span><span class="p">:</span> <span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-497"><a href="#AgentWebSocketClient-497"><span class="linenos">497</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;ErrorResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">err_error</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-498"><a href="#AgentWebSocketClient-498"><span class="linenos">498</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-499"><a href="#AgentWebSocketClient-499"><span class="linenos">499</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-500"><a href="#AgentWebSocketClient-500"><span class="linenos">500</span></a>                        <span class="n">error</span><span class="o">=</span><span class="n">err_error</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-501"><a href="#AgentWebSocketClient-501"><span class="linenos">501</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-502"><a href="#AgentWebSocketClient-502"><span class="linenos">502</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-503"><a href="#AgentWebSocketClient-503"><span class="linenos">503</span></a>                <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-504"><a href="#AgentWebSocketClient-504"><span class="linenos">504</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-505"><a href="#AgentWebSocketClient-505"><span class="linenos">505</span></a>                        <span class="s2">&quot;Unknown Message: response_type: </span><span class="si">%s</span><span class="s2">, data: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-506"><a href="#AgentWebSocketClient-506"><span class="linenos">506</span></a>                        <span class="n">response_type</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-507"><a href="#AgentWebSocketClient-507"><span class="linenos">507</span></a>                        <span class="n">data</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-508"><a href="#AgentWebSocketClient-508"><span class="linenos">508</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-509"><a href="#AgentWebSocketClient-509"><span class="linenos">509</span></a>                    <span class="n">unhandled_error</span><span class="p">:</span> <span class="n">UnhandledResponse</span> <span class="o">=</span> <span class="n">UnhandledResponse</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-510"><a href="#AgentWebSocketClient-510"><span class="linenos">510</span></a>                        <span class="nb">type</span><span class="o">=</span><span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Unhandled</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-511"><a href="#AgentWebSocketClient-511"><span class="linenos">511</span></a>                        <span class="n">raw</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-512"><a href="#AgentWebSocketClient-512"><span class="linenos">512</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-513"><a href="#AgentWebSocketClient-513"><span class="linenos">513</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-514"><a href="#AgentWebSocketClient-514"><span class="linenos">514</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Unhandled</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-515"><a href="#AgentWebSocketClient-515"><span class="linenos">515</span></a>                        <span class="n">unhandled</span><span class="o">=</span><span class="n">unhandled_error</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-516"><a href="#AgentWebSocketClient-516"><span class="linenos">516</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-517"><a href="#AgentWebSocketClient-517"><span class="linenos">517</span></a>                    <span class="p">)</span>
</span><span id="AgentWebSocketClient-518"><a href="#AgentWebSocketClient-518"><span class="linenos">518</span></a>
</span><span id="AgentWebSocketClient-519"><a href="#AgentWebSocketClient-519"><span class="linenos">519</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;_process_text Succeeded&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-520"><a href="#AgentWebSocketClient-520"><span class="linenos">520</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;SpeakStreamClient._process_text LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-521"><a href="#AgentWebSocketClient-521"><span class="linenos">521</span></a>
</span><span id="AgentWebSocketClient-522"><a href="#AgentWebSocketClient-522"><span class="linenos">522</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
</span><span id="AgentWebSocketClient-523"><a href="#AgentWebSocketClient-523"><span class="linenos">523</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Exception in AgentWebSocketClient._process_text: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-524"><a href="#AgentWebSocketClient-524"><span class="linenos">524</span></a>            <span class="n">e_error</span><span class="p">:</span> <span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-525"><a href="#AgentWebSocketClient-525"><span class="linenos">525</span></a>                <span class="s2">&quot;Exception in AgentWebSocketClient._process_text&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-526"><a href="#AgentWebSocketClient-526"><span class="linenos">526</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-527"><a href="#AgentWebSocketClient-527"><span class="linenos">527</span></a>                <span class="s2">&quot;Exception&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-528"><a href="#AgentWebSocketClient-528"><span class="linenos">528</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient-529"><a href="#AgentWebSocketClient-529"><span class="linenos">529</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-530"><a href="#AgentWebSocketClient-530"><span class="linenos">530</span></a>                <span class="s2">&quot;Exception in AgentWebSocketClient._process_text: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-531"><a href="#AgentWebSocketClient-531"><span class="linenos">531</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient-532"><a href="#AgentWebSocketClient-532"><span class="linenos">532</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-533"><a href="#AgentWebSocketClient-533"><span class="linenos">533</span></a>                <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-534"><a href="#AgentWebSocketClient-534"><span class="linenos">534</span></a>                <span class="n">error</span><span class="o">=</span><span class="n">e_error</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-535"><a href="#AgentWebSocketClient-535"><span class="linenos">535</span></a>                <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-536"><a href="#AgentWebSocketClient-536"><span class="linenos">536</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient-537"><a href="#AgentWebSocketClient-537"><span class="linenos">537</span></a>
</span><span id="AgentWebSocketClient-538"><a href="#AgentWebSocketClient-538"><span class="linenos">538</span></a>            <span class="c1"># signal exit and close</span>
</span><span id="AgentWebSocketClient-539"><a href="#AgentWebSocketClient-539"><span class="linenos">539</span></a>            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_signal_exit</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-540"><a href="#AgentWebSocketClient-540"><span class="linenos">540</span></a>
</span><span id="AgentWebSocketClient-541"><a href="#AgentWebSocketClient-541"><span class="linenos">541</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient._process_text LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-542"><a href="#AgentWebSocketClient-542"><span class="linenos">542</span></a>
</span><span id="AgentWebSocketClient-543"><a href="#AgentWebSocketClient-543"><span class="linenos">543</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;termination_exception&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-544"><a href="#AgentWebSocketClient-544"><span class="linenos">544</span></a>                <span class="k">raise</span>
</span><span id="AgentWebSocketClient-545"><a href="#AgentWebSocketClient-545"><span class="linenos">545</span></a>            <span class="k">return</span>
</span><span id="AgentWebSocketClient-546"><a href="#AgentWebSocketClient-546"><span class="linenos">546</span></a>
</span><span id="AgentWebSocketClient-547"><a href="#AgentWebSocketClient-547"><span class="linenos">547</span></a>    <span class="c1"># pylint: enable=too-many-return-statements,too-many-statements</span>
</span><span id="AgentWebSocketClient-548"><a href="#AgentWebSocketClient-548"><span class="linenos">548</span></a>
</span><span id="AgentWebSocketClient-549"><a href="#AgentWebSocketClient-549"><span class="linenos">549</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_process_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-550"><a href="#AgentWebSocketClient-550"><span class="linenos">550</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient._process_binary ENTER&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-551"><a href="#AgentWebSocketClient-551"><span class="linenos">551</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Binary data received&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-552"><a href="#AgentWebSocketClient-552"><span class="linenos">552</span></a>
</span><span id="AgentWebSocketClient-553"><a href="#AgentWebSocketClient-553"><span class="linenos">553</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-554"><a href="#AgentWebSocketClient-554"><span class="linenos">554</span></a>            <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AudioData</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-555"><a href="#AgentWebSocketClient-555"><span class="linenos">555</span></a>            <span class="n">data</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-556"><a href="#AgentWebSocketClient-556"><span class="linenos">556</span></a>            <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-557"><a href="#AgentWebSocketClient-557"><span class="linenos">557</span></a>        <span class="p">)</span>
</span><span id="AgentWebSocketClient-558"><a href="#AgentWebSocketClient-558"><span class="linenos">558</span></a>
</span><span id="AgentWebSocketClient-559"><a href="#AgentWebSocketClient-559"><span class="linenos">559</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;_process_binary Succeeded&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-560"><a href="#AgentWebSocketClient-560"><span class="linenos">560</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient._process_binary LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-561"><a href="#AgentWebSocketClient-561"><span class="linenos">561</span></a>
</span><span id="AgentWebSocketClient-562"><a href="#AgentWebSocketClient-562"><span class="linenos">562</span></a>    <span class="c1"># pylint: disable=too-many-return-statements</span>
</span><span id="AgentWebSocketClient-563"><a href="#AgentWebSocketClient-563"><span class="linenos">563</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_keep_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-564"><a href="#AgentWebSocketClient-564"><span class="linenos">564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-565"><a href="#AgentWebSocketClient-565"><span class="linenos">565</span></a><span class="sd">        Sends keepalive messages to the WebSocket connection.</span>
</span><span id="AgentWebSocketClient-566"><a href="#AgentWebSocketClient-566"><span class="linenos">566</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-567"><a href="#AgentWebSocketClient-567"><span class="linenos">567</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient._keep_alive ENTER&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-568"><a href="#AgentWebSocketClient-568"><span class="linenos">568</span></a>
</span><span id="AgentWebSocketClient-569"><a href="#AgentWebSocketClient-569"><span class="linenos">569</span></a>        <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AgentWebSocketClient-570"><a href="#AgentWebSocketClient-570"><span class="linenos">570</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-571"><a href="#AgentWebSocketClient-571"><span class="linenos">571</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-572"><a href="#AgentWebSocketClient-572"><span class="linenos">572</span></a>                <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="AgentWebSocketClient-573"><a href="#AgentWebSocketClient-573"><span class="linenos">573</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_exit_event</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">ONE_SECOND</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-574"><a href="#AgentWebSocketClient-574"><span class="linenos">574</span></a>
</span><span id="AgentWebSocketClient-575"><a href="#AgentWebSocketClient-575"><span class="linenos">575</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exit_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
</span><span id="AgentWebSocketClient-576"><a href="#AgentWebSocketClient-576"><span class="linenos">576</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;_keep_alive exiting gracefully&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-577"><a href="#AgentWebSocketClient-577"><span class="linenos">577</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient._keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-578"><a href="#AgentWebSocketClient-578"><span class="linenos">578</span></a>                    <span class="k">return</span>
</span><span id="AgentWebSocketClient-579"><a href="#AgentWebSocketClient-579"><span class="linenos">579</span></a>
</span><span id="AgentWebSocketClient-580"><a href="#AgentWebSocketClient-580"><span class="linenos">580</span></a>                <span class="c1"># deepgram keepalive</span>
</span><span id="AgentWebSocketClient-581"><a href="#AgentWebSocketClient-581"><span class="linenos">581</span></a>                <span class="k">if</span> <span class="n">counter</span> <span class="o">%</span> <span class="n">DEEPGRAM_INTERVAL</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-582"><a href="#AgentWebSocketClient-582"><span class="linenos">582</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">keep_alive</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-583"><a href="#AgentWebSocketClient-583"><span class="linenos">583</span></a>
</span><span id="AgentWebSocketClient-584"><a href="#AgentWebSocketClient-584"><span class="linenos">584</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
</span><span id="AgentWebSocketClient-585"><a href="#AgentWebSocketClient-585"><span class="linenos">585</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-586"><a href="#AgentWebSocketClient-586"><span class="linenos">586</span></a>                    <span class="s2">&quot;Exception in AgentWebSocketClient._keep_alive: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span>
</span><span id="AgentWebSocketClient-587"><a href="#AgentWebSocketClient-587"><span class="linenos">587</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-588"><a href="#AgentWebSocketClient-588"><span class="linenos">588</span></a>                <span class="n">e_error</span><span class="p">:</span> <span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-589"><a href="#AgentWebSocketClient-589"><span class="linenos">589</span></a>                    <span class="s2">&quot;Exception in AgentWebSocketClient._keep_alive&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-590"><a href="#AgentWebSocketClient-590"><span class="linenos">590</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-591"><a href="#AgentWebSocketClient-591"><span class="linenos">591</span></a>                    <span class="s2">&quot;Exception&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-592"><a href="#AgentWebSocketClient-592"><span class="linenos">592</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-593"><a href="#AgentWebSocketClient-593"><span class="linenos">593</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-594"><a href="#AgentWebSocketClient-594"><span class="linenos">594</span></a>                    <span class="s2">&quot;Exception in AgentWebSocketClient._keep_alive: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-595"><a href="#AgentWebSocketClient-595"><span class="linenos">595</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-596"><a href="#AgentWebSocketClient-596"><span class="linenos">596</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient-597"><a href="#AgentWebSocketClient-597"><span class="linenos">597</span></a>                    <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
</span><span id="AgentWebSocketClient-598"><a href="#AgentWebSocketClient-598"><span class="linenos">598</span></a>                    <span class="n">error</span><span class="o">=</span><span class="n">e_error</span><span class="p">,</span>
</span><span id="AgentWebSocketClient-599"><a href="#AgentWebSocketClient-599"><span class="linenos">599</span></a>                    <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient-600"><a href="#AgentWebSocketClient-600"><span class="linenos">600</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient-601"><a href="#AgentWebSocketClient-601"><span class="linenos">601</span></a>
</span><span id="AgentWebSocketClient-602"><a href="#AgentWebSocketClient-602"><span class="linenos">602</span></a>                <span class="c1"># signal exit and close</span>
</span><span id="AgentWebSocketClient-603"><a href="#AgentWebSocketClient-603"><span class="linenos">603</span></a>                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_signal_exit</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-604"><a href="#AgentWebSocketClient-604"><span class="linenos">604</span></a>
</span><span id="AgentWebSocketClient-605"><a href="#AgentWebSocketClient-605"><span class="linenos">605</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient._keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-606"><a href="#AgentWebSocketClient-606"><span class="linenos">606</span></a>
</span><span id="AgentWebSocketClient-607"><a href="#AgentWebSocketClient-607"><span class="linenos">607</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;termination_exception&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-608"><a href="#AgentWebSocketClient-608"><span class="linenos">608</span></a>                    <span class="k">raise</span>
</span><span id="AgentWebSocketClient-609"><a href="#AgentWebSocketClient-609"><span class="linenos">609</span></a>                <span class="k">return</span>
</span><span id="AgentWebSocketClient-610"><a href="#AgentWebSocketClient-610"><span class="linenos">610</span></a>
</span><span id="AgentWebSocketClient-611"><a href="#AgentWebSocketClient-611"><span class="linenos">611</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">keep_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-612"><a href="#AgentWebSocketClient-612"><span class="linenos">612</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-613"><a href="#AgentWebSocketClient-613"><span class="linenos">613</span></a><span class="sd">        Sends a KeepAlive message</span>
</span><span id="AgentWebSocketClient-614"><a href="#AgentWebSocketClient-614"><span class="linenos">614</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-615"><a href="#AgentWebSocketClient-615"><span class="linenos">615</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.keep_alive ENTER&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-616"><a href="#AgentWebSocketClient-616"><span class="linenos">616</span></a>
</span><span id="AgentWebSocketClient-617"><a href="#AgentWebSocketClient-617"><span class="linenos">617</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;Sending KeepAlive...&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-618"><a href="#AgentWebSocketClient-618"><span class="linenos">618</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;KeepAlive&quot;</span><span class="p">}))</span>
</span><span id="AgentWebSocketClient-619"><a href="#AgentWebSocketClient-619"><span class="linenos">619</span></a>
</span><span id="AgentWebSocketClient-620"><a href="#AgentWebSocketClient-620"><span class="linenos">620</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">ret</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-621"><a href="#AgentWebSocketClient-621"><span class="linenos">621</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;keep_alive failed&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-622"><a href="#AgentWebSocketClient-622"><span class="linenos">622</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-623"><a href="#AgentWebSocketClient-623"><span class="linenos">623</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient-624"><a href="#AgentWebSocketClient-624"><span class="linenos">624</span></a>
</span><span id="AgentWebSocketClient-625"><a href="#AgentWebSocketClient-625"><span class="linenos">625</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keep_alive succeeded&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-626"><a href="#AgentWebSocketClient-626"><span class="linenos">626</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-627"><a href="#AgentWebSocketClient-627"><span class="linenos">627</span></a>
</span><span id="AgentWebSocketClient-628"><a href="#AgentWebSocketClient-628"><span class="linenos">628</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="AgentWebSocketClient-629"><a href="#AgentWebSocketClient-629"><span class="linenos">629</span></a>
</span><span id="AgentWebSocketClient-630"><a href="#AgentWebSocketClient-630"><span class="linenos">630</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_close_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-631"><a href="#AgentWebSocketClient-631"><span class="linenos">631</span></a>        <span class="c1"># TODO: No known API close message # pylint: disable=fixme</span>
</span><span id="AgentWebSocketClient-632"><a href="#AgentWebSocketClient-632"><span class="linenos">632</span></a>        <span class="c1"># return self.send(json.dumps({&quot;type&quot;: &quot;Close&quot;}))</span>
</span><span id="AgentWebSocketClient-633"><a href="#AgentWebSocketClient-633"><span class="linenos">633</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="AgentWebSocketClient-634"><a href="#AgentWebSocketClient-634"><span class="linenos">634</span></a>
</span><span id="AgentWebSocketClient-635"><a href="#AgentWebSocketClient-635"><span class="linenos">635</span></a>    <span class="c1"># closes the WebSocket connection gracefully</span>
</span><span id="AgentWebSocketClient-636"><a href="#AgentWebSocketClient-636"><span class="linenos">636</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">finish</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-637"><a href="#AgentWebSocketClient-637"><span class="linenos">637</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-638"><a href="#AgentWebSocketClient-638"><span class="linenos">638</span></a><span class="sd">        Closes the WebSocket connection gracefully.</span>
</span><span id="AgentWebSocketClient-639"><a href="#AgentWebSocketClient-639"><span class="linenos">639</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient-640"><a href="#AgentWebSocketClient-640"><span class="linenos">640</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.finish ENTER&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-641"><a href="#AgentWebSocketClient-641"><span class="linenos">641</span></a>
</span><span id="AgentWebSocketClient-642"><a href="#AgentWebSocketClient-642"><span class="linenos">642</span></a>        <span class="c1"># call parent finish</span>
</span><span id="AgentWebSocketClient-643"><a href="#AgentWebSocketClient-643"><span class="linenos">643</span></a>        <span class="k">if</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-644"><a href="#AgentWebSocketClient-644"><span class="linenos">644</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.finish failed&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-645"><a href="#AgentWebSocketClient-645"><span class="linenos">645</span></a>
</span><span id="AgentWebSocketClient-646"><a href="#AgentWebSocketClient-646"><span class="linenos">646</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-647"><a href="#AgentWebSocketClient-647"><span class="linenos">647</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-648"><a href="#AgentWebSocketClient-648"><span class="linenos">648</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient-649"><a href="#AgentWebSocketClient-649"><span class="linenos">649</span></a>
</span><span id="AgentWebSocketClient-650"><a href="#AgentWebSocketClient-650"><span class="linenos">650</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-651"><a href="#AgentWebSocketClient-651"><span class="linenos">651</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-652"><a href="#AgentWebSocketClient-652"><span class="linenos">652</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient-653"><a href="#AgentWebSocketClient-653"><span class="linenos">653</span></a>
</span><span id="AgentWebSocketClient-654"><a href="#AgentWebSocketClient-654"><span class="linenos">654</span></a>        <span class="c1"># debug the threads</span>
</span><span id="AgentWebSocketClient-655"><a href="#AgentWebSocketClient-655"><span class="linenos">655</span></a>        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AgentWebSocketClient-656"><a href="#AgentWebSocketClient-656"><span class="linenos">656</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;before running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-657"><a href="#AgentWebSocketClient-657"><span class="linenos">657</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AgentWebSocketClient-658"><a href="#AgentWebSocketClient-658"><span class="linenos">658</span></a>
</span><span id="AgentWebSocketClient-659"><a href="#AgentWebSocketClient-659"><span class="linenos">659</span></a>        <span class="c1"># stop the threads</span>
</span><span id="AgentWebSocketClient-660"><a href="#AgentWebSocketClient-660"><span class="linenos">660</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;cancelling tasks...&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-661"><a href="#AgentWebSocketClient-661"><span class="linenos">661</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-662"><a href="#AgentWebSocketClient-662"><span class="linenos">662</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-663"><a href="#AgentWebSocketClient-663"><span class="linenos">663</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-664"><a href="#AgentWebSocketClient-664"><span class="linenos">664</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;processing _keep_alive_thread thread joined&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-665"><a href="#AgentWebSocketClient-665"><span class="linenos">665</span></a>
</span><span id="AgentWebSocketClient-666"><a href="#AgentWebSocketClient-666"><span class="linenos">666</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listen_thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient-667"><a href="#AgentWebSocketClient-667"><span class="linenos">667</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_listen_thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="AgentWebSocketClient-668"><a href="#AgentWebSocketClient-668"><span class="linenos">668</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_listen_thread</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-669"><a href="#AgentWebSocketClient-669"><span class="linenos">669</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;listening thread joined&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-670"><a href="#AgentWebSocketClient-670"><span class="linenos">670</span></a>
</span><span id="AgentWebSocketClient-671"><a href="#AgentWebSocketClient-671"><span class="linenos">671</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-672"><a href="#AgentWebSocketClient-672"><span class="linenos">672</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient-673"><a href="#AgentWebSocketClient-673"><span class="linenos">673</span></a>
</span><span id="AgentWebSocketClient-674"><a href="#AgentWebSocketClient-674"><span class="linenos">674</span></a>        <span class="c1"># debug the threads</span>
</span><span id="AgentWebSocketClient-675"><a href="#AgentWebSocketClient-675"><span class="linenos">675</span></a>        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AgentWebSocketClient-676"><a href="#AgentWebSocketClient-676"><span class="linenos">676</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;before running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-677"><a href="#AgentWebSocketClient-677"><span class="linenos">677</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AgentWebSocketClient-678"><a href="#AgentWebSocketClient-678"><span class="linenos">678</span></a>
</span><span id="AgentWebSocketClient-679"><a href="#AgentWebSocketClient-679"><span class="linenos">679</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;finish succeeded&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-680"><a href="#AgentWebSocketClient-680"><span class="linenos">680</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.finish LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient-681"><a href="#AgentWebSocketClient-681"><span class="linenos">681</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Client for interacting with Deepgram's live transcription services over WebSockets.</p>

<p>This class provides methods to establish a WebSocket connection for live transcription and handle real-time transcription events.</p>

<p>Args:
     config (DeepgramClientOptions): all the options for the client.</p>
</div>


                            <div id="AgentWebSocketClient.__init__" class="classattr">
                                        <input id="AgentWebSocketClient.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AgentWebSocketClient</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">config</span><span class="p">:</span> <span class="n"><a href="../../options.html#DeepgramClientOptions">deepgram.options.DeepgramClientOptions</a></span></span>)</span>

                <label class="view-source-button" for="AgentWebSocketClient.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AgentWebSocketClient.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AgentWebSocketClient.__init__-91"><a href="#AgentWebSocketClient.__init__-91"><span class="linenos"> 91</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">DeepgramClientOptions</span><span class="p">):</span>
</span><span id="AgentWebSocketClient.__init__-92"><a href="#AgentWebSocketClient.__init__-92"><span class="linenos"> 92</span></a>        <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.__init__-93"><a href="#AgentWebSocketClient.__init__-93"><span class="linenos"> 93</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Config is required&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-94"><a href="#AgentWebSocketClient.__init__-94"><span class="linenos"> 94</span></a>
</span><span id="AgentWebSocketClient.__init__-95"><a href="#AgentWebSocketClient.__init__-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">verboselogs</span><span class="o">.</span><span class="n">VerboseLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-96"><a href="#AgentWebSocketClient.__init__-96"><span class="linenos"> 96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">())</span>
</span><span id="AgentWebSocketClient.__init__-97"><a href="#AgentWebSocketClient.__init__-97"><span class="linenos"> 97</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">verbose</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-98"><a href="#AgentWebSocketClient.__init__-98"><span class="linenos"> 98</span></a>
</span><span id="AgentWebSocketClient.__init__-99"><a href="#AgentWebSocketClient.__init__-99"><span class="linenos"> 99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
</span><span id="AgentWebSocketClient.__init__-100"><a href="#AgentWebSocketClient.__init__-100"><span class="linenos">100</span></a>
</span><span id="AgentWebSocketClient.__init__-101"><a href="#AgentWebSocketClient.__init__-101"><span class="linenos">101</span></a>        <span class="c1"># needs to be &quot;wss://agent.deepgram.com/agent&quot;</span>
</span><span id="AgentWebSocketClient.__init__-102"><a href="#AgentWebSocketClient.__init__-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span> <span class="o">=</span> <span class="s2">&quot;agent&quot;</span>
</span><span id="AgentWebSocketClient.__init__-103"><a href="#AgentWebSocketClient.__init__-103"><span class="linenos">103</span></a>
</span><span id="AgentWebSocketClient.__init__-104"><a href="#AgentWebSocketClient.__init__-104"><span class="linenos">104</span></a>        <span class="c1"># override the endpoint since it needs to be &quot;wss://agent.deepgram.com/agent&quot;</span>
</span><span id="AgentWebSocketClient.__init__-105"><a href="#AgentWebSocketClient.__init__-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;agent.deepgram.com&quot;</span>
</span><span id="AgentWebSocketClient.__init__-106"><a href="#AgentWebSocketClient.__init__-106"><span class="linenos">106</span></a>
</span><span id="AgentWebSocketClient.__init__-107"><a href="#AgentWebSocketClient.__init__-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient.__init__-108"><a href="#AgentWebSocketClient.__init__-108"><span class="linenos">108</span></a>
</span><span id="AgentWebSocketClient.__init__-109"><a href="#AgentWebSocketClient.__init__-109"><span class="linenos">109</span></a>        <span class="c1"># init handlers</span>
</span><span id="AgentWebSocketClient.__init__-110"><a href="#AgentWebSocketClient.__init__-110"><span class="linenos">110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_event_handlers</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AgentWebSocketClient.__init__-111"><a href="#AgentWebSocketClient.__init__-111"><span class="linenos">111</span></a>            <span class="n">event</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</span><span id="AgentWebSocketClient.__init__-112"><a href="#AgentWebSocketClient.__init__-112"><span class="linenos">112</span></a>        <span class="p">}</span>
</span><span id="AgentWebSocketClient.__init__-113"><a href="#AgentWebSocketClient.__init__-113"><span class="linenos">113</span></a>
</span><span id="AgentWebSocketClient.__init__-114"><a href="#AgentWebSocketClient.__init__-114"><span class="linenos">114</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.__init__-115"><a href="#AgentWebSocketClient.__init__-115"><span class="linenos">115</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;microphone_record is enabled&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-116"><a href="#AgentWebSocketClient.__init__-116"><span class="linenos">116</span></a>            <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record_rate&quot;</span><span class="p">,</span> <span class="n">MICROPHONE_RATE</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-117"><a href="#AgentWebSocketClient.__init__-117"><span class="linenos">117</span></a>            <span class="n">channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.__init__-118"><a href="#AgentWebSocketClient.__init__-118"><span class="linenos">118</span></a>                <span class="s2">&quot;microphone_record_channels&quot;</span><span class="p">,</span> <span class="n">MICROPHONE_CHANNELS</span>
</span><span id="AgentWebSocketClient.__init__-119"><a href="#AgentWebSocketClient.__init__-119"><span class="linenos">119</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-120"><a href="#AgentWebSocketClient.__init__-120"><span class="linenos">120</span></a>            <span class="n">device_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record_device_index&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-121"><a href="#AgentWebSocketClient.__init__-121"><span class="linenos">121</span></a>
</span><span id="AgentWebSocketClient.__init__-122"><a href="#AgentWebSocketClient.__init__-122"><span class="linenos">122</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;rate: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">rate</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-123"><a href="#AgentWebSocketClient.__init__-123"><span class="linenos">123</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;channels: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-124"><a href="#AgentWebSocketClient.__init__-124"><span class="linenos">124</span></a>
</span><span id="AgentWebSocketClient.__init__-125"><a href="#AgentWebSocketClient.__init__-125"><span class="linenos">125</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AgentWebSocketClient.__init__-126"><a href="#AgentWebSocketClient.__init__-126"><span class="linenos">126</span></a>
</span><span id="AgentWebSocketClient.__init__-127"><a href="#AgentWebSocketClient.__init__-127"><span class="linenos">127</span></a>            <span class="k">if</span> <span class="n">device_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.__init__-128"><a href="#AgentWebSocketClient.__init__-128"><span class="linenos">128</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;device_index: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">device_index</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-129"><a href="#AgentWebSocketClient.__init__-129"><span class="linenos">129</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="n">Microphone</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.__init__-130"><a href="#AgentWebSocketClient.__init__-130"><span class="linenos">130</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-131"><a href="#AgentWebSocketClient.__init__-131"><span class="linenos">131</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-132"><a href="#AgentWebSocketClient.__init__-132"><span class="linenos">132</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-133"><a href="#AgentWebSocketClient.__init__-133"><span class="linenos">133</span></a>                    <span class="n">input_device_index</span><span class="o">=</span><span class="n">device_index</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-134"><a href="#AgentWebSocketClient.__init__-134"><span class="linenos">134</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-135"><a href="#AgentWebSocketClient.__init__-135"><span class="linenos">135</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.__init__-136"><a href="#AgentWebSocketClient.__init__-136"><span class="linenos">136</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="n">Microphone</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.__init__-137"><a href="#AgentWebSocketClient.__init__-137"><span class="linenos">137</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-138"><a href="#AgentWebSocketClient.__init__-138"><span class="linenos">138</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-139"><a href="#AgentWebSocketClient.__init__-139"><span class="linenos">139</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-140"><a href="#AgentWebSocketClient.__init__-140"><span class="linenos">140</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-141"><a href="#AgentWebSocketClient.__init__-141"><span class="linenos">141</span></a>
</span><span id="AgentWebSocketClient.__init__-142"><a href="#AgentWebSocketClient.__init__-142"><span class="linenos">142</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.__init__-143"><a href="#AgentWebSocketClient.__init__-143"><span class="linenos">143</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;speaker_playback is enabled&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-144"><a href="#AgentWebSocketClient.__init__-144"><span class="linenos">144</span></a>            <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback_rate&quot;</span><span class="p">,</span> <span class="n">SPEAKER_RATE</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-145"><a href="#AgentWebSocketClient.__init__-145"><span class="linenos">145</span></a>            <span class="n">channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.__init__-146"><a href="#AgentWebSocketClient.__init__-146"><span class="linenos">146</span></a>                <span class="s2">&quot;speaker_playback_channels&quot;</span><span class="p">,</span> <span class="n">SPEAKER_CHANNELS</span>
</span><span id="AgentWebSocketClient.__init__-147"><a href="#AgentWebSocketClient.__init__-147"><span class="linenos">147</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-148"><a href="#AgentWebSocketClient.__init__-148"><span class="linenos">148</span></a>            <span class="n">playback_delta_in_ms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.__init__-149"><a href="#AgentWebSocketClient.__init__-149"><span class="linenos">149</span></a>                <span class="s2">&quot;speaker_playback_delta_in_ms&quot;</span><span class="p">,</span> <span class="n">SPEAKER_PLAYBACK_DELTA</span>
</span><span id="AgentWebSocketClient.__init__-150"><a href="#AgentWebSocketClient.__init__-150"><span class="linenos">150</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-151"><a href="#AgentWebSocketClient.__init__-151"><span class="linenos">151</span></a>            <span class="n">device_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback_device_index&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-152"><a href="#AgentWebSocketClient.__init__-152"><span class="linenos">152</span></a>
</span><span id="AgentWebSocketClient.__init__-153"><a href="#AgentWebSocketClient.__init__-153"><span class="linenos">153</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;rate: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">rate</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-154"><a href="#AgentWebSocketClient.__init__-154"><span class="linenos">154</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;channels: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-155"><a href="#AgentWebSocketClient.__init__-155"><span class="linenos">155</span></a>
</span><span id="AgentWebSocketClient.__init__-156"><a href="#AgentWebSocketClient.__init__-156"><span class="linenos">156</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AgentWebSocketClient.__init__-157"><a href="#AgentWebSocketClient.__init__-157"><span class="linenos">157</span></a>
</span><span id="AgentWebSocketClient.__init__-158"><a href="#AgentWebSocketClient.__init__-158"><span class="linenos">158</span></a>            <span class="k">if</span> <span class="n">device_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.__init__-159"><a href="#AgentWebSocketClient.__init__-159"><span class="linenos">159</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;device_index: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">device_index</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-160"><a href="#AgentWebSocketClient.__init__-160"><span class="linenos">160</span></a>
</span><span id="AgentWebSocketClient.__init__-161"><a href="#AgentWebSocketClient.__init__-161"><span class="linenos">161</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="n">Speaker</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.__init__-162"><a href="#AgentWebSocketClient.__init__-162"><span class="linenos">162</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-163"><a href="#AgentWebSocketClient.__init__-163"><span class="linenos">163</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-164"><a href="#AgentWebSocketClient.__init__-164"><span class="linenos">164</span></a>                    <span class="n">last_play_delta_in_ms</span><span class="o">=</span><span class="n">playback_delta_in_ms</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-165"><a href="#AgentWebSocketClient.__init__-165"><span class="linenos">165</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-166"><a href="#AgentWebSocketClient.__init__-166"><span class="linenos">166</span></a>                    <span class="n">output_device_index</span><span class="o">=</span><span class="n">device_index</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-167"><a href="#AgentWebSocketClient.__init__-167"><span class="linenos">167</span></a>                    <span class="n">microphone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-168"><a href="#AgentWebSocketClient.__init__-168"><span class="linenos">168</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-169"><a href="#AgentWebSocketClient.__init__-169"><span class="linenos">169</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.__init__-170"><a href="#AgentWebSocketClient.__init__-170"><span class="linenos">170</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="n">Speaker</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.__init__-171"><a href="#AgentWebSocketClient.__init__-171"><span class="linenos">171</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-172"><a href="#AgentWebSocketClient.__init__-172"><span class="linenos">172</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-173"><a href="#AgentWebSocketClient.__init__-173"><span class="linenos">173</span></a>                    <span class="n">last_play_delta_in_ms</span><span class="o">=</span><span class="n">playback_delta_in_ms</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-174"><a href="#AgentWebSocketClient.__init__-174"><span class="linenos">174</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-175"><a href="#AgentWebSocketClient.__init__-175"><span class="linenos">175</span></a>                    <span class="n">microphone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.__init__-176"><a href="#AgentWebSocketClient.__init__-176"><span class="linenos">176</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient.__init__-177"><a href="#AgentWebSocketClient.__init__-177"><span class="linenos">177</span></a>
</span><span id="AgentWebSocketClient.__init__-178"><a href="#AgentWebSocketClient.__init__-178"><span class="linenos">178</span></a>        <span class="c1"># call the parent constructor</span>
</span><span id="AgentWebSocketClient.__init__-179"><a href="#AgentWebSocketClient.__init__-179"><span class="linenos">179</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AgentWebSocketClient.start" class="classattr">
                                        <input id="AgentWebSocketClient.start-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">start</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#SettingsConfigurationOptions">SettingsConfigurationOptions</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">addons</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">members</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="AgentWebSocketClient.start-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AgentWebSocketClient.start"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AgentWebSocketClient.start-182"><a href="#AgentWebSocketClient.start-182"><span class="linenos">182</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.start-183"><a href="#AgentWebSocketClient.start-183"><span class="linenos">183</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-184"><a href="#AgentWebSocketClient.start-184"><span class="linenos">184</span></a>        <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SettingsConfigurationOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-185"><a href="#AgentWebSocketClient.start-185"><span class="linenos">185</span></a>        <span class="n">addons</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-186"><a href="#AgentWebSocketClient.start-186"><span class="linenos">186</span></a>        <span class="n">headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-187"><a href="#AgentWebSocketClient.start-187"><span class="linenos">187</span></a>        <span class="n">members</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-188"><a href="#AgentWebSocketClient.start-188"><span class="linenos">188</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-189"><a href="#AgentWebSocketClient.start-189"><span class="linenos">189</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-190"><a href="#AgentWebSocketClient.start-190"><span class="linenos">190</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient.start-191"><a href="#AgentWebSocketClient.start-191"><span class="linenos">191</span></a><span class="sd">        Starts the WebSocket connection for agent API.</span>
</span><span id="AgentWebSocketClient.start-192"><a href="#AgentWebSocketClient.start-192"><span class="linenos">192</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient.start-193"><a href="#AgentWebSocketClient.start-193"><span class="linenos">193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start ENTER&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-194"><a href="#AgentWebSocketClient.start-194"><span class="linenos">194</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;settings: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-195"><a href="#AgentWebSocketClient.start-195"><span class="linenos">195</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;addons: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">addons</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-196"><a href="#AgentWebSocketClient.start-196"><span class="linenos">196</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;headers: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-197"><a href="#AgentWebSocketClient.start-197"><span class="linenos">197</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;members: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">members</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-198"><a href="#AgentWebSocketClient.start-198"><span class="linenos">198</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;kwargs: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-199"><a href="#AgentWebSocketClient.start-199"><span class="linenos">199</span></a>
</span><span id="AgentWebSocketClient.start-200"><a href="#AgentWebSocketClient.start-200"><span class="linenos">200</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">SettingsConfigurationOptions</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">options</span><span class="o">.</span><span class="n">check</span><span class="p">():</span>
</span><span id="AgentWebSocketClient.start-201"><a href="#AgentWebSocketClient.start-201"><span class="linenos">201</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;settings.check failed&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-202"><a href="#AgentWebSocketClient.start-202"><span class="linenos">202</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-203"><a href="#AgentWebSocketClient.start-203"><span class="linenos">203</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Fatal agent settings error&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-204"><a href="#AgentWebSocketClient.start-204"><span class="linenos">204</span></a>
</span><span id="AgentWebSocketClient.start-205"><a href="#AgentWebSocketClient.start-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_addons</span> <span class="o">=</span> <span class="n">addons</span>
</span><span id="AgentWebSocketClient.start-206"><a href="#AgentWebSocketClient.start-206"><span class="linenos">206</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="n">headers</span>
</span><span id="AgentWebSocketClient.start-207"><a href="#AgentWebSocketClient.start-207"><span class="linenos">207</span></a>
</span><span id="AgentWebSocketClient.start-208"><a href="#AgentWebSocketClient.start-208"><span class="linenos">208</span></a>        <span class="c1"># add &quot;members&quot; as members of the class</span>
</span><span id="AgentWebSocketClient.start-209"><a href="#AgentWebSocketClient.start-209"><span class="linenos">209</span></a>        <span class="k">if</span> <span class="n">members</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-210"><a href="#AgentWebSocketClient.start-210"><span class="linenos">210</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">members</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-211"><a href="#AgentWebSocketClient.start-211"><span class="linenos">211</span></a>
</span><span id="AgentWebSocketClient.start-212"><a href="#AgentWebSocketClient.start-212"><span class="linenos">212</span></a>        <span class="c1"># set kwargs as members of the class</span>
</span><span id="AgentWebSocketClient.start-213"><a href="#AgentWebSocketClient.start-213"><span class="linenos">213</span></a>        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-214"><a href="#AgentWebSocketClient.start-214"><span class="linenos">214</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
</span><span id="AgentWebSocketClient.start-215"><a href="#AgentWebSocketClient.start-215"><span class="linenos">215</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-216"><a href="#AgentWebSocketClient.start-216"><span class="linenos">216</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="AgentWebSocketClient.start-217"><a href="#AgentWebSocketClient.start-217"><span class="linenos">217</span></a>
</span><span id="AgentWebSocketClient.start-218"><a href="#AgentWebSocketClient.start-218"><span class="linenos">218</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">SettingsConfigurationOptions</span><span class="p">):</span>
</span><span id="AgentWebSocketClient.start-219"><a href="#AgentWebSocketClient.start-219"><span class="linenos">219</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is class&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-220"><a href="#AgentWebSocketClient.start-220"><span class="linenos">220</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="AgentWebSocketClient.start-221"><a href="#AgentWebSocketClient.start-221"><span class="linenos">221</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="AgentWebSocketClient.start-222"><a href="#AgentWebSocketClient.start-222"><span class="linenos">222</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is dict&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-223"><a href="#AgentWebSocketClient.start-223"><span class="linenos">223</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">SettingsConfigurationOptions</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-224"><a href="#AgentWebSocketClient.start-224"><span class="linenos">224</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="AgentWebSocketClient.start-225"><a href="#AgentWebSocketClient.start-225"><span class="linenos">225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is json&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-226"><a href="#AgentWebSocketClient.start-226"><span class="linenos">226</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">SettingsConfigurationOptions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-227"><a href="#AgentWebSocketClient.start-227"><span class="linenos">227</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-228"><a href="#AgentWebSocketClient.start-228"><span class="linenos">228</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Invalid options type&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-229"><a href="#AgentWebSocketClient.start-229"><span class="linenos">229</span></a>
</span><span id="AgentWebSocketClient.start-230"><a href="#AgentWebSocketClient.start-230"><span class="linenos">230</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-231"><a href="#AgentWebSocketClient.start-231"><span class="linenos">231</span></a>            <span class="c1"># speaker substitutes the listening thread</span>
</span><span id="AgentWebSocketClient.start-232"><a href="#AgentWebSocketClient.start-232"><span class="linenos">232</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-233"><a href="#AgentWebSocketClient.start-233"><span class="linenos">233</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;passing speaker to delegate_listening&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-234"><a href="#AgentWebSocketClient.start-234"><span class="linenos">234</span></a>                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">delegate_listening</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-235"><a href="#AgentWebSocketClient.start-235"><span class="linenos">235</span></a>
</span><span id="AgentWebSocketClient.start-236"><a href="#AgentWebSocketClient.start-236"><span class="linenos">236</span></a>            <span class="c1"># call parent start</span>
</span><span id="AgentWebSocketClient.start-237"><a href="#AgentWebSocketClient.start-237"><span class="linenos">237</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="AgentWebSocketClient.start-238"><a href="#AgentWebSocketClient.start-238"><span class="linenos">238</span></a>                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.start-239"><a href="#AgentWebSocketClient.start-239"><span class="linenos">239</span></a>                    <span class="p">{},</span>
</span><span id="AgentWebSocketClient.start-240"><a href="#AgentWebSocketClient.start-240"><span class="linenos">240</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_addons</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-241"><a href="#AgentWebSocketClient.start-241"><span class="linenos">241</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-242"><a href="#AgentWebSocketClient.start-242"><span class="linenos">242</span></a>                    <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient.start-243"><a href="#AgentWebSocketClient.start-243"><span class="linenos">243</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient.start-244"><a href="#AgentWebSocketClient.start-244"><span class="linenos">244</span></a>                <span class="ow">is</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient.start-245"><a href="#AgentWebSocketClient.start-245"><span class="linenos">245</span></a>            <span class="p">):</span>
</span><span id="AgentWebSocketClient.start-246"><a href="#AgentWebSocketClient.start-246"><span class="linenos">246</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start failed&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-247"><a href="#AgentWebSocketClient.start-247"><span class="linenos">247</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-248"><a href="#AgentWebSocketClient.start-248"><span class="linenos">248</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient.start-249"><a href="#AgentWebSocketClient.start-249"><span class="linenos">249</span></a>
</span><span id="AgentWebSocketClient.start-250"><a href="#AgentWebSocketClient.start-250"><span class="linenos">250</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-251"><a href="#AgentWebSocketClient.start-251"><span class="linenos">251</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;speaker is delegate_listening. Starting speaker&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-252"><a href="#AgentWebSocketClient.start-252"><span class="linenos">252</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AgentWebSocketClient.start-253"><a href="#AgentWebSocketClient.start-253"><span class="linenos">253</span></a>
</span><span id="AgentWebSocketClient.start-254"><a href="#AgentWebSocketClient.start-254"><span class="linenos">254</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-255"><a href="#AgentWebSocketClient.start-255"><span class="linenos">255</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.start-256"><a href="#AgentWebSocketClient.start-256"><span class="linenos">256</span></a>                    <span class="s2">&quot;speaker is delegate_listening. Starting microphone&quot;</span>
</span><span id="AgentWebSocketClient.start-257"><a href="#AgentWebSocketClient.start-257"><span class="linenos">257</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient.start-258"><a href="#AgentWebSocketClient.start-258"><span class="linenos">258</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">set_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-259"><a href="#AgentWebSocketClient.start-259"><span class="linenos">259</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AgentWebSocketClient.start-260"><a href="#AgentWebSocketClient.start-260"><span class="linenos">260</span></a>
</span><span id="AgentWebSocketClient.start-261"><a href="#AgentWebSocketClient.start-261"><span class="linenos">261</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AgentWebSocketClient.start-262"><a href="#AgentWebSocketClient.start-262"><span class="linenos">262</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AgentWebSocketClient.start-263"><a href="#AgentWebSocketClient.start-263"><span class="linenos">263</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-264"><a href="#AgentWebSocketClient.start-264"><span class="linenos">264</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AgentWebSocketClient.start-265"><a href="#AgentWebSocketClient.start-265"><span class="linenos">265</span></a>
</span><span id="AgentWebSocketClient.start-266"><a href="#AgentWebSocketClient.start-266"><span class="linenos">266</span></a>            <span class="c1"># keepalive thread</span>
</span><span id="AgentWebSocketClient.start-267"><a href="#AgentWebSocketClient.start-267"><span class="linenos">267</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">is_keep_alive_enabled</span><span class="p">():</span>
</span><span id="AgentWebSocketClient.start-268"><a href="#AgentWebSocketClient.start-268"><span class="linenos">268</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keepalive is enabled&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-269"><a href="#AgentWebSocketClient.start-269"><span class="linenos">269</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-270"><a href="#AgentWebSocketClient.start-270"><span class="linenos">270</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AgentWebSocketClient.start-271"><a href="#AgentWebSocketClient.start-271"><span class="linenos">271</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-272"><a href="#AgentWebSocketClient.start-272"><span class="linenos">272</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keepalive is disabled&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-273"><a href="#AgentWebSocketClient.start-273"><span class="linenos">273</span></a>
</span><span id="AgentWebSocketClient.start-274"><a href="#AgentWebSocketClient.start-274"><span class="linenos">274</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AgentWebSocketClient.start-275"><a href="#AgentWebSocketClient.start-275"><span class="linenos">275</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AgentWebSocketClient.start-276"><a href="#AgentWebSocketClient.start-276"><span class="linenos">276</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-277"><a href="#AgentWebSocketClient.start-277"><span class="linenos">277</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AgentWebSocketClient.start-278"><a href="#AgentWebSocketClient.start-278"><span class="linenos">278</span></a>
</span><span id="AgentWebSocketClient.start-279"><a href="#AgentWebSocketClient.start-279"><span class="linenos">279</span></a>            <span class="c1"># send the configurationsetting message</span>
</span><span id="AgentWebSocketClient.start-280"><a href="#AgentWebSocketClient.start-280"><span class="linenos">280</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;Sending ConfigurationSettings...&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-281"><a href="#AgentWebSocketClient.start-281"><span class="linenos">281</span></a>            <span class="n">ret_send_cs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">))</span>
</span><span id="AgentWebSocketClient.start-282"><a href="#AgentWebSocketClient.start-282"><span class="linenos">282</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">ret_send_cs</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-283"><a href="#AgentWebSocketClient.start-283"><span class="linenos">283</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;ConfigurationSettings failed&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-284"><a href="#AgentWebSocketClient.start-284"><span class="linenos">284</span></a>
</span><span id="AgentWebSocketClient.start-285"><a href="#AgentWebSocketClient.start-285"><span class="linenos">285</span></a>                <span class="n">err_error</span><span class="p">:</span> <span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.start-286"><a href="#AgentWebSocketClient.start-286"><span class="linenos">286</span></a>                    <span class="s2">&quot;Exception in AgentWebSocketClient.start&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-287"><a href="#AgentWebSocketClient.start-287"><span class="linenos">287</span></a>                    <span class="s2">&quot;ConfigurationSettings failed to send&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-288"><a href="#AgentWebSocketClient.start-288"><span class="linenos">288</span></a>                    <span class="s2">&quot;Exception&quot;</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-289"><a href="#AgentWebSocketClient.start-289"><span class="linenos">289</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient.start-290"><a href="#AgentWebSocketClient.start-290"><span class="linenos">290</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.start-291"><a href="#AgentWebSocketClient.start-291"><span class="linenos">291</span></a>                    <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
</span><span id="AgentWebSocketClient.start-292"><a href="#AgentWebSocketClient.start-292"><span class="linenos">292</span></a>                    <span class="n">error</span><span class="o">=</span><span class="n">err_error</span><span class="p">,</span>
</span><span id="AgentWebSocketClient.start-293"><a href="#AgentWebSocketClient.start-293"><span class="linenos">293</span></a>                    <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AgentWebSocketClient.start-294"><a href="#AgentWebSocketClient.start-294"><span class="linenos">294</span></a>                <span class="p">)</span>
</span><span id="AgentWebSocketClient.start-295"><a href="#AgentWebSocketClient.start-295"><span class="linenos">295</span></a>
</span><span id="AgentWebSocketClient.start-296"><a href="#AgentWebSocketClient.start-296"><span class="linenos">296</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-297"><a href="#AgentWebSocketClient.start-297"><span class="linenos">297</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient.start-298"><a href="#AgentWebSocketClient.start-298"><span class="linenos">298</span></a>
</span><span id="AgentWebSocketClient.start-299"><a href="#AgentWebSocketClient.start-299"><span class="linenos">299</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;start succeeded&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-300"><a href="#AgentWebSocketClient.start-300"><span class="linenos">300</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-301"><a href="#AgentWebSocketClient.start-301"><span class="linenos">301</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="AgentWebSocketClient.start-302"><a href="#AgentWebSocketClient.start-302"><span class="linenos">302</span></a>
</span><span id="AgentWebSocketClient.start-303"><a href="#AgentWebSocketClient.start-303"><span class="linenos">303</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
</span><span id="AgentWebSocketClient.start-304"><a href="#AgentWebSocketClient.start-304"><span class="linenos">304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="AgentWebSocketClient.start-305"><a href="#AgentWebSocketClient.start-305"><span class="linenos">305</span></a>                <span class="s2">&quot;WebSocketException in AgentWebSocketClient.start: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span>
</span><span id="AgentWebSocketClient.start-306"><a href="#AgentWebSocketClient.start-306"><span class="linenos">306</span></a>            <span class="p">)</span>
</span><span id="AgentWebSocketClient.start-307"><a href="#AgentWebSocketClient.start-307"><span class="linenos">307</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.start-308"><a href="#AgentWebSocketClient.start-308"><span class="linenos">308</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;termination_exception_connect&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.start-309"><a href="#AgentWebSocketClient.start-309"><span class="linenos">309</span></a>                <span class="k">raise</span> <span class="n">e</span>
</span><span id="AgentWebSocketClient.start-310"><a href="#AgentWebSocketClient.start-310"><span class="linenos">310</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Starts the WebSocket connection for agent API.</p>
</div>


                            </div>
                            <div id="AgentWebSocketClient.on" class="classattr">
                                        <input id="AgentWebSocketClient.on-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">event</span><span class="p">:</span> <span class="n"><a href="enums.html#AgentWebSocketEvents">deepgram.clients.agent.enums.AgentWebSocketEvents</a></span>,</span><span class="param">	<span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="AgentWebSocketClient.on-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AgentWebSocketClient.on"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AgentWebSocketClient.on-314"><a href="#AgentWebSocketClient.on-314"><span class="linenos">314</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">AgentWebSocketEvents</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.on-315"><a href="#AgentWebSocketClient.on-315"><span class="linenos">315</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient.on-316"><a href="#AgentWebSocketClient.on-316"><span class="linenos">316</span></a><span class="sd">        Registers event handlers for specific events.</span>
</span><span id="AgentWebSocketClient.on-317"><a href="#AgentWebSocketClient.on-317"><span class="linenos">317</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient.on-318"><a href="#AgentWebSocketClient.on-318"><span class="linenos">318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;event subscribed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.on-319"><a href="#AgentWebSocketClient.on-319"><span class="linenos">319</span></a>        <span class="k">if</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">callable</span><span class="p">(</span><span class="n">handler</span><span class="p">):</span>
</span><span id="AgentWebSocketClient.on-320"><a href="#AgentWebSocketClient.on-320"><span class="linenos">320</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_event_handlers</span><span class="p">[</span><span class="n">event</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Registers event handlers for specific events.</p>
</div>


                            </div>
                            <div id="AgentWebSocketClient.keep_alive" class="classattr">
                                        <input id="AgentWebSocketClient.keep_alive-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">keep_alive</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="AgentWebSocketClient.keep_alive-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AgentWebSocketClient.keep_alive"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AgentWebSocketClient.keep_alive-611"><a href="#AgentWebSocketClient.keep_alive-611"><span class="linenos">611</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">keep_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.keep_alive-612"><a href="#AgentWebSocketClient.keep_alive-612"><span class="linenos">612</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient.keep_alive-613"><a href="#AgentWebSocketClient.keep_alive-613"><span class="linenos">613</span></a><span class="sd">        Sends a KeepAlive message</span>
</span><span id="AgentWebSocketClient.keep_alive-614"><a href="#AgentWebSocketClient.keep_alive-614"><span class="linenos">614</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient.keep_alive-615"><a href="#AgentWebSocketClient.keep_alive-615"><span class="linenos">615</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.keep_alive ENTER&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.keep_alive-616"><a href="#AgentWebSocketClient.keep_alive-616"><span class="linenos">616</span></a>
</span><span id="AgentWebSocketClient.keep_alive-617"><a href="#AgentWebSocketClient.keep_alive-617"><span class="linenos">617</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;Sending KeepAlive...&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.keep_alive-618"><a href="#AgentWebSocketClient.keep_alive-618"><span class="linenos">618</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;KeepAlive&quot;</span><span class="p">}))</span>
</span><span id="AgentWebSocketClient.keep_alive-619"><a href="#AgentWebSocketClient.keep_alive-619"><span class="linenos">619</span></a>
</span><span id="AgentWebSocketClient.keep_alive-620"><a href="#AgentWebSocketClient.keep_alive-620"><span class="linenos">620</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">ret</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.keep_alive-621"><a href="#AgentWebSocketClient.keep_alive-621"><span class="linenos">621</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;keep_alive failed&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.keep_alive-622"><a href="#AgentWebSocketClient.keep_alive-622"><span class="linenos">622</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.keep_alive-623"><a href="#AgentWebSocketClient.keep_alive-623"><span class="linenos">623</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient.keep_alive-624"><a href="#AgentWebSocketClient.keep_alive-624"><span class="linenos">624</span></a>
</span><span id="AgentWebSocketClient.keep_alive-625"><a href="#AgentWebSocketClient.keep_alive-625"><span class="linenos">625</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keep_alive succeeded&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.keep_alive-626"><a href="#AgentWebSocketClient.keep_alive-626"><span class="linenos">626</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.keep_alive-627"><a href="#AgentWebSocketClient.keep_alive-627"><span class="linenos">627</span></a>
</span><span id="AgentWebSocketClient.keep_alive-628"><a href="#AgentWebSocketClient.keep_alive-628"><span class="linenos">628</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Sends a KeepAlive message</p>
</div>


                            </div>
                            <div id="AgentWebSocketClient.finish" class="classattr">
                                        <input id="AgentWebSocketClient.finish-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">finish</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="AgentWebSocketClient.finish-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AgentWebSocketClient.finish"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AgentWebSocketClient.finish-636"><a href="#AgentWebSocketClient.finish-636"><span class="linenos">636</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">finish</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.finish-637"><a href="#AgentWebSocketClient.finish-637"><span class="linenos">637</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient.finish-638"><a href="#AgentWebSocketClient.finish-638"><span class="linenos">638</span></a><span class="sd">        Closes the WebSocket connection gracefully.</span>
</span><span id="AgentWebSocketClient.finish-639"><a href="#AgentWebSocketClient.finish-639"><span class="linenos">639</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AgentWebSocketClient.finish-640"><a href="#AgentWebSocketClient.finish-640"><span class="linenos">640</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.finish ENTER&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.finish-641"><a href="#AgentWebSocketClient.finish-641"><span class="linenos">641</span></a>
</span><span id="AgentWebSocketClient.finish-642"><a href="#AgentWebSocketClient.finish-642"><span class="linenos">642</span></a>        <span class="c1"># call parent finish</span>
</span><span id="AgentWebSocketClient.finish-643"><a href="#AgentWebSocketClient.finish-643"><span class="linenos">643</span></a>        <span class="k">if</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.finish-644"><a href="#AgentWebSocketClient.finish-644"><span class="linenos">644</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.finish failed&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.finish-645"><a href="#AgentWebSocketClient.finish-645"><span class="linenos">645</span></a>
</span><span id="AgentWebSocketClient.finish-646"><a href="#AgentWebSocketClient.finish-646"><span class="linenos">646</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.finish-647"><a href="#AgentWebSocketClient.finish-647"><span class="linenos">647</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="AgentWebSocketClient.finish-648"><a href="#AgentWebSocketClient.finish-648"><span class="linenos">648</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient.finish-649"><a href="#AgentWebSocketClient.finish-649"><span class="linenos">649</span></a>
</span><span id="AgentWebSocketClient.finish-650"><a href="#AgentWebSocketClient.finish-650"><span class="linenos">650</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.finish-651"><a href="#AgentWebSocketClient.finish-651"><span class="linenos">651</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="AgentWebSocketClient.finish-652"><a href="#AgentWebSocketClient.finish-652"><span class="linenos">652</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AgentWebSocketClient.finish-653"><a href="#AgentWebSocketClient.finish-653"><span class="linenos">653</span></a>
</span><span id="AgentWebSocketClient.finish-654"><a href="#AgentWebSocketClient.finish-654"><span class="linenos">654</span></a>        <span class="c1"># debug the threads</span>
</span><span id="AgentWebSocketClient.finish-655"><a href="#AgentWebSocketClient.finish-655"><span class="linenos">655</span></a>        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AgentWebSocketClient.finish-656"><a href="#AgentWebSocketClient.finish-656"><span class="linenos">656</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;before running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.finish-657"><a href="#AgentWebSocketClient.finish-657"><span class="linenos">657</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AgentWebSocketClient.finish-658"><a href="#AgentWebSocketClient.finish-658"><span class="linenos">658</span></a>
</span><span id="AgentWebSocketClient.finish-659"><a href="#AgentWebSocketClient.finish-659"><span class="linenos">659</span></a>        <span class="c1"># stop the threads</span>
</span><span id="AgentWebSocketClient.finish-660"><a href="#AgentWebSocketClient.finish-660"><span class="linenos">660</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;cancelling tasks...&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.finish-661"><a href="#AgentWebSocketClient.finish-661"><span class="linenos">661</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.finish-662"><a href="#AgentWebSocketClient.finish-662"><span class="linenos">662</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="AgentWebSocketClient.finish-663"><a href="#AgentWebSocketClient.finish-663"><span class="linenos">663</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient.finish-664"><a href="#AgentWebSocketClient.finish-664"><span class="linenos">664</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;processing _keep_alive_thread thread joined&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.finish-665"><a href="#AgentWebSocketClient.finish-665"><span class="linenos">665</span></a>
</span><span id="AgentWebSocketClient.finish-666"><a href="#AgentWebSocketClient.finish-666"><span class="linenos">666</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listen_thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AgentWebSocketClient.finish-667"><a href="#AgentWebSocketClient.finish-667"><span class="linenos">667</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_listen_thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="AgentWebSocketClient.finish-668"><a href="#AgentWebSocketClient.finish-668"><span class="linenos">668</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_listen_thread</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient.finish-669"><a href="#AgentWebSocketClient.finish-669"><span class="linenos">669</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;listening thread joined&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.finish-670"><a href="#AgentWebSocketClient.finish-670"><span class="linenos">670</span></a>
</span><span id="AgentWebSocketClient.finish-671"><a href="#AgentWebSocketClient.finish-671"><span class="linenos">671</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient.finish-672"><a href="#AgentWebSocketClient.finish-672"><span class="linenos">672</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AgentWebSocketClient.finish-673"><a href="#AgentWebSocketClient.finish-673"><span class="linenos">673</span></a>
</span><span id="AgentWebSocketClient.finish-674"><a href="#AgentWebSocketClient.finish-674"><span class="linenos">674</span></a>        <span class="c1"># debug the threads</span>
</span><span id="AgentWebSocketClient.finish-675"><a href="#AgentWebSocketClient.finish-675"><span class="linenos">675</span></a>        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AgentWebSocketClient.finish-676"><a href="#AgentWebSocketClient.finish-676"><span class="linenos">676</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;before running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.finish-677"><a href="#AgentWebSocketClient.finish-677"><span class="linenos">677</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AgentWebSocketClient.finish-678"><a href="#AgentWebSocketClient.finish-678"><span class="linenos">678</span></a>
</span><span id="AgentWebSocketClient.finish-679"><a href="#AgentWebSocketClient.finish-679"><span class="linenos">679</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;finish succeeded&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.finish-680"><a href="#AgentWebSocketClient.finish-680"><span class="linenos">680</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.finish LEAVE&quot;</span><span class="p">)</span>
</span><span id="AgentWebSocketClient.finish-681"><a href="#AgentWebSocketClient.finish-681"><span class="linenos">681</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Closes the WebSocket connection gracefully.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/abstract_sync_websocket.html#AbstractSyncWebSocketClient">deepgram.clients.common.v1.abstract_sync_websocket.AbstractSyncWebSocketClient</a></dt>
                                <dd id="AgentWebSocketClient.delegate_listening" class="function"><a href="../common/v1/abstract_sync_websocket.html#AbstractSyncWebSocketClient.delegate_listening">delegate_listening</a></dd>
                <dd id="AgentWebSocketClient.is_connected" class="function"><a href="../common/v1/abstract_sync_websocket.html#AbstractSyncWebSocketClient.is_connected">is_connected</a></dd>
                <dd id="AgentWebSocketClient.send" class="function"><a href="../common/v1/abstract_sync_websocket.html#AbstractSyncWebSocketClient.send">send</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="AsyncAgentWebSocketClient">
                            <input id="AsyncAgentWebSocketClient-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AsyncAgentWebSocketClient</span><wbr>(<span class="base"><a href="../common/v1/abstract_async_websocket.html#AbstractAsyncWebSocketClient">deepgram.clients.common.v1.abstract_async_websocket.AbstractAsyncWebSocketClient</a></span>):

                <label class="view-source-button" for="AsyncAgentWebSocketClient-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AsyncAgentWebSocketClient"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AsyncAgentWebSocketClient-60"><a href="#AsyncAgentWebSocketClient-60"><span class="linenos"> 60</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AsyncAgentWebSocketClient</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-61"><a href="#AsyncAgentWebSocketClient-61"><span class="linenos"> 61</span></a>    <span class="n">AbstractAsyncWebSocketClient</span>
</span><span id="AsyncAgentWebSocketClient-62"><a href="#AsyncAgentWebSocketClient-62"><span class="linenos"> 62</span></a><span class="p">):</span>  <span class="c1"># pylint: disable=too-many-instance-attributes</span>
</span><span id="AsyncAgentWebSocketClient-63"><a href="#AsyncAgentWebSocketClient-63"><span class="linenos"> 63</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-64"><a href="#AsyncAgentWebSocketClient-64"><span class="linenos"> 64</span></a><span class="sd">    Client for interacting with Deepgram&#39;s live transcription services over WebSockets.</span>
</span><span id="AsyncAgentWebSocketClient-65"><a href="#AsyncAgentWebSocketClient-65"><span class="linenos"> 65</span></a>
</span><span id="AsyncAgentWebSocketClient-66"><a href="#AsyncAgentWebSocketClient-66"><span class="linenos"> 66</span></a><span class="sd">     This class provides methods to establish a WebSocket connection for live transcription and handle real-time transcription events.</span>
</span><span id="AsyncAgentWebSocketClient-67"><a href="#AsyncAgentWebSocketClient-67"><span class="linenos"> 67</span></a>
</span><span id="AsyncAgentWebSocketClient-68"><a href="#AsyncAgentWebSocketClient-68"><span class="linenos"> 68</span></a><span class="sd">     Args:</span>
</span><span id="AsyncAgentWebSocketClient-69"><a href="#AsyncAgentWebSocketClient-69"><span class="linenos"> 69</span></a><span class="sd">         config (DeepgramClientOptions): all the options for the client.</span>
</span><span id="AsyncAgentWebSocketClient-70"><a href="#AsyncAgentWebSocketClient-70"><span class="linenos"> 70</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-71"><a href="#AsyncAgentWebSocketClient-71"><span class="linenos"> 71</span></a>
</span><span id="AsyncAgentWebSocketClient-72"><a href="#AsyncAgentWebSocketClient-72"><span class="linenos"> 72</span></a>    <span class="n">_logger</span><span class="p">:</span> <span class="n">verboselogs</span><span class="o">.</span><span class="n">VerboseLogger</span>
</span><span id="AsyncAgentWebSocketClient-73"><a href="#AsyncAgentWebSocketClient-73"><span class="linenos"> 73</span></a>    <span class="n">_config</span><span class="p">:</span> <span class="n">DeepgramClientOptions</span>
</span><span id="AsyncAgentWebSocketClient-74"><a href="#AsyncAgentWebSocketClient-74"><span class="linenos"> 74</span></a>    <span class="n">_endpoint</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="AsyncAgentWebSocketClient-75"><a href="#AsyncAgentWebSocketClient-75"><span class="linenos"> 75</span></a>
</span><span id="AsyncAgentWebSocketClient-76"><a href="#AsyncAgentWebSocketClient-76"><span class="linenos"> 76</span></a>    <span class="n">_event_handlers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">AgentWebSocketEvents</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span>
</span><span id="AsyncAgentWebSocketClient-77"><a href="#AsyncAgentWebSocketClient-77"><span class="linenos"> 77</span></a>
</span><span id="AsyncAgentWebSocketClient-78"><a href="#AsyncAgentWebSocketClient-78"><span class="linenos"> 78</span></a>    <span class="n">_keep_alive_thread</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="AsyncAgentWebSocketClient-79"><a href="#AsyncAgentWebSocketClient-79"><span class="linenos"> 79</span></a>
</span><span id="AsyncAgentWebSocketClient-80"><a href="#AsyncAgentWebSocketClient-80"><span class="linenos"> 80</span></a>    <span class="n">_kwargs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient-81"><a href="#AsyncAgentWebSocketClient-81"><span class="linenos"> 81</span></a>    <span class="n">_addons</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient-82"><a href="#AsyncAgentWebSocketClient-82"><span class="linenos"> 82</span></a>    <span class="c1"># note the distinction here. We can&#39;t use _config because it&#39;s already used in the parent</span>
</span><span id="AsyncAgentWebSocketClient-83"><a href="#AsyncAgentWebSocketClient-83"><span class="linenos"> 83</span></a>    <span class="n">_settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SettingsConfigurationOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient-84"><a href="#AsyncAgentWebSocketClient-84"><span class="linenos"> 84</span></a>    <span class="n">_headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient-85"><a href="#AsyncAgentWebSocketClient-85"><span class="linenos"> 85</span></a>
</span><span id="AsyncAgentWebSocketClient-86"><a href="#AsyncAgentWebSocketClient-86"><span class="linenos"> 86</span></a>    <span class="n">_speaker_created</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient-87"><a href="#AsyncAgentWebSocketClient-87"><span class="linenos"> 87</span></a>    <span class="n">_speaker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Speaker</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient-88"><a href="#AsyncAgentWebSocketClient-88"><span class="linenos"> 88</span></a>    <span class="n">_microphone_created</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient-89"><a href="#AsyncAgentWebSocketClient-89"><span class="linenos"> 89</span></a>    <span class="n">_microphone</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Microphone</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient-90"><a href="#AsyncAgentWebSocketClient-90"><span class="linenos"> 90</span></a>
</span><span id="AsyncAgentWebSocketClient-91"><a href="#AsyncAgentWebSocketClient-91"><span class="linenos"> 91</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">DeepgramClientOptions</span><span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient-92"><a href="#AsyncAgentWebSocketClient-92"><span class="linenos"> 92</span></a>        <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-93"><a href="#AsyncAgentWebSocketClient-93"><span class="linenos"> 93</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Config is required&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-94"><a href="#AsyncAgentWebSocketClient-94"><span class="linenos"> 94</span></a>
</span><span id="AsyncAgentWebSocketClient-95"><a href="#AsyncAgentWebSocketClient-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">verboselogs</span><span class="o">.</span><span class="n">VerboseLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-96"><a href="#AsyncAgentWebSocketClient-96"><span class="linenos"> 96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient-97"><a href="#AsyncAgentWebSocketClient-97"><span class="linenos"> 97</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">verbose</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-98"><a href="#AsyncAgentWebSocketClient-98"><span class="linenos"> 98</span></a>
</span><span id="AsyncAgentWebSocketClient-99"><a href="#AsyncAgentWebSocketClient-99"><span class="linenos"> 99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
</span><span id="AsyncAgentWebSocketClient-100"><a href="#AsyncAgentWebSocketClient-100"><span class="linenos">100</span></a>
</span><span id="AsyncAgentWebSocketClient-101"><a href="#AsyncAgentWebSocketClient-101"><span class="linenos">101</span></a>        <span class="c1"># needs to be &quot;wss://agent.deepgram.com/agent&quot;</span>
</span><span id="AsyncAgentWebSocketClient-102"><a href="#AsyncAgentWebSocketClient-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span> <span class="o">=</span> <span class="s2">&quot;agent&quot;</span>
</span><span id="AsyncAgentWebSocketClient-103"><a href="#AsyncAgentWebSocketClient-103"><span class="linenos">103</span></a>
</span><span id="AsyncAgentWebSocketClient-104"><a href="#AsyncAgentWebSocketClient-104"><span class="linenos">104</span></a>        <span class="c1"># override the endpoint since it needs to be &quot;wss://agent.deepgram.com/agent&quot;</span>
</span><span id="AsyncAgentWebSocketClient-105"><a href="#AsyncAgentWebSocketClient-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;agent.deepgram.com&quot;</span>
</span><span id="AsyncAgentWebSocketClient-106"><a href="#AsyncAgentWebSocketClient-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient-107"><a href="#AsyncAgentWebSocketClient-107"><span class="linenos">107</span></a>
</span><span id="AsyncAgentWebSocketClient-108"><a href="#AsyncAgentWebSocketClient-108"><span class="linenos">108</span></a>        <span class="c1"># init handlers</span>
</span><span id="AsyncAgentWebSocketClient-109"><a href="#AsyncAgentWebSocketClient-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_event_handlers</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AsyncAgentWebSocketClient-110"><a href="#AsyncAgentWebSocketClient-110"><span class="linenos">110</span></a>            <span class="n">event</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient-111"><a href="#AsyncAgentWebSocketClient-111"><span class="linenos">111</span></a>        <span class="p">}</span>
</span><span id="AsyncAgentWebSocketClient-112"><a href="#AsyncAgentWebSocketClient-112"><span class="linenos">112</span></a>
</span><span id="AsyncAgentWebSocketClient-113"><a href="#AsyncAgentWebSocketClient-113"><span class="linenos">113</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-114"><a href="#AsyncAgentWebSocketClient-114"><span class="linenos">114</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;microphone_record is enabled&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-115"><a href="#AsyncAgentWebSocketClient-115"><span class="linenos">115</span></a>            <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record_rate&quot;</span><span class="p">,</span> <span class="n">MICROPHONE_RATE</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-116"><a href="#AsyncAgentWebSocketClient-116"><span class="linenos">116</span></a>            <span class="n">channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-117"><a href="#AsyncAgentWebSocketClient-117"><span class="linenos">117</span></a>                <span class="s2">&quot;microphone_record_channels&quot;</span><span class="p">,</span> <span class="n">MICROPHONE_CHANNELS</span>
</span><span id="AsyncAgentWebSocketClient-118"><a href="#AsyncAgentWebSocketClient-118"><span class="linenos">118</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-119"><a href="#AsyncAgentWebSocketClient-119"><span class="linenos">119</span></a>            <span class="n">device_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record_device_index&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-120"><a href="#AsyncAgentWebSocketClient-120"><span class="linenos">120</span></a>
</span><span id="AsyncAgentWebSocketClient-121"><a href="#AsyncAgentWebSocketClient-121"><span class="linenos">121</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;rate: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">rate</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-122"><a href="#AsyncAgentWebSocketClient-122"><span class="linenos">122</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;channels: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-123"><a href="#AsyncAgentWebSocketClient-123"><span class="linenos">123</span></a>            <span class="k">if</span> <span class="n">device_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-124"><a href="#AsyncAgentWebSocketClient-124"><span class="linenos">124</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;device_index: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">device_index</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-125"><a href="#AsyncAgentWebSocketClient-125"><span class="linenos">125</span></a>
</span><span id="AsyncAgentWebSocketClient-126"><a href="#AsyncAgentWebSocketClient-126"><span class="linenos">126</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AsyncAgentWebSocketClient-127"><a href="#AsyncAgentWebSocketClient-127"><span class="linenos">127</span></a>
</span><span id="AsyncAgentWebSocketClient-128"><a href="#AsyncAgentWebSocketClient-128"><span class="linenos">128</span></a>            <span class="k">if</span> <span class="n">device_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-129"><a href="#AsyncAgentWebSocketClient-129"><span class="linenos">129</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="n">Microphone</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-130"><a href="#AsyncAgentWebSocketClient-130"><span class="linenos">130</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-131"><a href="#AsyncAgentWebSocketClient-131"><span class="linenos">131</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-132"><a href="#AsyncAgentWebSocketClient-132"><span class="linenos">132</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-133"><a href="#AsyncAgentWebSocketClient-133"><span class="linenos">133</span></a>                    <span class="n">input_device_index</span><span class="o">=</span><span class="n">device_index</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-134"><a href="#AsyncAgentWebSocketClient-134"><span class="linenos">134</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-135"><a href="#AsyncAgentWebSocketClient-135"><span class="linenos">135</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-136"><a href="#AsyncAgentWebSocketClient-136"><span class="linenos">136</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="n">Microphone</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-137"><a href="#AsyncAgentWebSocketClient-137"><span class="linenos">137</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-138"><a href="#AsyncAgentWebSocketClient-138"><span class="linenos">138</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-139"><a href="#AsyncAgentWebSocketClient-139"><span class="linenos">139</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-140"><a href="#AsyncAgentWebSocketClient-140"><span class="linenos">140</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-141"><a href="#AsyncAgentWebSocketClient-141"><span class="linenos">141</span></a>
</span><span id="AsyncAgentWebSocketClient-142"><a href="#AsyncAgentWebSocketClient-142"><span class="linenos">142</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-143"><a href="#AsyncAgentWebSocketClient-143"><span class="linenos">143</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;speaker_playback is enabled&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-144"><a href="#AsyncAgentWebSocketClient-144"><span class="linenos">144</span></a>            <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback_rate&quot;</span><span class="p">,</span> <span class="n">SPEAKER_RATE</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-145"><a href="#AsyncAgentWebSocketClient-145"><span class="linenos">145</span></a>            <span class="n">channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-146"><a href="#AsyncAgentWebSocketClient-146"><span class="linenos">146</span></a>                <span class="s2">&quot;speaker_playback_channels&quot;</span><span class="p">,</span> <span class="n">SPEAKER_CHANNELS</span>
</span><span id="AsyncAgentWebSocketClient-147"><a href="#AsyncAgentWebSocketClient-147"><span class="linenos">147</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-148"><a href="#AsyncAgentWebSocketClient-148"><span class="linenos">148</span></a>            <span class="n">playback_delta_in_ms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-149"><a href="#AsyncAgentWebSocketClient-149"><span class="linenos">149</span></a>                <span class="s2">&quot;speaker_playback_delta_in_ms&quot;</span><span class="p">,</span> <span class="n">SPEAKER_PLAYBACK_DELTA</span>
</span><span id="AsyncAgentWebSocketClient-150"><a href="#AsyncAgentWebSocketClient-150"><span class="linenos">150</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-151"><a href="#AsyncAgentWebSocketClient-151"><span class="linenos">151</span></a>            <span class="n">device_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback_device_index&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-152"><a href="#AsyncAgentWebSocketClient-152"><span class="linenos">152</span></a>
</span><span id="AsyncAgentWebSocketClient-153"><a href="#AsyncAgentWebSocketClient-153"><span class="linenos">153</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;rate: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">rate</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-154"><a href="#AsyncAgentWebSocketClient-154"><span class="linenos">154</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;channels: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-155"><a href="#AsyncAgentWebSocketClient-155"><span class="linenos">155</span></a>
</span><span id="AsyncAgentWebSocketClient-156"><a href="#AsyncAgentWebSocketClient-156"><span class="linenos">156</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AsyncAgentWebSocketClient-157"><a href="#AsyncAgentWebSocketClient-157"><span class="linenos">157</span></a>
</span><span id="AsyncAgentWebSocketClient-158"><a href="#AsyncAgentWebSocketClient-158"><span class="linenos">158</span></a>            <span class="k">if</span> <span class="n">device_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-159"><a href="#AsyncAgentWebSocketClient-159"><span class="linenos">159</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;device_index: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">device_index</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-160"><a href="#AsyncAgentWebSocketClient-160"><span class="linenos">160</span></a>
</span><span id="AsyncAgentWebSocketClient-161"><a href="#AsyncAgentWebSocketClient-161"><span class="linenos">161</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="n">Speaker</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-162"><a href="#AsyncAgentWebSocketClient-162"><span class="linenos">162</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-163"><a href="#AsyncAgentWebSocketClient-163"><span class="linenos">163</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-164"><a href="#AsyncAgentWebSocketClient-164"><span class="linenos">164</span></a>                    <span class="n">last_play_delta_in_ms</span><span class="o">=</span><span class="n">playback_delta_in_ms</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-165"><a href="#AsyncAgentWebSocketClient-165"><span class="linenos">165</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-166"><a href="#AsyncAgentWebSocketClient-166"><span class="linenos">166</span></a>                    <span class="n">output_device_index</span><span class="o">=</span><span class="n">device_index</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-167"><a href="#AsyncAgentWebSocketClient-167"><span class="linenos">167</span></a>                    <span class="n">microphone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-168"><a href="#AsyncAgentWebSocketClient-168"><span class="linenos">168</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-169"><a href="#AsyncAgentWebSocketClient-169"><span class="linenos">169</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-170"><a href="#AsyncAgentWebSocketClient-170"><span class="linenos">170</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="n">Speaker</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-171"><a href="#AsyncAgentWebSocketClient-171"><span class="linenos">171</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-172"><a href="#AsyncAgentWebSocketClient-172"><span class="linenos">172</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-173"><a href="#AsyncAgentWebSocketClient-173"><span class="linenos">173</span></a>                    <span class="n">last_play_delta_in_ms</span><span class="o">=</span><span class="n">playback_delta_in_ms</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-174"><a href="#AsyncAgentWebSocketClient-174"><span class="linenos">174</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-175"><a href="#AsyncAgentWebSocketClient-175"><span class="linenos">175</span></a>                    <span class="n">microphone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-176"><a href="#AsyncAgentWebSocketClient-176"><span class="linenos">176</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-177"><a href="#AsyncAgentWebSocketClient-177"><span class="linenos">177</span></a>        <span class="c1"># call the parent constructor</span>
</span><span id="AsyncAgentWebSocketClient-178"><a href="#AsyncAgentWebSocketClient-178"><span class="linenos">178</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-179"><a href="#AsyncAgentWebSocketClient-179"><span class="linenos">179</span></a>
</span><span id="AsyncAgentWebSocketClient-180"><a href="#AsyncAgentWebSocketClient-180"><span class="linenos">180</span></a>    <span class="c1"># pylint: disable=too-many-branches,too-many-statements</span>
</span><span id="AsyncAgentWebSocketClient-181"><a href="#AsyncAgentWebSocketClient-181"><span class="linenos">181</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-182"><a href="#AsyncAgentWebSocketClient-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-183"><a href="#AsyncAgentWebSocketClient-183"><span class="linenos">183</span></a>        <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SettingsConfigurationOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-184"><a href="#AsyncAgentWebSocketClient-184"><span class="linenos">184</span></a>        <span class="n">addons</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-185"><a href="#AsyncAgentWebSocketClient-185"><span class="linenos">185</span></a>        <span class="n">headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-186"><a href="#AsyncAgentWebSocketClient-186"><span class="linenos">186</span></a>        <span class="n">members</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-187"><a href="#AsyncAgentWebSocketClient-187"><span class="linenos">187</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-188"><a href="#AsyncAgentWebSocketClient-188"><span class="linenos">188</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-189"><a href="#AsyncAgentWebSocketClient-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-190"><a href="#AsyncAgentWebSocketClient-190"><span class="linenos">190</span></a><span class="sd">        Starts the WebSocket connection for agent API.</span>
</span><span id="AsyncAgentWebSocketClient-191"><a href="#AsyncAgentWebSocketClient-191"><span class="linenos">191</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-192"><a href="#AsyncAgentWebSocketClient-192"><span class="linenos">192</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start ENTER&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-193"><a href="#AsyncAgentWebSocketClient-193"><span class="linenos">193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;settings: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-194"><a href="#AsyncAgentWebSocketClient-194"><span class="linenos">194</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;addons: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">addons</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-195"><a href="#AsyncAgentWebSocketClient-195"><span class="linenos">195</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;headers: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-196"><a href="#AsyncAgentWebSocketClient-196"><span class="linenos">196</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;members: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">members</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-197"><a href="#AsyncAgentWebSocketClient-197"><span class="linenos">197</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;kwargs: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-198"><a href="#AsyncAgentWebSocketClient-198"><span class="linenos">198</span></a>
</span><span id="AsyncAgentWebSocketClient-199"><a href="#AsyncAgentWebSocketClient-199"><span class="linenos">199</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">SettingsConfigurationOptions</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">options</span><span class="o">.</span><span class="n">check</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient-200"><a href="#AsyncAgentWebSocketClient-200"><span class="linenos">200</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;settings.check failed&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-201"><a href="#AsyncAgentWebSocketClient-201"><span class="linenos">201</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-202"><a href="#AsyncAgentWebSocketClient-202"><span class="linenos">202</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Fatal agent settings error&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-203"><a href="#AsyncAgentWebSocketClient-203"><span class="linenos">203</span></a>
</span><span id="AsyncAgentWebSocketClient-204"><a href="#AsyncAgentWebSocketClient-204"><span class="linenos">204</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_addons</span> <span class="o">=</span> <span class="n">addons</span>
</span><span id="AsyncAgentWebSocketClient-205"><a href="#AsyncAgentWebSocketClient-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="n">headers</span>
</span><span id="AsyncAgentWebSocketClient-206"><a href="#AsyncAgentWebSocketClient-206"><span class="linenos">206</span></a>
</span><span id="AsyncAgentWebSocketClient-207"><a href="#AsyncAgentWebSocketClient-207"><span class="linenos">207</span></a>        <span class="c1"># add &quot;members&quot; as members of the class</span>
</span><span id="AsyncAgentWebSocketClient-208"><a href="#AsyncAgentWebSocketClient-208"><span class="linenos">208</span></a>        <span class="k">if</span> <span class="n">members</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-209"><a href="#AsyncAgentWebSocketClient-209"><span class="linenos">209</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">members</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-210"><a href="#AsyncAgentWebSocketClient-210"><span class="linenos">210</span></a>
</span><span id="AsyncAgentWebSocketClient-211"><a href="#AsyncAgentWebSocketClient-211"><span class="linenos">211</span></a>        <span class="c1"># set kwargs as members of the class</span>
</span><span id="AsyncAgentWebSocketClient-212"><a href="#AsyncAgentWebSocketClient-212"><span class="linenos">212</span></a>        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-213"><a href="#AsyncAgentWebSocketClient-213"><span class="linenos">213</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
</span><span id="AsyncAgentWebSocketClient-214"><a href="#AsyncAgentWebSocketClient-214"><span class="linenos">214</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-215"><a href="#AsyncAgentWebSocketClient-215"><span class="linenos">215</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="AsyncAgentWebSocketClient-216"><a href="#AsyncAgentWebSocketClient-216"><span class="linenos">216</span></a>
</span><span id="AsyncAgentWebSocketClient-217"><a href="#AsyncAgentWebSocketClient-217"><span class="linenos">217</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">SettingsConfigurationOptions</span><span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient-218"><a href="#AsyncAgentWebSocketClient-218"><span class="linenos">218</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is class&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-219"><a href="#AsyncAgentWebSocketClient-219"><span class="linenos">219</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="AsyncAgentWebSocketClient-220"><a href="#AsyncAgentWebSocketClient-220"><span class="linenos">220</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient-221"><a href="#AsyncAgentWebSocketClient-221"><span class="linenos">221</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is dict&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-222"><a href="#AsyncAgentWebSocketClient-222"><span class="linenos">222</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">SettingsConfigurationOptions</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-223"><a href="#AsyncAgentWebSocketClient-223"><span class="linenos">223</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient-224"><a href="#AsyncAgentWebSocketClient-224"><span class="linenos">224</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is json&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-225"><a href="#AsyncAgentWebSocketClient-225"><span class="linenos">225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">SettingsConfigurationOptions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-226"><a href="#AsyncAgentWebSocketClient-226"><span class="linenos">226</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-227"><a href="#AsyncAgentWebSocketClient-227"><span class="linenos">227</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Invalid options type&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-228"><a href="#AsyncAgentWebSocketClient-228"><span class="linenos">228</span></a>
</span><span id="AsyncAgentWebSocketClient-229"><a href="#AsyncAgentWebSocketClient-229"><span class="linenos">229</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-230"><a href="#AsyncAgentWebSocketClient-230"><span class="linenos">230</span></a>            <span class="c1"># speaker substitutes the listening thread</span>
</span><span id="AsyncAgentWebSocketClient-231"><a href="#AsyncAgentWebSocketClient-231"><span class="linenos">231</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-232"><a href="#AsyncAgentWebSocketClient-232"><span class="linenos">232</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;passing speaker to delegate_listening&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-233"><a href="#AsyncAgentWebSocketClient-233"><span class="linenos">233</span></a>                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">delegate_listening</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-234"><a href="#AsyncAgentWebSocketClient-234"><span class="linenos">234</span></a>
</span><span id="AsyncAgentWebSocketClient-235"><a href="#AsyncAgentWebSocketClient-235"><span class="linenos">235</span></a>            <span class="c1"># call parent start</span>
</span><span id="AsyncAgentWebSocketClient-236"><a href="#AsyncAgentWebSocketClient-236"><span class="linenos">236</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-237"><a href="#AsyncAgentWebSocketClient-237"><span class="linenos">237</span></a>                <span class="k">await</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-238"><a href="#AsyncAgentWebSocketClient-238"><span class="linenos">238</span></a>                    <span class="p">{},</span>
</span><span id="AsyncAgentWebSocketClient-239"><a href="#AsyncAgentWebSocketClient-239"><span class="linenos">239</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_addons</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-240"><a href="#AsyncAgentWebSocketClient-240"><span class="linenos">240</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-241"><a href="#AsyncAgentWebSocketClient-241"><span class="linenos">241</span></a>                    <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-242"><a href="#AsyncAgentWebSocketClient-242"><span class="linenos">242</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-243"><a href="#AsyncAgentWebSocketClient-243"><span class="linenos">243</span></a>                <span class="ow">is</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient-244"><a href="#AsyncAgentWebSocketClient-244"><span class="linenos">244</span></a>            <span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient-245"><a href="#AsyncAgentWebSocketClient-245"><span class="linenos">245</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start failed&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-246"><a href="#AsyncAgentWebSocketClient-246"><span class="linenos">246</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-247"><a href="#AsyncAgentWebSocketClient-247"><span class="linenos">247</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient-248"><a href="#AsyncAgentWebSocketClient-248"><span class="linenos">248</span></a>
</span><span id="AsyncAgentWebSocketClient-249"><a href="#AsyncAgentWebSocketClient-249"><span class="linenos">249</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-250"><a href="#AsyncAgentWebSocketClient-250"><span class="linenos">250</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;speaker is delegate_listening. Starting speaker&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-251"><a href="#AsyncAgentWebSocketClient-251"><span class="linenos">251</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient-252"><a href="#AsyncAgentWebSocketClient-252"><span class="linenos">252</span></a>
</span><span id="AsyncAgentWebSocketClient-253"><a href="#AsyncAgentWebSocketClient-253"><span class="linenos">253</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-254"><a href="#AsyncAgentWebSocketClient-254"><span class="linenos">254</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-255"><a href="#AsyncAgentWebSocketClient-255"><span class="linenos">255</span></a>                    <span class="s2">&quot;speaker is delegate_listening. Starting microphone&quot;</span>
</span><span id="AsyncAgentWebSocketClient-256"><a href="#AsyncAgentWebSocketClient-256"><span class="linenos">256</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-257"><a href="#AsyncAgentWebSocketClient-257"><span class="linenos">257</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">set_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-258"><a href="#AsyncAgentWebSocketClient-258"><span class="linenos">258</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient-259"><a href="#AsyncAgentWebSocketClient-259"><span class="linenos">259</span></a>
</span><span id="AsyncAgentWebSocketClient-260"><a href="#AsyncAgentWebSocketClient-260"><span class="linenos">260</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AsyncAgentWebSocketClient-261"><a href="#AsyncAgentWebSocketClient-261"><span class="linenos">261</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient-262"><a href="#AsyncAgentWebSocketClient-262"><span class="linenos">262</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-263"><a href="#AsyncAgentWebSocketClient-263"><span class="linenos">263</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient-264"><a href="#AsyncAgentWebSocketClient-264"><span class="linenos">264</span></a>
</span><span id="AsyncAgentWebSocketClient-265"><a href="#AsyncAgentWebSocketClient-265"><span class="linenos">265</span></a>            <span class="c1"># keepalive thread</span>
</span><span id="AsyncAgentWebSocketClient-266"><a href="#AsyncAgentWebSocketClient-266"><span class="linenos">266</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">is_keep_alive_enabled</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient-267"><a href="#AsyncAgentWebSocketClient-267"><span class="linenos">267</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keepalive is enabled&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-268"><a href="#AsyncAgentWebSocketClient-268"><span class="linenos">268</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient-269"><a href="#AsyncAgentWebSocketClient-269"><span class="linenos">269</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-270"><a href="#AsyncAgentWebSocketClient-270"><span class="linenos">270</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keepalive is disabled&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-271"><a href="#AsyncAgentWebSocketClient-271"><span class="linenos">271</span></a>
</span><span id="AsyncAgentWebSocketClient-272"><a href="#AsyncAgentWebSocketClient-272"><span class="linenos">272</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AsyncAgentWebSocketClient-273"><a href="#AsyncAgentWebSocketClient-273"><span class="linenos">273</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient-274"><a href="#AsyncAgentWebSocketClient-274"><span class="linenos">274</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-275"><a href="#AsyncAgentWebSocketClient-275"><span class="linenos">275</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient-276"><a href="#AsyncAgentWebSocketClient-276"><span class="linenos">276</span></a>
</span><span id="AsyncAgentWebSocketClient-277"><a href="#AsyncAgentWebSocketClient-277"><span class="linenos">277</span></a>            <span class="c1"># send the configurationsetting message</span>
</span><span id="AsyncAgentWebSocketClient-278"><a href="#AsyncAgentWebSocketClient-278"><span class="linenos">278</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;Sending ConfigurationSettings...&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-279"><a href="#AsyncAgentWebSocketClient-279"><span class="linenos">279</span></a>            <span class="n">ret_send_cs</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">))</span>
</span><span id="AsyncAgentWebSocketClient-280"><a href="#AsyncAgentWebSocketClient-280"><span class="linenos">280</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">ret_send_cs</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-281"><a href="#AsyncAgentWebSocketClient-281"><span class="linenos">281</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;ConfigurationSettings failed&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-282"><a href="#AsyncAgentWebSocketClient-282"><span class="linenos">282</span></a>
</span><span id="AsyncAgentWebSocketClient-283"><a href="#AsyncAgentWebSocketClient-283"><span class="linenos">283</span></a>                <span class="n">err_error</span><span class="p">:</span> <span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-284"><a href="#AsyncAgentWebSocketClient-284"><span class="linenos">284</span></a>                    <span class="s2">&quot;Exception in AsyncAgentWebSocketClient.start&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-285"><a href="#AsyncAgentWebSocketClient-285"><span class="linenos">285</span></a>                    <span class="s2">&quot;ConfigurationSettings failed to send&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-286"><a href="#AsyncAgentWebSocketClient-286"><span class="linenos">286</span></a>                    <span class="s2">&quot;Exception&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-287"><a href="#AsyncAgentWebSocketClient-287"><span class="linenos">287</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-288"><a href="#AsyncAgentWebSocketClient-288"><span class="linenos">288</span></a>                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-289"><a href="#AsyncAgentWebSocketClient-289"><span class="linenos">289</span></a>                    <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-290"><a href="#AsyncAgentWebSocketClient-290"><span class="linenos">290</span></a>                    <span class="n">error</span><span class="o">=</span><span class="n">err_error</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-291"><a href="#AsyncAgentWebSocketClient-291"><span class="linenos">291</span></a>                    <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-292"><a href="#AsyncAgentWebSocketClient-292"><span class="linenos">292</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-293"><a href="#AsyncAgentWebSocketClient-293"><span class="linenos">293</span></a>
</span><span id="AsyncAgentWebSocketClient-294"><a href="#AsyncAgentWebSocketClient-294"><span class="linenos">294</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-295"><a href="#AsyncAgentWebSocketClient-295"><span class="linenos">295</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient-296"><a href="#AsyncAgentWebSocketClient-296"><span class="linenos">296</span></a>
</span><span id="AsyncAgentWebSocketClient-297"><a href="#AsyncAgentWebSocketClient-297"><span class="linenos">297</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;start succeeded&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-298"><a href="#AsyncAgentWebSocketClient-298"><span class="linenos">298</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-299"><a href="#AsyncAgentWebSocketClient-299"><span class="linenos">299</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="AsyncAgentWebSocketClient-300"><a href="#AsyncAgentWebSocketClient-300"><span class="linenos">300</span></a>
</span><span id="AsyncAgentWebSocketClient-301"><a href="#AsyncAgentWebSocketClient-301"><span class="linenos">301</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
</span><span id="AsyncAgentWebSocketClient-302"><a href="#AsyncAgentWebSocketClient-302"><span class="linenos">302</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-303"><a href="#AsyncAgentWebSocketClient-303"><span class="linenos">303</span></a>                <span class="s2">&quot;WebSocketException in AsyncAgentWebSocketClient.start: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span>
</span><span id="AsyncAgentWebSocketClient-304"><a href="#AsyncAgentWebSocketClient-304"><span class="linenos">304</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-305"><a href="#AsyncAgentWebSocketClient-305"><span class="linenos">305</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-306"><a href="#AsyncAgentWebSocketClient-306"><span class="linenos">306</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;termination_exception_connect&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-307"><a href="#AsyncAgentWebSocketClient-307"><span class="linenos">307</span></a>                <span class="k">raise</span> <span class="n">e</span>
</span><span id="AsyncAgentWebSocketClient-308"><a href="#AsyncAgentWebSocketClient-308"><span class="linenos">308</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient-309"><a href="#AsyncAgentWebSocketClient-309"><span class="linenos">309</span></a>
</span><span id="AsyncAgentWebSocketClient-310"><a href="#AsyncAgentWebSocketClient-310"><span class="linenos">310</span></a>    <span class="c1"># pylint: enable=too-many-branches,too-many-statements</span>
</span><span id="AsyncAgentWebSocketClient-311"><a href="#AsyncAgentWebSocketClient-311"><span class="linenos">311</span></a>
</span><span id="AsyncAgentWebSocketClient-312"><a href="#AsyncAgentWebSocketClient-312"><span class="linenos">312</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">AgentWebSocketEvents</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-313"><a href="#AsyncAgentWebSocketClient-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-314"><a href="#AsyncAgentWebSocketClient-314"><span class="linenos">314</span></a><span class="sd">        Registers event handlers for specific events.</span>
</span><span id="AsyncAgentWebSocketClient-315"><a href="#AsyncAgentWebSocketClient-315"><span class="linenos">315</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-316"><a href="#AsyncAgentWebSocketClient-316"><span class="linenos">316</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;event subscribed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-317"><a href="#AsyncAgentWebSocketClient-317"><span class="linenos">317</span></a>        <span class="k">if</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">callable</span><span class="p">(</span><span class="n">handler</span><span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient-318"><a href="#AsyncAgentWebSocketClient-318"><span class="linenos">318</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_event_handlers</span><span class="p">[</span><span class="n">event</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-319"><a href="#AsyncAgentWebSocketClient-319"><span class="linenos">319</span></a>
</span><span id="AsyncAgentWebSocketClient-320"><a href="#AsyncAgentWebSocketClient-320"><span class="linenos">320</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">AgentWebSocketEvents</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-321"><a href="#AsyncAgentWebSocketClient-321"><span class="linenos">321</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-322"><a href="#AsyncAgentWebSocketClient-322"><span class="linenos">322</span></a><span class="sd">        Emits events to the registered event handlers.</span>
</span><span id="AsyncAgentWebSocketClient-323"><a href="#AsyncAgentWebSocketClient-323"><span class="linenos">323</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-324"><a href="#AsyncAgentWebSocketClient-324"><span class="linenos">324</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._emit ENTER&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-325"><a href="#AsyncAgentWebSocketClient-325"><span class="linenos">325</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;callback handlers for: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-326"><a href="#AsyncAgentWebSocketClient-326"><span class="linenos">326</span></a>
</span><span id="AsyncAgentWebSocketClient-327"><a href="#AsyncAgentWebSocketClient-327"><span class="linenos">327</span></a>        <span class="c1"># debug the threads</span>
</span><span id="AsyncAgentWebSocketClient-328"><a href="#AsyncAgentWebSocketClient-328"><span class="linenos">328</span></a>        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient-329"><a href="#AsyncAgentWebSocketClient-329"><span class="linenos">329</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-330"><a href="#AsyncAgentWebSocketClient-330"><span class="linenos">330</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient-331"><a href="#AsyncAgentWebSocketClient-331"><span class="linenos">331</span></a>
</span><span id="AsyncAgentWebSocketClient-332"><a href="#AsyncAgentWebSocketClient-332"><span class="linenos">332</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;callback handlers for: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-333"><a href="#AsyncAgentWebSocketClient-333"><span class="linenos">333</span></a>        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AsyncAgentWebSocketClient-334"><a href="#AsyncAgentWebSocketClient-334"><span class="linenos">334</span></a>        <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event_handlers</span><span class="p">[</span><span class="n">event</span><span class="p">]:</span>
</span><span id="AsyncAgentWebSocketClient-335"><a href="#AsyncAgentWebSocketClient-335"><span class="linenos">335</span></a>            <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</span><span id="AsyncAgentWebSocketClient-336"><a href="#AsyncAgentWebSocketClient-336"><span class="linenos">336</span></a>            <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-337"><a href="#AsyncAgentWebSocketClient-337"><span class="linenos">337</span></a>
</span><span id="AsyncAgentWebSocketClient-338"><a href="#AsyncAgentWebSocketClient-338"><span class="linenos">338</span></a>        <span class="k">if</span> <span class="n">tasks</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-339"><a href="#AsyncAgentWebSocketClient-339"><span class="linenos">339</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;waiting for tasks to finish...&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-340"><a href="#AsyncAgentWebSocketClient-340"><span class="linenos">340</span></a>            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">,</span> <span class="n">return_exceptions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-341"><a href="#AsyncAgentWebSocketClient-341"><span class="linenos">341</span></a>            <span class="n">tasks</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient-342"><a href="#AsyncAgentWebSocketClient-342"><span class="linenos">342</span></a>
</span><span id="AsyncAgentWebSocketClient-343"><a href="#AsyncAgentWebSocketClient-343"><span class="linenos">343</span></a>        <span class="c1"># debug the threads</span>
</span><span id="AsyncAgentWebSocketClient-344"><a href="#AsyncAgentWebSocketClient-344"><span class="linenos">344</span></a>        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient-345"><a href="#AsyncAgentWebSocketClient-345"><span class="linenos">345</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-346"><a href="#AsyncAgentWebSocketClient-346"><span class="linenos">346</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient-347"><a href="#AsyncAgentWebSocketClient-347"><span class="linenos">347</span></a>
</span><span id="AsyncAgentWebSocketClient-348"><a href="#AsyncAgentWebSocketClient-348"><span class="linenos">348</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._emit LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-349"><a href="#AsyncAgentWebSocketClient-349"><span class="linenos">349</span></a>
</span><span id="AsyncAgentWebSocketClient-350"><a href="#AsyncAgentWebSocketClient-350"><span class="linenos">350</span></a>    <span class="c1"># pylint: disable=too-many-locals,too-many-statements</span>
</span><span id="AsyncAgentWebSocketClient-351"><a href="#AsyncAgentWebSocketClient-351"><span class="linenos">351</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-352"><a href="#AsyncAgentWebSocketClient-352"><span class="linenos">352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-353"><a href="#AsyncAgentWebSocketClient-353"><span class="linenos">353</span></a><span class="sd">        Processes messages received over the WebSocket connection.</span>
</span><span id="AsyncAgentWebSocketClient-354"><a href="#AsyncAgentWebSocketClient-354"><span class="linenos">354</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-355"><a href="#AsyncAgentWebSocketClient-355"><span class="linenos">355</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._process_text ENTER&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-356"><a href="#AsyncAgentWebSocketClient-356"><span class="linenos">356</span></a>
</span><span id="AsyncAgentWebSocketClient-357"><a href="#AsyncAgentWebSocketClient-357"><span class="linenos">357</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-358"><a href="#AsyncAgentWebSocketClient-358"><span class="linenos">358</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Text data received&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-359"><a href="#AsyncAgentWebSocketClient-359"><span class="linenos">359</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-360"><a href="#AsyncAgentWebSocketClient-360"><span class="linenos">360</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;message is empty&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-361"><a href="#AsyncAgentWebSocketClient-361"><span class="linenos">361</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._process_text LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-362"><a href="#AsyncAgentWebSocketClient-362"><span class="linenos">362</span></a>                <span class="k">return</span>
</span><span id="AsyncAgentWebSocketClient-363"><a href="#AsyncAgentWebSocketClient-363"><span class="linenos">363</span></a>
</span><span id="AsyncAgentWebSocketClient-364"><a href="#AsyncAgentWebSocketClient-364"><span class="linenos">364</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-365"><a href="#AsyncAgentWebSocketClient-365"><span class="linenos">365</span></a>            <span class="n">response_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-366"><a href="#AsyncAgentWebSocketClient-366"><span class="linenos">366</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;response_type: </span><span class="si">%s</span><span class="s2">, data: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response_type</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-367"><a href="#AsyncAgentWebSocketClient-367"><span class="linenos">367</span></a>
</span><span id="AsyncAgentWebSocketClient-368"><a href="#AsyncAgentWebSocketClient-368"><span class="linenos">368</span></a>            <span class="k">match</span> <span class="n">response_type</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-369"><a href="#AsyncAgentWebSocketClient-369"><span class="linenos">369</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Open</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-370"><a href="#AsyncAgentWebSocketClient-370"><span class="linenos">370</span></a>                    <span class="n">open_result</span><span class="p">:</span> <span class="n">OpenResponse</span> <span class="o">=</span> <span class="n">OpenResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-371"><a href="#AsyncAgentWebSocketClient-371"><span class="linenos">371</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;OpenResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">open_result</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-372"><a href="#AsyncAgentWebSocketClient-372"><span class="linenos">372</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-373"><a href="#AsyncAgentWebSocketClient-373"><span class="linenos">373</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Open</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-374"><a href="#AsyncAgentWebSocketClient-374"><span class="linenos">374</span></a>                        <span class="nb">open</span><span class="o">=</span><span class="n">open_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-375"><a href="#AsyncAgentWebSocketClient-375"><span class="linenos">375</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-376"><a href="#AsyncAgentWebSocketClient-376"><span class="linenos">376</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-377"><a href="#AsyncAgentWebSocketClient-377"><span class="linenos">377</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Welcome</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-378"><a href="#AsyncAgentWebSocketClient-378"><span class="linenos">378</span></a>                    <span class="n">welcome_result</span><span class="p">:</span> <span class="n">WelcomeResponse</span> <span class="o">=</span> <span class="n">WelcomeResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-379"><a href="#AsyncAgentWebSocketClient-379"><span class="linenos">379</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;WelcomeResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">welcome_result</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-380"><a href="#AsyncAgentWebSocketClient-380"><span class="linenos">380</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-381"><a href="#AsyncAgentWebSocketClient-381"><span class="linenos">381</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Welcome</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-382"><a href="#AsyncAgentWebSocketClient-382"><span class="linenos">382</span></a>                        <span class="n">welcome</span><span class="o">=</span><span class="n">welcome_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-383"><a href="#AsyncAgentWebSocketClient-383"><span class="linenos">383</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-384"><a href="#AsyncAgentWebSocketClient-384"><span class="linenos">384</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-385"><a href="#AsyncAgentWebSocketClient-385"><span class="linenos">385</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">SettingsApplied</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-386"><a href="#AsyncAgentWebSocketClient-386"><span class="linenos">386</span></a>                    <span class="n">settings_applied_result</span><span class="p">:</span> <span class="n">SettingsAppliedResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-387"><a href="#AsyncAgentWebSocketClient-387"><span class="linenos">387</span></a>                        <span class="n">SettingsAppliedResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-388"><a href="#AsyncAgentWebSocketClient-388"><span class="linenos">388</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-389"><a href="#AsyncAgentWebSocketClient-389"><span class="linenos">389</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-390"><a href="#AsyncAgentWebSocketClient-390"><span class="linenos">390</span></a>                        <span class="s2">&quot;SettingsAppliedResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">settings_applied_result</span>
</span><span id="AsyncAgentWebSocketClient-391"><a href="#AsyncAgentWebSocketClient-391"><span class="linenos">391</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-392"><a href="#AsyncAgentWebSocketClient-392"><span class="linenos">392</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-393"><a href="#AsyncAgentWebSocketClient-393"><span class="linenos">393</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">SettingsApplied</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-394"><a href="#AsyncAgentWebSocketClient-394"><span class="linenos">394</span></a>                        <span class="n">settings_applied</span><span class="o">=</span><span class="n">settings_applied_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-395"><a href="#AsyncAgentWebSocketClient-395"><span class="linenos">395</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-396"><a href="#AsyncAgentWebSocketClient-396"><span class="linenos">396</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-397"><a href="#AsyncAgentWebSocketClient-397"><span class="linenos">397</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">ConversationText</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-398"><a href="#AsyncAgentWebSocketClient-398"><span class="linenos">398</span></a>                    <span class="n">conversation_text_result</span><span class="p">:</span> <span class="n">ConversationTextResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-399"><a href="#AsyncAgentWebSocketClient-399"><span class="linenos">399</span></a>                        <span class="n">ConversationTextResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-400"><a href="#AsyncAgentWebSocketClient-400"><span class="linenos">400</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-401"><a href="#AsyncAgentWebSocketClient-401"><span class="linenos">401</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-402"><a href="#AsyncAgentWebSocketClient-402"><span class="linenos">402</span></a>                        <span class="s2">&quot;ConversationTextResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">conversation_text_result</span>
</span><span id="AsyncAgentWebSocketClient-403"><a href="#AsyncAgentWebSocketClient-403"><span class="linenos">403</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-404"><a href="#AsyncAgentWebSocketClient-404"><span class="linenos">404</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-405"><a href="#AsyncAgentWebSocketClient-405"><span class="linenos">405</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">ConversationText</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-406"><a href="#AsyncAgentWebSocketClient-406"><span class="linenos">406</span></a>                        <span class="n">conversation_text</span><span class="o">=</span><span class="n">conversation_text_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-407"><a href="#AsyncAgentWebSocketClient-407"><span class="linenos">407</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-408"><a href="#AsyncAgentWebSocketClient-408"><span class="linenos">408</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-409"><a href="#AsyncAgentWebSocketClient-409"><span class="linenos">409</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">UserStartedSpeaking</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-410"><a href="#AsyncAgentWebSocketClient-410"><span class="linenos">410</span></a>                    <span class="n">user_started_speaking_result</span><span class="p">:</span> <span class="n">UserStartedSpeakingResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-411"><a href="#AsyncAgentWebSocketClient-411"><span class="linenos">411</span></a>                        <span class="n">UserStartedSpeakingResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-412"><a href="#AsyncAgentWebSocketClient-412"><span class="linenos">412</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-413"><a href="#AsyncAgentWebSocketClient-413"><span class="linenos">413</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-414"><a href="#AsyncAgentWebSocketClient-414"><span class="linenos">414</span></a>                        <span class="s2">&quot;UserStartedSpeakingResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">user_started_speaking_result</span>
</span><span id="AsyncAgentWebSocketClient-415"><a href="#AsyncAgentWebSocketClient-415"><span class="linenos">415</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-416"><a href="#AsyncAgentWebSocketClient-416"><span class="linenos">416</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-417"><a href="#AsyncAgentWebSocketClient-417"><span class="linenos">417</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">UserStartedSpeaking</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-418"><a href="#AsyncAgentWebSocketClient-418"><span class="linenos">418</span></a>                        <span class="n">user_started_speaking</span><span class="o">=</span><span class="n">user_started_speaking_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-419"><a href="#AsyncAgentWebSocketClient-419"><span class="linenos">419</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-420"><a href="#AsyncAgentWebSocketClient-420"><span class="linenos">420</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-421"><a href="#AsyncAgentWebSocketClient-421"><span class="linenos">421</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentThinking</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-422"><a href="#AsyncAgentWebSocketClient-422"><span class="linenos">422</span></a>                    <span class="n">agent_thinking_result</span><span class="p">:</span> <span class="n">AgentThinkingResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-423"><a href="#AsyncAgentWebSocketClient-423"><span class="linenos">423</span></a>                        <span class="n">AgentThinkingResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-424"><a href="#AsyncAgentWebSocketClient-424"><span class="linenos">424</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-425"><a href="#AsyncAgentWebSocketClient-425"><span class="linenos">425</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-426"><a href="#AsyncAgentWebSocketClient-426"><span class="linenos">426</span></a>                        <span class="s2">&quot;AgentThinkingResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">agent_thinking_result</span>
</span><span id="AsyncAgentWebSocketClient-427"><a href="#AsyncAgentWebSocketClient-427"><span class="linenos">427</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-428"><a href="#AsyncAgentWebSocketClient-428"><span class="linenos">428</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-429"><a href="#AsyncAgentWebSocketClient-429"><span class="linenos">429</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentThinking</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-430"><a href="#AsyncAgentWebSocketClient-430"><span class="linenos">430</span></a>                        <span class="n">agent_thinking</span><span class="o">=</span><span class="n">agent_thinking_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-431"><a href="#AsyncAgentWebSocketClient-431"><span class="linenos">431</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-432"><a href="#AsyncAgentWebSocketClient-432"><span class="linenos">432</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-433"><a href="#AsyncAgentWebSocketClient-433"><span class="linenos">433</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">FunctionCalling</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-434"><a href="#AsyncAgentWebSocketClient-434"><span class="linenos">434</span></a>                    <span class="n">function_calling_result</span><span class="p">:</span> <span class="n">FunctionCalling</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-435"><a href="#AsyncAgentWebSocketClient-435"><span class="linenos">435</span></a>                        <span class="n">FunctionCalling</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-436"><a href="#AsyncAgentWebSocketClient-436"><span class="linenos">436</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-437"><a href="#AsyncAgentWebSocketClient-437"><span class="linenos">437</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;FunctionCalling: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">function_calling_result</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-438"><a href="#AsyncAgentWebSocketClient-438"><span class="linenos">438</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-439"><a href="#AsyncAgentWebSocketClient-439"><span class="linenos">439</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">FunctionCalling</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-440"><a href="#AsyncAgentWebSocketClient-440"><span class="linenos">440</span></a>                        <span class="n">function_calling</span><span class="o">=</span><span class="n">function_calling_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-441"><a href="#AsyncAgentWebSocketClient-441"><span class="linenos">441</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-442"><a href="#AsyncAgentWebSocketClient-442"><span class="linenos">442</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-443"><a href="#AsyncAgentWebSocketClient-443"><span class="linenos">443</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">FunctionCallRequest</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-444"><a href="#AsyncAgentWebSocketClient-444"><span class="linenos">444</span></a>                    <span class="n">function_call_request_result</span><span class="p">:</span> <span class="n">FunctionCallRequest</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-445"><a href="#AsyncAgentWebSocketClient-445"><span class="linenos">445</span></a>                        <span class="n">FunctionCallRequest</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-446"><a href="#AsyncAgentWebSocketClient-446"><span class="linenos">446</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-447"><a href="#AsyncAgentWebSocketClient-447"><span class="linenos">447</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-448"><a href="#AsyncAgentWebSocketClient-448"><span class="linenos">448</span></a>                        <span class="s2">&quot;FunctionCallRequest: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">function_call_request_result</span>
</span><span id="AsyncAgentWebSocketClient-449"><a href="#AsyncAgentWebSocketClient-449"><span class="linenos">449</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-450"><a href="#AsyncAgentWebSocketClient-450"><span class="linenos">450</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-451"><a href="#AsyncAgentWebSocketClient-451"><span class="linenos">451</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">FunctionCallRequest</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-452"><a href="#AsyncAgentWebSocketClient-452"><span class="linenos">452</span></a>                        <span class="n">function_call_request</span><span class="o">=</span><span class="n">function_call_request_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-453"><a href="#AsyncAgentWebSocketClient-453"><span class="linenos">453</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-454"><a href="#AsyncAgentWebSocketClient-454"><span class="linenos">454</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-455"><a href="#AsyncAgentWebSocketClient-455"><span class="linenos">455</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentStartedSpeaking</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-456"><a href="#AsyncAgentWebSocketClient-456"><span class="linenos">456</span></a>                    <span class="n">agent_started_speaking_result</span><span class="p">:</span> <span class="n">AgentStartedSpeakingResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-457"><a href="#AsyncAgentWebSocketClient-457"><span class="linenos">457</span></a>                        <span class="n">AgentStartedSpeakingResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-458"><a href="#AsyncAgentWebSocketClient-458"><span class="linenos">458</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-459"><a href="#AsyncAgentWebSocketClient-459"><span class="linenos">459</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-460"><a href="#AsyncAgentWebSocketClient-460"><span class="linenos">460</span></a>                        <span class="s2">&quot;AgentStartedSpeakingResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-461"><a href="#AsyncAgentWebSocketClient-461"><span class="linenos">461</span></a>                        <span class="n">agent_started_speaking_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-462"><a href="#AsyncAgentWebSocketClient-462"><span class="linenos">462</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-463"><a href="#AsyncAgentWebSocketClient-463"><span class="linenos">463</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-464"><a href="#AsyncAgentWebSocketClient-464"><span class="linenos">464</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentStartedSpeaking</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-465"><a href="#AsyncAgentWebSocketClient-465"><span class="linenos">465</span></a>                        <span class="n">agent_started_speaking</span><span class="o">=</span><span class="n">agent_started_speaking_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-466"><a href="#AsyncAgentWebSocketClient-466"><span class="linenos">466</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-467"><a href="#AsyncAgentWebSocketClient-467"><span class="linenos">467</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-468"><a href="#AsyncAgentWebSocketClient-468"><span class="linenos">468</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentAudioDone</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-469"><a href="#AsyncAgentWebSocketClient-469"><span class="linenos">469</span></a>                    <span class="n">agent_audio_done_result</span><span class="p">:</span> <span class="n">AgentAudioDoneResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-470"><a href="#AsyncAgentWebSocketClient-470"><span class="linenos">470</span></a>                        <span class="n">AgentAudioDoneResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-471"><a href="#AsyncAgentWebSocketClient-471"><span class="linenos">471</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-472"><a href="#AsyncAgentWebSocketClient-472"><span class="linenos">472</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-473"><a href="#AsyncAgentWebSocketClient-473"><span class="linenos">473</span></a>                        <span class="s2">&quot;AgentAudioDoneResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">agent_audio_done_result</span>
</span><span id="AsyncAgentWebSocketClient-474"><a href="#AsyncAgentWebSocketClient-474"><span class="linenos">474</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-475"><a href="#AsyncAgentWebSocketClient-475"><span class="linenos">475</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-476"><a href="#AsyncAgentWebSocketClient-476"><span class="linenos">476</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AgentAudioDone</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-477"><a href="#AsyncAgentWebSocketClient-477"><span class="linenos">477</span></a>                        <span class="n">agent_audio_done</span><span class="o">=</span><span class="n">agent_audio_done_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-478"><a href="#AsyncAgentWebSocketClient-478"><span class="linenos">478</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-479"><a href="#AsyncAgentWebSocketClient-479"><span class="linenos">479</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-480"><a href="#AsyncAgentWebSocketClient-480"><span class="linenos">480</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">InjectionRefused</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-481"><a href="#AsyncAgentWebSocketClient-481"><span class="linenos">481</span></a>                    <span class="n">injection_refused_result</span><span class="p">:</span> <span class="n">InjectionRefusedResponse</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-482"><a href="#AsyncAgentWebSocketClient-482"><span class="linenos">482</span></a>                        <span class="n">InjectionRefusedResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-483"><a href="#AsyncAgentWebSocketClient-483"><span class="linenos">483</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-484"><a href="#AsyncAgentWebSocketClient-484"><span class="linenos">484</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-485"><a href="#AsyncAgentWebSocketClient-485"><span class="linenos">485</span></a>                        <span class="s2">&quot;InjectionRefused: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">injection_refused_result</span>
</span><span id="AsyncAgentWebSocketClient-486"><a href="#AsyncAgentWebSocketClient-486"><span class="linenos">486</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-487"><a href="#AsyncAgentWebSocketClient-487"><span class="linenos">487</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-488"><a href="#AsyncAgentWebSocketClient-488"><span class="linenos">488</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">InjectionRefused</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-489"><a href="#AsyncAgentWebSocketClient-489"><span class="linenos">489</span></a>                        <span class="n">injection_refused</span><span class="o">=</span><span class="n">injection_refused_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-490"><a href="#AsyncAgentWebSocketClient-490"><span class="linenos">490</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-491"><a href="#AsyncAgentWebSocketClient-491"><span class="linenos">491</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-492"><a href="#AsyncAgentWebSocketClient-492"><span class="linenos">492</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Close</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-493"><a href="#AsyncAgentWebSocketClient-493"><span class="linenos">493</span></a>                    <span class="n">close_result</span><span class="p">:</span> <span class="n">CloseResponse</span> <span class="o">=</span> <span class="n">CloseResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-494"><a href="#AsyncAgentWebSocketClient-494"><span class="linenos">494</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;CloseResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">close_result</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-495"><a href="#AsyncAgentWebSocketClient-495"><span class="linenos">495</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-496"><a href="#AsyncAgentWebSocketClient-496"><span class="linenos">496</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Close</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-497"><a href="#AsyncAgentWebSocketClient-497"><span class="linenos">497</span></a>                        <span class="n">close</span><span class="o">=</span><span class="n">close_result</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-498"><a href="#AsyncAgentWebSocketClient-498"><span class="linenos">498</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-499"><a href="#AsyncAgentWebSocketClient-499"><span class="linenos">499</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-500"><a href="#AsyncAgentWebSocketClient-500"><span class="linenos">500</span></a>                <span class="k">case</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-501"><a href="#AsyncAgentWebSocketClient-501"><span class="linenos">501</span></a>                    <span class="n">err_error</span><span class="p">:</span> <span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-502"><a href="#AsyncAgentWebSocketClient-502"><span class="linenos">502</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;ErrorResponse: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">err_error</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-503"><a href="#AsyncAgentWebSocketClient-503"><span class="linenos">503</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-504"><a href="#AsyncAgentWebSocketClient-504"><span class="linenos">504</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-505"><a href="#AsyncAgentWebSocketClient-505"><span class="linenos">505</span></a>                        <span class="n">error</span><span class="o">=</span><span class="n">err_error</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-506"><a href="#AsyncAgentWebSocketClient-506"><span class="linenos">506</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-507"><a href="#AsyncAgentWebSocketClient-507"><span class="linenos">507</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-508"><a href="#AsyncAgentWebSocketClient-508"><span class="linenos">508</span></a>                <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-509"><a href="#AsyncAgentWebSocketClient-509"><span class="linenos">509</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-510"><a href="#AsyncAgentWebSocketClient-510"><span class="linenos">510</span></a>                        <span class="s2">&quot;Unknown Message: response_type: </span><span class="si">%s</span><span class="s2">, data: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-511"><a href="#AsyncAgentWebSocketClient-511"><span class="linenos">511</span></a>                        <span class="n">response_type</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-512"><a href="#AsyncAgentWebSocketClient-512"><span class="linenos">512</span></a>                        <span class="n">data</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-513"><a href="#AsyncAgentWebSocketClient-513"><span class="linenos">513</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-514"><a href="#AsyncAgentWebSocketClient-514"><span class="linenos">514</span></a>                    <span class="n">unhandled_error</span><span class="p">:</span> <span class="n">UnhandledResponse</span> <span class="o">=</span> <span class="n">UnhandledResponse</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-515"><a href="#AsyncAgentWebSocketClient-515"><span class="linenos">515</span></a>                        <span class="nb">type</span><span class="o">=</span><span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Unhandled</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-516"><a href="#AsyncAgentWebSocketClient-516"><span class="linenos">516</span></a>                        <span class="n">raw</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-517"><a href="#AsyncAgentWebSocketClient-517"><span class="linenos">517</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-518"><a href="#AsyncAgentWebSocketClient-518"><span class="linenos">518</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-519"><a href="#AsyncAgentWebSocketClient-519"><span class="linenos">519</span></a>                        <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Unhandled</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-520"><a href="#AsyncAgentWebSocketClient-520"><span class="linenos">520</span></a>                        <span class="n">unhandled</span><span class="o">=</span><span class="n">unhandled_error</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-521"><a href="#AsyncAgentWebSocketClient-521"><span class="linenos">521</span></a>                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-522"><a href="#AsyncAgentWebSocketClient-522"><span class="linenos">522</span></a>                    <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-523"><a href="#AsyncAgentWebSocketClient-523"><span class="linenos">523</span></a>
</span><span id="AsyncAgentWebSocketClient-524"><a href="#AsyncAgentWebSocketClient-524"><span class="linenos">524</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;_process_text Succeeded&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-525"><a href="#AsyncAgentWebSocketClient-525"><span class="linenos">525</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._process_text LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-526"><a href="#AsyncAgentWebSocketClient-526"><span class="linenos">526</span></a>
</span><span id="AsyncAgentWebSocketClient-527"><a href="#AsyncAgentWebSocketClient-527"><span class="linenos">527</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
</span><span id="AsyncAgentWebSocketClient-528"><a href="#AsyncAgentWebSocketClient-528"><span class="linenos">528</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-529"><a href="#AsyncAgentWebSocketClient-529"><span class="linenos">529</span></a>                <span class="s2">&quot;Exception in AsyncAgentWebSocketClient._process_text: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span>
</span><span id="AsyncAgentWebSocketClient-530"><a href="#AsyncAgentWebSocketClient-530"><span class="linenos">530</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-531"><a href="#AsyncAgentWebSocketClient-531"><span class="linenos">531</span></a>            <span class="n">e_error</span><span class="p">:</span> <span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-532"><a href="#AsyncAgentWebSocketClient-532"><span class="linenos">532</span></a>                <span class="s2">&quot;Exception in AsyncAgentWebSocketClient._process_text&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-533"><a href="#AsyncAgentWebSocketClient-533"><span class="linenos">533</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-534"><a href="#AsyncAgentWebSocketClient-534"><span class="linenos">534</span></a>                <span class="s2">&quot;Exception&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-535"><a href="#AsyncAgentWebSocketClient-535"><span class="linenos">535</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-536"><a href="#AsyncAgentWebSocketClient-536"><span class="linenos">536</span></a>            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-537"><a href="#AsyncAgentWebSocketClient-537"><span class="linenos">537</span></a>                <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-538"><a href="#AsyncAgentWebSocketClient-538"><span class="linenos">538</span></a>                <span class="n">error</span><span class="o">=</span><span class="n">e_error</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-539"><a href="#AsyncAgentWebSocketClient-539"><span class="linenos">539</span></a>                <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-540"><a href="#AsyncAgentWebSocketClient-540"><span class="linenos">540</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-541"><a href="#AsyncAgentWebSocketClient-541"><span class="linenos">541</span></a>
</span><span id="AsyncAgentWebSocketClient-542"><a href="#AsyncAgentWebSocketClient-542"><span class="linenos">542</span></a>            <span class="c1"># signal exit and close</span>
</span><span id="AsyncAgentWebSocketClient-543"><a href="#AsyncAgentWebSocketClient-543"><span class="linenos">543</span></a>            <span class="k">await</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_signal_exit</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient-544"><a href="#AsyncAgentWebSocketClient-544"><span class="linenos">544</span></a>
</span><span id="AsyncAgentWebSocketClient-545"><a href="#AsyncAgentWebSocketClient-545"><span class="linenos">545</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._process_text LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-546"><a href="#AsyncAgentWebSocketClient-546"><span class="linenos">546</span></a>
</span><span id="AsyncAgentWebSocketClient-547"><a href="#AsyncAgentWebSocketClient-547"><span class="linenos">547</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;termination_exception&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-548"><a href="#AsyncAgentWebSocketClient-548"><span class="linenos">548</span></a>                <span class="k">raise</span>
</span><span id="AsyncAgentWebSocketClient-549"><a href="#AsyncAgentWebSocketClient-549"><span class="linenos">549</span></a>            <span class="k">return</span>
</span><span id="AsyncAgentWebSocketClient-550"><a href="#AsyncAgentWebSocketClient-550"><span class="linenos">550</span></a>
</span><span id="AsyncAgentWebSocketClient-551"><a href="#AsyncAgentWebSocketClient-551"><span class="linenos">551</span></a>    <span class="c1"># pylint: enable=too-many-locals,too-many-statements</span>
</span><span id="AsyncAgentWebSocketClient-552"><a href="#AsyncAgentWebSocketClient-552"><span class="linenos">552</span></a>
</span><span id="AsyncAgentWebSocketClient-553"><a href="#AsyncAgentWebSocketClient-553"><span class="linenos">553</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-554"><a href="#AsyncAgentWebSocketClient-554"><span class="linenos">554</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._process_binary ENTER&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-555"><a href="#AsyncAgentWebSocketClient-555"><span class="linenos">555</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Binary data received&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-556"><a href="#AsyncAgentWebSocketClient-556"><span class="linenos">556</span></a>
</span><span id="AsyncAgentWebSocketClient-557"><a href="#AsyncAgentWebSocketClient-557"><span class="linenos">557</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-558"><a href="#AsyncAgentWebSocketClient-558"><span class="linenos">558</span></a>            <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">AudioData</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-559"><a href="#AsyncAgentWebSocketClient-559"><span class="linenos">559</span></a>            <span class="n">data</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-560"><a href="#AsyncAgentWebSocketClient-560"><span class="linenos">560</span></a>            <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-561"><a href="#AsyncAgentWebSocketClient-561"><span class="linenos">561</span></a>        <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-562"><a href="#AsyncAgentWebSocketClient-562"><span class="linenos">562</span></a>
</span><span id="AsyncAgentWebSocketClient-563"><a href="#AsyncAgentWebSocketClient-563"><span class="linenos">563</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;_process_binary Succeeded&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-564"><a href="#AsyncAgentWebSocketClient-564"><span class="linenos">564</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._process_binary LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-565"><a href="#AsyncAgentWebSocketClient-565"><span class="linenos">565</span></a>
</span><span id="AsyncAgentWebSocketClient-566"><a href="#AsyncAgentWebSocketClient-566"><span class="linenos">566</span></a>    <span class="c1"># pylint: disable=too-many-return-statements</span>
</span><span id="AsyncAgentWebSocketClient-567"><a href="#AsyncAgentWebSocketClient-567"><span class="linenos">567</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_keep_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-568"><a href="#AsyncAgentWebSocketClient-568"><span class="linenos">568</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-569"><a href="#AsyncAgentWebSocketClient-569"><span class="linenos">569</span></a><span class="sd">        Sends keepalive messages to the WebSocket connection.</span>
</span><span id="AsyncAgentWebSocketClient-570"><a href="#AsyncAgentWebSocketClient-570"><span class="linenos">570</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-571"><a href="#AsyncAgentWebSocketClient-571"><span class="linenos">571</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._keep_alive ENTER&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-572"><a href="#AsyncAgentWebSocketClient-572"><span class="linenos">572</span></a>
</span><span id="AsyncAgentWebSocketClient-573"><a href="#AsyncAgentWebSocketClient-573"><span class="linenos">573</span></a>        <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AsyncAgentWebSocketClient-574"><a href="#AsyncAgentWebSocketClient-574"><span class="linenos">574</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-575"><a href="#AsyncAgentWebSocketClient-575"><span class="linenos">575</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-576"><a href="#AsyncAgentWebSocketClient-576"><span class="linenos">576</span></a>                <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="AsyncAgentWebSocketClient-577"><a href="#AsyncAgentWebSocketClient-577"><span class="linenos">577</span></a>                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">ONE_SECOND</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-578"><a href="#AsyncAgentWebSocketClient-578"><span class="linenos">578</span></a>
</span><span id="AsyncAgentWebSocketClient-579"><a href="#AsyncAgentWebSocketClient-579"><span class="linenos">579</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exit_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient-580"><a href="#AsyncAgentWebSocketClient-580"><span class="linenos">580</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;_keep_alive exiting gracefully&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-581"><a href="#AsyncAgentWebSocketClient-581"><span class="linenos">581</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-582"><a href="#AsyncAgentWebSocketClient-582"><span class="linenos">582</span></a>                    <span class="k">return</span>
</span><span id="AsyncAgentWebSocketClient-583"><a href="#AsyncAgentWebSocketClient-583"><span class="linenos">583</span></a>
</span><span id="AsyncAgentWebSocketClient-584"><a href="#AsyncAgentWebSocketClient-584"><span class="linenos">584</span></a>                <span class="c1"># deepgram keepalive</span>
</span><span id="AsyncAgentWebSocketClient-585"><a href="#AsyncAgentWebSocketClient-585"><span class="linenos">585</span></a>                <span class="k">if</span> <span class="n">counter</span> <span class="o">%</span> <span class="n">DEEPGRAM_INTERVAL</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-586"><a href="#AsyncAgentWebSocketClient-586"><span class="linenos">586</span></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_alive</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient-587"><a href="#AsyncAgentWebSocketClient-587"><span class="linenos">587</span></a>
</span><span id="AsyncAgentWebSocketClient-588"><a href="#AsyncAgentWebSocketClient-588"><span class="linenos">588</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
</span><span id="AsyncAgentWebSocketClient-589"><a href="#AsyncAgentWebSocketClient-589"><span class="linenos">589</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-590"><a href="#AsyncAgentWebSocketClient-590"><span class="linenos">590</span></a>                    <span class="s2">&quot;Exception in AsyncAgentWebSocketClient._keep_alive: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span>
</span><span id="AsyncAgentWebSocketClient-591"><a href="#AsyncAgentWebSocketClient-591"><span class="linenos">591</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-592"><a href="#AsyncAgentWebSocketClient-592"><span class="linenos">592</span></a>                <span class="n">e_error</span><span class="p">:</span> <span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-593"><a href="#AsyncAgentWebSocketClient-593"><span class="linenos">593</span></a>                    <span class="s2">&quot;Exception in AsyncAgentWebSocketClient._keep_alive&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-594"><a href="#AsyncAgentWebSocketClient-594"><span class="linenos">594</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-595"><a href="#AsyncAgentWebSocketClient-595"><span class="linenos">595</span></a>                    <span class="s2">&quot;Exception&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-596"><a href="#AsyncAgentWebSocketClient-596"><span class="linenos">596</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-597"><a href="#AsyncAgentWebSocketClient-597"><span class="linenos">597</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-598"><a href="#AsyncAgentWebSocketClient-598"><span class="linenos">598</span></a>                    <span class="s2">&quot;Exception in AsyncAgentWebSocketClient._keep_alive: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-599"><a href="#AsyncAgentWebSocketClient-599"><span class="linenos">599</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-600"><a href="#AsyncAgentWebSocketClient-600"><span class="linenos">600</span></a>                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient-601"><a href="#AsyncAgentWebSocketClient-601"><span class="linenos">601</span></a>                    <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient-602"><a href="#AsyncAgentWebSocketClient-602"><span class="linenos">602</span></a>                    <span class="n">error</span><span class="o">=</span><span class="n">e_error</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient-603"><a href="#AsyncAgentWebSocketClient-603"><span class="linenos">603</span></a>                    <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient-604"><a href="#AsyncAgentWebSocketClient-604"><span class="linenos">604</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-605"><a href="#AsyncAgentWebSocketClient-605"><span class="linenos">605</span></a>
</span><span id="AsyncAgentWebSocketClient-606"><a href="#AsyncAgentWebSocketClient-606"><span class="linenos">606</span></a>                <span class="c1"># signal exit and close</span>
</span><span id="AsyncAgentWebSocketClient-607"><a href="#AsyncAgentWebSocketClient-607"><span class="linenos">607</span></a>                <span class="k">await</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_signal_exit</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient-608"><a href="#AsyncAgentWebSocketClient-608"><span class="linenos">608</span></a>
</span><span id="AsyncAgentWebSocketClient-609"><a href="#AsyncAgentWebSocketClient-609"><span class="linenos">609</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient._keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-610"><a href="#AsyncAgentWebSocketClient-610"><span class="linenos">610</span></a>
</span><span id="AsyncAgentWebSocketClient-611"><a href="#AsyncAgentWebSocketClient-611"><span class="linenos">611</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;termination_exception&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-612"><a href="#AsyncAgentWebSocketClient-612"><span class="linenos">612</span></a>                    <span class="k">raise</span>
</span><span id="AsyncAgentWebSocketClient-613"><a href="#AsyncAgentWebSocketClient-613"><span class="linenos">613</span></a>                <span class="k">return</span>
</span><span id="AsyncAgentWebSocketClient-614"><a href="#AsyncAgentWebSocketClient-614"><span class="linenos">614</span></a>
</span><span id="AsyncAgentWebSocketClient-615"><a href="#AsyncAgentWebSocketClient-615"><span class="linenos">615</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">keep_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-616"><a href="#AsyncAgentWebSocketClient-616"><span class="linenos">616</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-617"><a href="#AsyncAgentWebSocketClient-617"><span class="linenos">617</span></a><span class="sd">        Sends a KeepAlive message</span>
</span><span id="AsyncAgentWebSocketClient-618"><a href="#AsyncAgentWebSocketClient-618"><span class="linenos">618</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-619"><a href="#AsyncAgentWebSocketClient-619"><span class="linenos">619</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.keep_alive ENTER&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-620"><a href="#AsyncAgentWebSocketClient-620"><span class="linenos">620</span></a>
</span><span id="AsyncAgentWebSocketClient-621"><a href="#AsyncAgentWebSocketClient-621"><span class="linenos">621</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;Sending KeepAlive...&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-622"><a href="#AsyncAgentWebSocketClient-622"><span class="linenos">622</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;KeepAlive&quot;</span><span class="p">}))</span>
</span><span id="AsyncAgentWebSocketClient-623"><a href="#AsyncAgentWebSocketClient-623"><span class="linenos">623</span></a>
</span><span id="AsyncAgentWebSocketClient-624"><a href="#AsyncAgentWebSocketClient-624"><span class="linenos">624</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">ret</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-625"><a href="#AsyncAgentWebSocketClient-625"><span class="linenos">625</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;keep_alive failed&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-626"><a href="#AsyncAgentWebSocketClient-626"><span class="linenos">626</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-627"><a href="#AsyncAgentWebSocketClient-627"><span class="linenos">627</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient-628"><a href="#AsyncAgentWebSocketClient-628"><span class="linenos">628</span></a>
</span><span id="AsyncAgentWebSocketClient-629"><a href="#AsyncAgentWebSocketClient-629"><span class="linenos">629</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keep_alive succeeded&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-630"><a href="#AsyncAgentWebSocketClient-630"><span class="linenos">630</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-631"><a href="#AsyncAgentWebSocketClient-631"><span class="linenos">631</span></a>
</span><span id="AsyncAgentWebSocketClient-632"><a href="#AsyncAgentWebSocketClient-632"><span class="linenos">632</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="AsyncAgentWebSocketClient-633"><a href="#AsyncAgentWebSocketClient-633"><span class="linenos">633</span></a>
</span><span id="AsyncAgentWebSocketClient-634"><a href="#AsyncAgentWebSocketClient-634"><span class="linenos">634</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_close_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-635"><a href="#AsyncAgentWebSocketClient-635"><span class="linenos">635</span></a>        <span class="c1"># TODO: No known API close message # pylint: disable=fixme</span>
</span><span id="AsyncAgentWebSocketClient-636"><a href="#AsyncAgentWebSocketClient-636"><span class="linenos">636</span></a>        <span class="c1"># return await self.send(json.dumps({&quot;type&quot;: &quot;Close&quot;}))</span>
</span><span id="AsyncAgentWebSocketClient-637"><a href="#AsyncAgentWebSocketClient-637"><span class="linenos">637</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="AsyncAgentWebSocketClient-638"><a href="#AsyncAgentWebSocketClient-638"><span class="linenos">638</span></a>
</span><span id="AsyncAgentWebSocketClient-639"><a href="#AsyncAgentWebSocketClient-639"><span class="linenos">639</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">finish</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-640"><a href="#AsyncAgentWebSocketClient-640"><span class="linenos">640</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-641"><a href="#AsyncAgentWebSocketClient-641"><span class="linenos">641</span></a><span class="sd">        Closes the WebSocket connection gracefully.</span>
</span><span id="AsyncAgentWebSocketClient-642"><a href="#AsyncAgentWebSocketClient-642"><span class="linenos">642</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient-643"><a href="#AsyncAgentWebSocketClient-643"><span class="linenos">643</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.finish ENTER&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-644"><a href="#AsyncAgentWebSocketClient-644"><span class="linenos">644</span></a>
</span><span id="AsyncAgentWebSocketClient-645"><a href="#AsyncAgentWebSocketClient-645"><span class="linenos">645</span></a>        <span class="c1"># stop the threads</span>
</span><span id="AsyncAgentWebSocketClient-646"><a href="#AsyncAgentWebSocketClient-646"><span class="linenos">646</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;cancelling tasks...&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-647"><a href="#AsyncAgentWebSocketClient-647"><span class="linenos">647</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-648"><a href="#AsyncAgentWebSocketClient-648"><span class="linenos">648</span></a>            <span class="c1"># call parent finish</span>
</span><span id="AsyncAgentWebSocketClient-649"><a href="#AsyncAgentWebSocketClient-649"><span class="linenos">649</span></a>            <span class="k">if</span> <span class="k">await</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-650"><a href="#AsyncAgentWebSocketClient-650"><span class="linenos">650</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.finish failed&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-651"><a href="#AsyncAgentWebSocketClient-651"><span class="linenos">651</span></a>
</span><span id="AsyncAgentWebSocketClient-652"><a href="#AsyncAgentWebSocketClient-652"><span class="linenos">652</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-653"><a href="#AsyncAgentWebSocketClient-653"><span class="linenos">653</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient-654"><a href="#AsyncAgentWebSocketClient-654"><span class="linenos">654</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient-655"><a href="#AsyncAgentWebSocketClient-655"><span class="linenos">655</span></a>
</span><span id="AsyncAgentWebSocketClient-656"><a href="#AsyncAgentWebSocketClient-656"><span class="linenos">656</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-657"><a href="#AsyncAgentWebSocketClient-657"><span class="linenos">657</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient-658"><a href="#AsyncAgentWebSocketClient-658"><span class="linenos">658</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient-659"><a href="#AsyncAgentWebSocketClient-659"><span class="linenos">659</span></a>
</span><span id="AsyncAgentWebSocketClient-660"><a href="#AsyncAgentWebSocketClient-660"><span class="linenos">660</span></a>            <span class="c1"># Before cancelling, check if the tasks were created</span>
</span><span id="AsyncAgentWebSocketClient-661"><a href="#AsyncAgentWebSocketClient-661"><span class="linenos">661</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AsyncAgentWebSocketClient-662"><a href="#AsyncAgentWebSocketClient-662"><span class="linenos">662</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient-663"><a href="#AsyncAgentWebSocketClient-663"><span class="linenos">663</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;before running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-664"><a href="#AsyncAgentWebSocketClient-664"><span class="linenos">664</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient-665"><a href="#AsyncAgentWebSocketClient-665"><span class="linenos">665</span></a>
</span><span id="AsyncAgentWebSocketClient-666"><a href="#AsyncAgentWebSocketClient-666"><span class="linenos">666</span></a>            <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AsyncAgentWebSocketClient-667"><a href="#AsyncAgentWebSocketClient-667"><span class="linenos">667</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-668"><a href="#AsyncAgentWebSocketClient-668"><span class="linenos">668</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient-669"><a href="#AsyncAgentWebSocketClient-669"><span class="linenos">669</span></a>                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-670"><a href="#AsyncAgentWebSocketClient-670"><span class="linenos">670</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;processing _keep_alive_thread cancel...&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-671"><a href="#AsyncAgentWebSocketClient-671"><span class="linenos">671</span></a>
</span><span id="AsyncAgentWebSocketClient-672"><a href="#AsyncAgentWebSocketClient-672"><span class="linenos">672</span></a>            <span class="c1"># Use asyncio.gather to wait for tasks to be cancelled</span>
</span><span id="AsyncAgentWebSocketClient-673"><a href="#AsyncAgentWebSocketClient-673"><span class="linenos">673</span></a>            <span class="c1"># Prevent indefinite waiting by setting a timeout</span>
</span><span id="AsyncAgentWebSocketClient-674"><a href="#AsyncAgentWebSocketClient-674"><span class="linenos">674</span></a>            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">),</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-675"><a href="#AsyncAgentWebSocketClient-675"><span class="linenos">675</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;threads joined&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-676"><a href="#AsyncAgentWebSocketClient-676"><span class="linenos">676</span></a>
</span><span id="AsyncAgentWebSocketClient-677"><a href="#AsyncAgentWebSocketClient-677"><span class="linenos">677</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient-678"><a href="#AsyncAgentWebSocketClient-678"><span class="linenos">678</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient-679"><a href="#AsyncAgentWebSocketClient-679"><span class="linenos">679</span></a>
</span><span id="AsyncAgentWebSocketClient-680"><a href="#AsyncAgentWebSocketClient-680"><span class="linenos">680</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AsyncAgentWebSocketClient-681"><a href="#AsyncAgentWebSocketClient-681"><span class="linenos">681</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient-682"><a href="#AsyncAgentWebSocketClient-682"><span class="linenos">682</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-683"><a href="#AsyncAgentWebSocketClient-683"><span class="linenos">683</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient-684"><a href="#AsyncAgentWebSocketClient-684"><span class="linenos">684</span></a>
</span><span id="AsyncAgentWebSocketClient-685"><a href="#AsyncAgentWebSocketClient-685"><span class="linenos">685</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;finish succeeded&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-686"><a href="#AsyncAgentWebSocketClient-686"><span class="linenos">686</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.finish LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-687"><a href="#AsyncAgentWebSocketClient-687"><span class="linenos">687</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="AsyncAgentWebSocketClient-688"><a href="#AsyncAgentWebSocketClient-688"><span class="linenos">688</span></a>
</span><span id="AsyncAgentWebSocketClient-689"><a href="#AsyncAgentWebSocketClient-689"><span class="linenos">689</span></a>        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-690"><a href="#AsyncAgentWebSocketClient-690"><span class="linenos">690</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;tasks cancelled error: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-691"><a href="#AsyncAgentWebSocketClient-691"><span class="linenos">691</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.finish LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-692"><a href="#AsyncAgentWebSocketClient-692"><span class="linenos">692</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient-693"><a href="#AsyncAgentWebSocketClient-693"><span class="linenos">693</span></a>
</span><span id="AsyncAgentWebSocketClient-694"><a href="#AsyncAgentWebSocketClient-694"><span class="linenos">694</span></a>        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient-695"><a href="#AsyncAgentWebSocketClient-695"><span class="linenos">695</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;tasks cancellation timed out: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-696"><a href="#AsyncAgentWebSocketClient-696"><span class="linenos">696</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.finish LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient-697"><a href="#AsyncAgentWebSocketClient-697"><span class="linenos">697</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Client for interacting with Deepgram's live transcription services over WebSockets.</p>

<p>This class provides methods to establish a WebSocket connection for live transcription and handle real-time transcription events.</p>

<p>Args:
     config (DeepgramClientOptions): all the options for the client.</p>
</div>


                            <div id="AsyncAgentWebSocketClient.__init__" class="classattr">
                                        <input id="AsyncAgentWebSocketClient.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AsyncAgentWebSocketClient</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">config</span><span class="p">:</span> <span class="n"><a href="../../options.html#DeepgramClientOptions">deepgram.options.DeepgramClientOptions</a></span></span>)</span>

                <label class="view-source-button" for="AsyncAgentWebSocketClient.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AsyncAgentWebSocketClient.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AsyncAgentWebSocketClient.__init__-91"><a href="#AsyncAgentWebSocketClient.__init__-91"><span class="linenos"> 91</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">DeepgramClientOptions</span><span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient.__init__-92"><a href="#AsyncAgentWebSocketClient.__init__-92"><span class="linenos"> 92</span></a>        <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.__init__-93"><a href="#AsyncAgentWebSocketClient.__init__-93"><span class="linenos"> 93</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Config is required&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-94"><a href="#AsyncAgentWebSocketClient.__init__-94"><span class="linenos"> 94</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-95"><a href="#AsyncAgentWebSocketClient.__init__-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">verboselogs</span><span class="o">.</span><span class="n">VerboseLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-96"><a href="#AsyncAgentWebSocketClient.__init__-96"><span class="linenos"> 96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient.__init__-97"><a href="#AsyncAgentWebSocketClient.__init__-97"><span class="linenos"> 97</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">verbose</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-98"><a href="#AsyncAgentWebSocketClient.__init__-98"><span class="linenos"> 98</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-99"><a href="#AsyncAgentWebSocketClient.__init__-99"><span class="linenos"> 99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
</span><span id="AsyncAgentWebSocketClient.__init__-100"><a href="#AsyncAgentWebSocketClient.__init__-100"><span class="linenos">100</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-101"><a href="#AsyncAgentWebSocketClient.__init__-101"><span class="linenos">101</span></a>        <span class="c1"># needs to be &quot;wss://agent.deepgram.com/agent&quot;</span>
</span><span id="AsyncAgentWebSocketClient.__init__-102"><a href="#AsyncAgentWebSocketClient.__init__-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span> <span class="o">=</span> <span class="s2">&quot;agent&quot;</span>
</span><span id="AsyncAgentWebSocketClient.__init__-103"><a href="#AsyncAgentWebSocketClient.__init__-103"><span class="linenos">103</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-104"><a href="#AsyncAgentWebSocketClient.__init__-104"><span class="linenos">104</span></a>        <span class="c1"># override the endpoint since it needs to be &quot;wss://agent.deepgram.com/agent&quot;</span>
</span><span id="AsyncAgentWebSocketClient.__init__-105"><a href="#AsyncAgentWebSocketClient.__init__-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;agent.deepgram.com&quot;</span>
</span><span id="AsyncAgentWebSocketClient.__init__-106"><a href="#AsyncAgentWebSocketClient.__init__-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient.__init__-107"><a href="#AsyncAgentWebSocketClient.__init__-107"><span class="linenos">107</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-108"><a href="#AsyncAgentWebSocketClient.__init__-108"><span class="linenos">108</span></a>        <span class="c1"># init handlers</span>
</span><span id="AsyncAgentWebSocketClient.__init__-109"><a href="#AsyncAgentWebSocketClient.__init__-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_event_handlers</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AsyncAgentWebSocketClient.__init__-110"><a href="#AsyncAgentWebSocketClient.__init__-110"><span class="linenos">110</span></a>            <span class="n">event</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient.__init__-111"><a href="#AsyncAgentWebSocketClient.__init__-111"><span class="linenos">111</span></a>        <span class="p">}</span>
</span><span id="AsyncAgentWebSocketClient.__init__-112"><a href="#AsyncAgentWebSocketClient.__init__-112"><span class="linenos">112</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-113"><a href="#AsyncAgentWebSocketClient.__init__-113"><span class="linenos">113</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.__init__-114"><a href="#AsyncAgentWebSocketClient.__init__-114"><span class="linenos">114</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;microphone_record is enabled&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-115"><a href="#AsyncAgentWebSocketClient.__init__-115"><span class="linenos">115</span></a>            <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record_rate&quot;</span><span class="p">,</span> <span class="n">MICROPHONE_RATE</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-116"><a href="#AsyncAgentWebSocketClient.__init__-116"><span class="linenos">116</span></a>            <span class="n">channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.__init__-117"><a href="#AsyncAgentWebSocketClient.__init__-117"><span class="linenos">117</span></a>                <span class="s2">&quot;microphone_record_channels&quot;</span><span class="p">,</span> <span class="n">MICROPHONE_CHANNELS</span>
</span><span id="AsyncAgentWebSocketClient.__init__-118"><a href="#AsyncAgentWebSocketClient.__init__-118"><span class="linenos">118</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-119"><a href="#AsyncAgentWebSocketClient.__init__-119"><span class="linenos">119</span></a>            <span class="n">device_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;microphone_record_device_index&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-120"><a href="#AsyncAgentWebSocketClient.__init__-120"><span class="linenos">120</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-121"><a href="#AsyncAgentWebSocketClient.__init__-121"><span class="linenos">121</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;rate: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">rate</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-122"><a href="#AsyncAgentWebSocketClient.__init__-122"><span class="linenos">122</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;channels: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-123"><a href="#AsyncAgentWebSocketClient.__init__-123"><span class="linenos">123</span></a>            <span class="k">if</span> <span class="n">device_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.__init__-124"><a href="#AsyncAgentWebSocketClient.__init__-124"><span class="linenos">124</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;device_index: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">device_index</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-125"><a href="#AsyncAgentWebSocketClient.__init__-125"><span class="linenos">125</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-126"><a href="#AsyncAgentWebSocketClient.__init__-126"><span class="linenos">126</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AsyncAgentWebSocketClient.__init__-127"><a href="#AsyncAgentWebSocketClient.__init__-127"><span class="linenos">127</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-128"><a href="#AsyncAgentWebSocketClient.__init__-128"><span class="linenos">128</span></a>            <span class="k">if</span> <span class="n">device_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.__init__-129"><a href="#AsyncAgentWebSocketClient.__init__-129"><span class="linenos">129</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="n">Microphone</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.__init__-130"><a href="#AsyncAgentWebSocketClient.__init__-130"><span class="linenos">130</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-131"><a href="#AsyncAgentWebSocketClient.__init__-131"><span class="linenos">131</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-132"><a href="#AsyncAgentWebSocketClient.__init__-132"><span class="linenos">132</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-133"><a href="#AsyncAgentWebSocketClient.__init__-133"><span class="linenos">133</span></a>                    <span class="n">input_device_index</span><span class="o">=</span><span class="n">device_index</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-134"><a href="#AsyncAgentWebSocketClient.__init__-134"><span class="linenos">134</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-135"><a href="#AsyncAgentWebSocketClient.__init__-135"><span class="linenos">135</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.__init__-136"><a href="#AsyncAgentWebSocketClient.__init__-136"><span class="linenos">136</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="n">Microphone</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.__init__-137"><a href="#AsyncAgentWebSocketClient.__init__-137"><span class="linenos">137</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-138"><a href="#AsyncAgentWebSocketClient.__init__-138"><span class="linenos">138</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-139"><a href="#AsyncAgentWebSocketClient.__init__-139"><span class="linenos">139</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-140"><a href="#AsyncAgentWebSocketClient.__init__-140"><span class="linenos">140</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-141"><a href="#AsyncAgentWebSocketClient.__init__-141"><span class="linenos">141</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-142"><a href="#AsyncAgentWebSocketClient.__init__-142"><span class="linenos">142</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.__init__-143"><a href="#AsyncAgentWebSocketClient.__init__-143"><span class="linenos">143</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;speaker_playback is enabled&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-144"><a href="#AsyncAgentWebSocketClient.__init__-144"><span class="linenos">144</span></a>            <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback_rate&quot;</span><span class="p">,</span> <span class="n">SPEAKER_RATE</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-145"><a href="#AsyncAgentWebSocketClient.__init__-145"><span class="linenos">145</span></a>            <span class="n">channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.__init__-146"><a href="#AsyncAgentWebSocketClient.__init__-146"><span class="linenos">146</span></a>                <span class="s2">&quot;speaker_playback_channels&quot;</span><span class="p">,</span> <span class="n">SPEAKER_CHANNELS</span>
</span><span id="AsyncAgentWebSocketClient.__init__-147"><a href="#AsyncAgentWebSocketClient.__init__-147"><span class="linenos">147</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-148"><a href="#AsyncAgentWebSocketClient.__init__-148"><span class="linenos">148</span></a>            <span class="n">playback_delta_in_ms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.__init__-149"><a href="#AsyncAgentWebSocketClient.__init__-149"><span class="linenos">149</span></a>                <span class="s2">&quot;speaker_playback_delta_in_ms&quot;</span><span class="p">,</span> <span class="n">SPEAKER_PLAYBACK_DELTA</span>
</span><span id="AsyncAgentWebSocketClient.__init__-150"><a href="#AsyncAgentWebSocketClient.__init__-150"><span class="linenos">150</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-151"><a href="#AsyncAgentWebSocketClient.__init__-151"><span class="linenos">151</span></a>            <span class="n">device_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;speaker_playback_device_index&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-152"><a href="#AsyncAgentWebSocketClient.__init__-152"><span class="linenos">152</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-153"><a href="#AsyncAgentWebSocketClient.__init__-153"><span class="linenos">153</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;rate: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">rate</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-154"><a href="#AsyncAgentWebSocketClient.__init__-154"><span class="linenos">154</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;channels: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">channels</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-155"><a href="#AsyncAgentWebSocketClient.__init__-155"><span class="linenos">155</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-156"><a href="#AsyncAgentWebSocketClient.__init__-156"><span class="linenos">156</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AsyncAgentWebSocketClient.__init__-157"><a href="#AsyncAgentWebSocketClient.__init__-157"><span class="linenos">157</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-158"><a href="#AsyncAgentWebSocketClient.__init__-158"><span class="linenos">158</span></a>            <span class="k">if</span> <span class="n">device_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.__init__-159"><a href="#AsyncAgentWebSocketClient.__init__-159"><span class="linenos">159</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;device_index: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">device_index</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-160"><a href="#AsyncAgentWebSocketClient.__init__-160"><span class="linenos">160</span></a>
</span><span id="AsyncAgentWebSocketClient.__init__-161"><a href="#AsyncAgentWebSocketClient.__init__-161"><span class="linenos">161</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="n">Speaker</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.__init__-162"><a href="#AsyncAgentWebSocketClient.__init__-162"><span class="linenos">162</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-163"><a href="#AsyncAgentWebSocketClient.__init__-163"><span class="linenos">163</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-164"><a href="#AsyncAgentWebSocketClient.__init__-164"><span class="linenos">164</span></a>                    <span class="n">last_play_delta_in_ms</span><span class="o">=</span><span class="n">playback_delta_in_ms</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-165"><a href="#AsyncAgentWebSocketClient.__init__-165"><span class="linenos">165</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-166"><a href="#AsyncAgentWebSocketClient.__init__-166"><span class="linenos">166</span></a>                    <span class="n">output_device_index</span><span class="o">=</span><span class="n">device_index</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-167"><a href="#AsyncAgentWebSocketClient.__init__-167"><span class="linenos">167</span></a>                    <span class="n">microphone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-168"><a href="#AsyncAgentWebSocketClient.__init__-168"><span class="linenos">168</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-169"><a href="#AsyncAgentWebSocketClient.__init__-169"><span class="linenos">169</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.__init__-170"><a href="#AsyncAgentWebSocketClient.__init__-170"><span class="linenos">170</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="n">Speaker</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.__init__-171"><a href="#AsyncAgentWebSocketClient.__init__-171"><span class="linenos">171</span></a>                    <span class="n">rate</span><span class="o">=</span><span class="n">rate</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-172"><a href="#AsyncAgentWebSocketClient.__init__-172"><span class="linenos">172</span></a>                    <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-173"><a href="#AsyncAgentWebSocketClient.__init__-173"><span class="linenos">173</span></a>                    <span class="n">last_play_delta_in_ms</span><span class="o">=</span><span class="n">playback_delta_in_ms</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-174"><a href="#AsyncAgentWebSocketClient.__init__-174"><span class="linenos">174</span></a>                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-175"><a href="#AsyncAgentWebSocketClient.__init__-175"><span class="linenos">175</span></a>                    <span class="n">microphone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.__init__-176"><a href="#AsyncAgentWebSocketClient.__init__-176"><span class="linenos">176</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.__init__-177"><a href="#AsyncAgentWebSocketClient.__init__-177"><span class="linenos">177</span></a>        <span class="c1"># call the parent constructor</span>
</span><span id="AsyncAgentWebSocketClient.__init__-178"><a href="#AsyncAgentWebSocketClient.__init__-178"><span class="linenos">178</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endpoint</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AsyncAgentWebSocketClient.start" class="classattr">
                                        <input id="AsyncAgentWebSocketClient.start-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">start</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#SettingsConfigurationOptions">SettingsConfigurationOptions</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">addons</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">members</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="AsyncAgentWebSocketClient.start-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AsyncAgentWebSocketClient.start"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AsyncAgentWebSocketClient.start-181"><a href="#AsyncAgentWebSocketClient.start-181"><span class="linenos">181</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.start-182"><a href="#AsyncAgentWebSocketClient.start-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-183"><a href="#AsyncAgentWebSocketClient.start-183"><span class="linenos">183</span></a>        <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SettingsConfigurationOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-184"><a href="#AsyncAgentWebSocketClient.start-184"><span class="linenos">184</span></a>        <span class="n">addons</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-185"><a href="#AsyncAgentWebSocketClient.start-185"><span class="linenos">185</span></a>        <span class="n">headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-186"><a href="#AsyncAgentWebSocketClient.start-186"><span class="linenos">186</span></a>        <span class="n">members</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-187"><a href="#AsyncAgentWebSocketClient.start-187"><span class="linenos">187</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-188"><a href="#AsyncAgentWebSocketClient.start-188"><span class="linenos">188</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-189"><a href="#AsyncAgentWebSocketClient.start-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient.start-190"><a href="#AsyncAgentWebSocketClient.start-190"><span class="linenos">190</span></a><span class="sd">        Starts the WebSocket connection for agent API.</span>
</span><span id="AsyncAgentWebSocketClient.start-191"><a href="#AsyncAgentWebSocketClient.start-191"><span class="linenos">191</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient.start-192"><a href="#AsyncAgentWebSocketClient.start-192"><span class="linenos">192</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start ENTER&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-193"><a href="#AsyncAgentWebSocketClient.start-193"><span class="linenos">193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;settings: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-194"><a href="#AsyncAgentWebSocketClient.start-194"><span class="linenos">194</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;addons: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">addons</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-195"><a href="#AsyncAgentWebSocketClient.start-195"><span class="linenos">195</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;headers: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-196"><a href="#AsyncAgentWebSocketClient.start-196"><span class="linenos">196</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;members: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">members</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-197"><a href="#AsyncAgentWebSocketClient.start-197"><span class="linenos">197</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;kwargs: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-198"><a href="#AsyncAgentWebSocketClient.start-198"><span class="linenos">198</span></a>
</span><span id="AsyncAgentWebSocketClient.start-199"><a href="#AsyncAgentWebSocketClient.start-199"><span class="linenos">199</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">SettingsConfigurationOptions</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">options</span><span class="o">.</span><span class="n">check</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient.start-200"><a href="#AsyncAgentWebSocketClient.start-200"><span class="linenos">200</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;settings.check failed&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-201"><a href="#AsyncAgentWebSocketClient.start-201"><span class="linenos">201</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-202"><a href="#AsyncAgentWebSocketClient.start-202"><span class="linenos">202</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Fatal agent settings error&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-203"><a href="#AsyncAgentWebSocketClient.start-203"><span class="linenos">203</span></a>
</span><span id="AsyncAgentWebSocketClient.start-204"><a href="#AsyncAgentWebSocketClient.start-204"><span class="linenos">204</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_addons</span> <span class="o">=</span> <span class="n">addons</span>
</span><span id="AsyncAgentWebSocketClient.start-205"><a href="#AsyncAgentWebSocketClient.start-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="n">headers</span>
</span><span id="AsyncAgentWebSocketClient.start-206"><a href="#AsyncAgentWebSocketClient.start-206"><span class="linenos">206</span></a>
</span><span id="AsyncAgentWebSocketClient.start-207"><a href="#AsyncAgentWebSocketClient.start-207"><span class="linenos">207</span></a>        <span class="c1"># add &quot;members&quot; as members of the class</span>
</span><span id="AsyncAgentWebSocketClient.start-208"><a href="#AsyncAgentWebSocketClient.start-208"><span class="linenos">208</span></a>        <span class="k">if</span> <span class="n">members</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-209"><a href="#AsyncAgentWebSocketClient.start-209"><span class="linenos">209</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">members</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-210"><a href="#AsyncAgentWebSocketClient.start-210"><span class="linenos">210</span></a>
</span><span id="AsyncAgentWebSocketClient.start-211"><a href="#AsyncAgentWebSocketClient.start-211"><span class="linenos">211</span></a>        <span class="c1"># set kwargs as members of the class</span>
</span><span id="AsyncAgentWebSocketClient.start-212"><a href="#AsyncAgentWebSocketClient.start-212"><span class="linenos">212</span></a>        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-213"><a href="#AsyncAgentWebSocketClient.start-213"><span class="linenos">213</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
</span><span id="AsyncAgentWebSocketClient.start-214"><a href="#AsyncAgentWebSocketClient.start-214"><span class="linenos">214</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-215"><a href="#AsyncAgentWebSocketClient.start-215"><span class="linenos">215</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="AsyncAgentWebSocketClient.start-216"><a href="#AsyncAgentWebSocketClient.start-216"><span class="linenos">216</span></a>
</span><span id="AsyncAgentWebSocketClient.start-217"><a href="#AsyncAgentWebSocketClient.start-217"><span class="linenos">217</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">SettingsConfigurationOptions</span><span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient.start-218"><a href="#AsyncAgentWebSocketClient.start-218"><span class="linenos">218</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is class&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-219"><a href="#AsyncAgentWebSocketClient.start-219"><span class="linenos">219</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="AsyncAgentWebSocketClient.start-220"><a href="#AsyncAgentWebSocketClient.start-220"><span class="linenos">220</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient.start-221"><a href="#AsyncAgentWebSocketClient.start-221"><span class="linenos">221</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is dict&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-222"><a href="#AsyncAgentWebSocketClient.start-222"><span class="linenos">222</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">SettingsConfigurationOptions</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-223"><a href="#AsyncAgentWebSocketClient.start-223"><span class="linenos">223</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient.start-224"><a href="#AsyncAgentWebSocketClient.start-224"><span class="linenos">224</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;options is json&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-225"><a href="#AsyncAgentWebSocketClient.start-225"><span class="linenos">225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">SettingsConfigurationOptions</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-226"><a href="#AsyncAgentWebSocketClient.start-226"><span class="linenos">226</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-227"><a href="#AsyncAgentWebSocketClient.start-227"><span class="linenos">227</span></a>            <span class="k">raise</span> <span class="n">DeepgramError</span><span class="p">(</span><span class="s2">&quot;Invalid options type&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-228"><a href="#AsyncAgentWebSocketClient.start-228"><span class="linenos">228</span></a>
</span><span id="AsyncAgentWebSocketClient.start-229"><a href="#AsyncAgentWebSocketClient.start-229"><span class="linenos">229</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-230"><a href="#AsyncAgentWebSocketClient.start-230"><span class="linenos">230</span></a>            <span class="c1"># speaker substitutes the listening thread</span>
</span><span id="AsyncAgentWebSocketClient.start-231"><a href="#AsyncAgentWebSocketClient.start-231"><span class="linenos">231</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-232"><a href="#AsyncAgentWebSocketClient.start-232"><span class="linenos">232</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;passing speaker to delegate_listening&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-233"><a href="#AsyncAgentWebSocketClient.start-233"><span class="linenos">233</span></a>                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">delegate_listening</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-234"><a href="#AsyncAgentWebSocketClient.start-234"><span class="linenos">234</span></a>
</span><span id="AsyncAgentWebSocketClient.start-235"><a href="#AsyncAgentWebSocketClient.start-235"><span class="linenos">235</span></a>            <span class="c1"># call parent start</span>
</span><span id="AsyncAgentWebSocketClient.start-236"><a href="#AsyncAgentWebSocketClient.start-236"><span class="linenos">236</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.start-237"><a href="#AsyncAgentWebSocketClient.start-237"><span class="linenos">237</span></a>                <span class="k">await</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.start-238"><a href="#AsyncAgentWebSocketClient.start-238"><span class="linenos">238</span></a>                    <span class="p">{},</span>
</span><span id="AsyncAgentWebSocketClient.start-239"><a href="#AsyncAgentWebSocketClient.start-239"><span class="linenos">239</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_addons</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-240"><a href="#AsyncAgentWebSocketClient.start-240"><span class="linenos">240</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-241"><a href="#AsyncAgentWebSocketClient.start-241"><span class="linenos">241</span></a>                    <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient.start-242"><a href="#AsyncAgentWebSocketClient.start-242"><span class="linenos">242</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-243"><a href="#AsyncAgentWebSocketClient.start-243"><span class="linenos">243</span></a>                <span class="ow">is</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient.start-244"><a href="#AsyncAgentWebSocketClient.start-244"><span class="linenos">244</span></a>            <span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient.start-245"><a href="#AsyncAgentWebSocketClient.start-245"><span class="linenos">245</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start failed&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-246"><a href="#AsyncAgentWebSocketClient.start-246"><span class="linenos">246</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-247"><a href="#AsyncAgentWebSocketClient.start-247"><span class="linenos">247</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient.start-248"><a href="#AsyncAgentWebSocketClient.start-248"><span class="linenos">248</span></a>
</span><span id="AsyncAgentWebSocketClient.start-249"><a href="#AsyncAgentWebSocketClient.start-249"><span class="linenos">249</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-250"><a href="#AsyncAgentWebSocketClient.start-250"><span class="linenos">250</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;speaker is delegate_listening. Starting speaker&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-251"><a href="#AsyncAgentWebSocketClient.start-251"><span class="linenos">251</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient.start-252"><a href="#AsyncAgentWebSocketClient.start-252"><span class="linenos">252</span></a>
</span><span id="AsyncAgentWebSocketClient.start-253"><a href="#AsyncAgentWebSocketClient.start-253"><span class="linenos">253</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-254"><a href="#AsyncAgentWebSocketClient.start-254"><span class="linenos">254</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.start-255"><a href="#AsyncAgentWebSocketClient.start-255"><span class="linenos">255</span></a>                    <span class="s2">&quot;speaker is delegate_listening. Starting microphone&quot;</span>
</span><span id="AsyncAgentWebSocketClient.start-256"><a href="#AsyncAgentWebSocketClient.start-256"><span class="linenos">256</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-257"><a href="#AsyncAgentWebSocketClient.start-257"><span class="linenos">257</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">set_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-258"><a href="#AsyncAgentWebSocketClient.start-258"><span class="linenos">258</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient.start-259"><a href="#AsyncAgentWebSocketClient.start-259"><span class="linenos">259</span></a>
</span><span id="AsyncAgentWebSocketClient.start-260"><a href="#AsyncAgentWebSocketClient.start-260"><span class="linenos">260</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AsyncAgentWebSocketClient.start-261"><a href="#AsyncAgentWebSocketClient.start-261"><span class="linenos">261</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient.start-262"><a href="#AsyncAgentWebSocketClient.start-262"><span class="linenos">262</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-263"><a href="#AsyncAgentWebSocketClient.start-263"><span class="linenos">263</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient.start-264"><a href="#AsyncAgentWebSocketClient.start-264"><span class="linenos">264</span></a>
</span><span id="AsyncAgentWebSocketClient.start-265"><a href="#AsyncAgentWebSocketClient.start-265"><span class="linenos">265</span></a>            <span class="c1"># keepalive thread</span>
</span><span id="AsyncAgentWebSocketClient.start-266"><a href="#AsyncAgentWebSocketClient.start-266"><span class="linenos">266</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">is_keep_alive_enabled</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient.start-267"><a href="#AsyncAgentWebSocketClient.start-267"><span class="linenos">267</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keepalive is enabled&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-268"><a href="#AsyncAgentWebSocketClient.start-268"><span class="linenos">268</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient.start-269"><a href="#AsyncAgentWebSocketClient.start-269"><span class="linenos">269</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-270"><a href="#AsyncAgentWebSocketClient.start-270"><span class="linenos">270</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keepalive is disabled&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-271"><a href="#AsyncAgentWebSocketClient.start-271"><span class="linenos">271</span></a>
</span><span id="AsyncAgentWebSocketClient.start-272"><a href="#AsyncAgentWebSocketClient.start-272"><span class="linenos">272</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AsyncAgentWebSocketClient.start-273"><a href="#AsyncAgentWebSocketClient.start-273"><span class="linenos">273</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient.start-274"><a href="#AsyncAgentWebSocketClient.start-274"><span class="linenos">274</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-275"><a href="#AsyncAgentWebSocketClient.start-275"><span class="linenos">275</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient.start-276"><a href="#AsyncAgentWebSocketClient.start-276"><span class="linenos">276</span></a>
</span><span id="AsyncAgentWebSocketClient.start-277"><a href="#AsyncAgentWebSocketClient.start-277"><span class="linenos">277</span></a>            <span class="c1"># send the configurationsetting message</span>
</span><span id="AsyncAgentWebSocketClient.start-278"><a href="#AsyncAgentWebSocketClient.start-278"><span class="linenos">278</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;Sending ConfigurationSettings...&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-279"><a href="#AsyncAgentWebSocketClient.start-279"><span class="linenos">279</span></a>            <span class="n">ret_send_cs</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="p">))</span>
</span><span id="AsyncAgentWebSocketClient.start-280"><a href="#AsyncAgentWebSocketClient.start-280"><span class="linenos">280</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">ret_send_cs</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-281"><a href="#AsyncAgentWebSocketClient.start-281"><span class="linenos">281</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;ConfigurationSettings failed&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-282"><a href="#AsyncAgentWebSocketClient.start-282"><span class="linenos">282</span></a>
</span><span id="AsyncAgentWebSocketClient.start-283"><a href="#AsyncAgentWebSocketClient.start-283"><span class="linenos">283</span></a>                <span class="n">err_error</span><span class="p">:</span> <span class="n">ErrorResponse</span> <span class="o">=</span> <span class="n">ErrorResponse</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.start-284"><a href="#AsyncAgentWebSocketClient.start-284"><span class="linenos">284</span></a>                    <span class="s2">&quot;Exception in AsyncAgentWebSocketClient.start&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-285"><a href="#AsyncAgentWebSocketClient.start-285"><span class="linenos">285</span></a>                    <span class="s2">&quot;ConfigurationSettings failed to send&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-286"><a href="#AsyncAgentWebSocketClient.start-286"><span class="linenos">286</span></a>                    <span class="s2">&quot;Exception&quot;</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-287"><a href="#AsyncAgentWebSocketClient.start-287"><span class="linenos">287</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-288"><a href="#AsyncAgentWebSocketClient.start-288"><span class="linenos">288</span></a>                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emit</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.start-289"><a href="#AsyncAgentWebSocketClient.start-289"><span class="linenos">289</span></a>                    <span class="n">AgentWebSocketEvents</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
</span><span id="AsyncAgentWebSocketClient.start-290"><a href="#AsyncAgentWebSocketClient.start-290"><span class="linenos">290</span></a>                    <span class="n">error</span><span class="o">=</span><span class="n">err_error</span><span class="p">,</span>
</span><span id="AsyncAgentWebSocketClient.start-291"><a href="#AsyncAgentWebSocketClient.start-291"><span class="linenos">291</span></a>                    <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)),</span>
</span><span id="AsyncAgentWebSocketClient.start-292"><a href="#AsyncAgentWebSocketClient.start-292"><span class="linenos">292</span></a>                <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-293"><a href="#AsyncAgentWebSocketClient.start-293"><span class="linenos">293</span></a>
</span><span id="AsyncAgentWebSocketClient.start-294"><a href="#AsyncAgentWebSocketClient.start-294"><span class="linenos">294</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-295"><a href="#AsyncAgentWebSocketClient.start-295"><span class="linenos">295</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient.start-296"><a href="#AsyncAgentWebSocketClient.start-296"><span class="linenos">296</span></a>
</span><span id="AsyncAgentWebSocketClient.start-297"><a href="#AsyncAgentWebSocketClient.start-297"><span class="linenos">297</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;start succeeded&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-298"><a href="#AsyncAgentWebSocketClient.start-298"><span class="linenos">298</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-299"><a href="#AsyncAgentWebSocketClient.start-299"><span class="linenos">299</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="AsyncAgentWebSocketClient.start-300"><a href="#AsyncAgentWebSocketClient.start-300"><span class="linenos">300</span></a>
</span><span id="AsyncAgentWebSocketClient.start-301"><a href="#AsyncAgentWebSocketClient.start-301"><span class="linenos">301</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
</span><span id="AsyncAgentWebSocketClient.start-302"><a href="#AsyncAgentWebSocketClient.start-302"><span class="linenos">302</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="AsyncAgentWebSocketClient.start-303"><a href="#AsyncAgentWebSocketClient.start-303"><span class="linenos">303</span></a>                <span class="s2">&quot;WebSocketException in AsyncAgentWebSocketClient.start: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span>
</span><span id="AsyncAgentWebSocketClient.start-304"><a href="#AsyncAgentWebSocketClient.start-304"><span class="linenos">304</span></a>            <span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-305"><a href="#AsyncAgentWebSocketClient.start-305"><span class="linenos">305</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.start LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.start-306"><a href="#AsyncAgentWebSocketClient.start-306"><span class="linenos">306</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;termination_exception_connect&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.start-307"><a href="#AsyncAgentWebSocketClient.start-307"><span class="linenos">307</span></a>                <span class="k">raise</span> <span class="n">e</span>
</span><span id="AsyncAgentWebSocketClient.start-308"><a href="#AsyncAgentWebSocketClient.start-308"><span class="linenos">308</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Starts the WebSocket connection for agent API.</p>
</div>


                            </div>
                            <div id="AsyncAgentWebSocketClient.on" class="classattr">
                                        <input id="AsyncAgentWebSocketClient.on-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">event</span><span class="p">:</span> <span class="n"><a href="enums.html#AgentWebSocketEvents">deepgram.clients.agent.enums.AgentWebSocketEvents</a></span>,</span><span class="param">	<span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="AsyncAgentWebSocketClient.on-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AsyncAgentWebSocketClient.on"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AsyncAgentWebSocketClient.on-312"><a href="#AsyncAgentWebSocketClient.on-312"><span class="linenos">312</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">AgentWebSocketEvents</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.on-313"><a href="#AsyncAgentWebSocketClient.on-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient.on-314"><a href="#AsyncAgentWebSocketClient.on-314"><span class="linenos">314</span></a><span class="sd">        Registers event handlers for specific events.</span>
</span><span id="AsyncAgentWebSocketClient.on-315"><a href="#AsyncAgentWebSocketClient.on-315"><span class="linenos">315</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient.on-316"><a href="#AsyncAgentWebSocketClient.on-316"><span class="linenos">316</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;event subscribed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.on-317"><a href="#AsyncAgentWebSocketClient.on-317"><span class="linenos">317</span></a>        <span class="k">if</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">callable</span><span class="p">(</span><span class="n">handler</span><span class="p">):</span>
</span><span id="AsyncAgentWebSocketClient.on-318"><a href="#AsyncAgentWebSocketClient.on-318"><span class="linenos">318</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_event_handlers</span><span class="p">[</span><span class="n">event</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Registers event handlers for specific events.</p>
</div>


                            </div>
                            <div id="AsyncAgentWebSocketClient.keep_alive" class="classattr">
                                        <input id="AsyncAgentWebSocketClient.keep_alive-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">keep_alive</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="AsyncAgentWebSocketClient.keep_alive-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AsyncAgentWebSocketClient.keep_alive"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AsyncAgentWebSocketClient.keep_alive-615"><a href="#AsyncAgentWebSocketClient.keep_alive-615"><span class="linenos">615</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">keep_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-616"><a href="#AsyncAgentWebSocketClient.keep_alive-616"><span class="linenos">616</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-617"><a href="#AsyncAgentWebSocketClient.keep_alive-617"><span class="linenos">617</span></a><span class="sd">        Sends a KeepAlive message</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-618"><a href="#AsyncAgentWebSocketClient.keep_alive-618"><span class="linenos">618</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-619"><a href="#AsyncAgentWebSocketClient.keep_alive-619"><span class="linenos">619</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.keep_alive ENTER&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-620"><a href="#AsyncAgentWebSocketClient.keep_alive-620"><span class="linenos">620</span></a>
</span><span id="AsyncAgentWebSocketClient.keep_alive-621"><a href="#AsyncAgentWebSocketClient.keep_alive-621"><span class="linenos">621</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;Sending KeepAlive...&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-622"><a href="#AsyncAgentWebSocketClient.keep_alive-622"><span class="linenos">622</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;KeepAlive&quot;</span><span class="p">}))</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-623"><a href="#AsyncAgentWebSocketClient.keep_alive-623"><span class="linenos">623</span></a>
</span><span id="AsyncAgentWebSocketClient.keep_alive-624"><a href="#AsyncAgentWebSocketClient.keep_alive-624"><span class="linenos">624</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">ret</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-625"><a href="#AsyncAgentWebSocketClient.keep_alive-625"><span class="linenos">625</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;keep_alive failed&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-626"><a href="#AsyncAgentWebSocketClient.keep_alive-626"><span class="linenos">626</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-627"><a href="#AsyncAgentWebSocketClient.keep_alive-627"><span class="linenos">627</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-628"><a href="#AsyncAgentWebSocketClient.keep_alive-628"><span class="linenos">628</span></a>
</span><span id="AsyncAgentWebSocketClient.keep_alive-629"><a href="#AsyncAgentWebSocketClient.keep_alive-629"><span class="linenos">629</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;keep_alive succeeded&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-630"><a href="#AsyncAgentWebSocketClient.keep_alive-630"><span class="linenos">630</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.keep_alive LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.keep_alive-631"><a href="#AsyncAgentWebSocketClient.keep_alive-631"><span class="linenos">631</span></a>
</span><span id="AsyncAgentWebSocketClient.keep_alive-632"><a href="#AsyncAgentWebSocketClient.keep_alive-632"><span class="linenos">632</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Sends a KeepAlive message</p>
</div>


                            </div>
                            <div id="AsyncAgentWebSocketClient.finish" class="classattr">
                                        <input id="AsyncAgentWebSocketClient.finish-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">finish</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="AsyncAgentWebSocketClient.finish-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AsyncAgentWebSocketClient.finish"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AsyncAgentWebSocketClient.finish-639"><a href="#AsyncAgentWebSocketClient.finish-639"><span class="linenos">639</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">finish</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.finish-640"><a href="#AsyncAgentWebSocketClient.finish-640"><span class="linenos">640</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient.finish-641"><a href="#AsyncAgentWebSocketClient.finish-641"><span class="linenos">641</span></a><span class="sd">        Closes the WebSocket connection gracefully.</span>
</span><span id="AsyncAgentWebSocketClient.finish-642"><a href="#AsyncAgentWebSocketClient.finish-642"><span class="linenos">642</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AsyncAgentWebSocketClient.finish-643"><a href="#AsyncAgentWebSocketClient.finish-643"><span class="linenos">643</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.finish ENTER&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-644"><a href="#AsyncAgentWebSocketClient.finish-644"><span class="linenos">644</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-645"><a href="#AsyncAgentWebSocketClient.finish-645"><span class="linenos">645</span></a>        <span class="c1"># stop the threads</span>
</span><span id="AsyncAgentWebSocketClient.finish-646"><a href="#AsyncAgentWebSocketClient.finish-646"><span class="linenos">646</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="s2">&quot;cancelling tasks...&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-647"><a href="#AsyncAgentWebSocketClient.finish-647"><span class="linenos">647</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.finish-648"><a href="#AsyncAgentWebSocketClient.finish-648"><span class="linenos">648</span></a>            <span class="c1"># call parent finish</span>
</span><span id="AsyncAgentWebSocketClient.finish-649"><a href="#AsyncAgentWebSocketClient.finish-649"><span class="linenos">649</span></a>            <span class="k">if</span> <span class="k">await</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.finish-650"><a href="#AsyncAgentWebSocketClient.finish-650"><span class="linenos">650</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.finish failed&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-651"><a href="#AsyncAgentWebSocketClient.finish-651"><span class="linenos">651</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-652"><a href="#AsyncAgentWebSocketClient.finish-652"><span class="linenos">652</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.finish-653"><a href="#AsyncAgentWebSocketClient.finish-653"><span class="linenos">653</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient.finish-654"><a href="#AsyncAgentWebSocketClient.finish-654"><span class="linenos">654</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_microphone_created</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient.finish-655"><a href="#AsyncAgentWebSocketClient.finish-655"><span class="linenos">655</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-656"><a href="#AsyncAgentWebSocketClient.finish-656"><span class="linenos">656</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.finish-657"><a href="#AsyncAgentWebSocketClient.finish-657"><span class="linenos">657</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient.finish-658"><a href="#AsyncAgentWebSocketClient.finish-658"><span class="linenos">658</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_speaker_created</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient.finish-659"><a href="#AsyncAgentWebSocketClient.finish-659"><span class="linenos">659</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-660"><a href="#AsyncAgentWebSocketClient.finish-660"><span class="linenos">660</span></a>            <span class="c1"># Before cancelling, check if the tasks were created</span>
</span><span id="AsyncAgentWebSocketClient.finish-661"><a href="#AsyncAgentWebSocketClient.finish-661"><span class="linenos">661</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AsyncAgentWebSocketClient.finish-662"><a href="#AsyncAgentWebSocketClient.finish-662"><span class="linenos">662</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient.finish-663"><a href="#AsyncAgentWebSocketClient.finish-663"><span class="linenos">663</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;before running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-664"><a href="#AsyncAgentWebSocketClient.finish-664"><span class="linenos">664</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient.finish-665"><a href="#AsyncAgentWebSocketClient.finish-665"><span class="linenos">665</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-666"><a href="#AsyncAgentWebSocketClient.finish-666"><span class="linenos">666</span></a>            <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AsyncAgentWebSocketClient.finish-667"><a href="#AsyncAgentWebSocketClient.finish-667"><span class="linenos">667</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.finish-668"><a href="#AsyncAgentWebSocketClient.finish-668"><span class="linenos">668</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
</span><span id="AsyncAgentWebSocketClient.finish-669"><a href="#AsyncAgentWebSocketClient.finish-669"><span class="linenos">669</span></a>                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_keep_alive_thread</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-670"><a href="#AsyncAgentWebSocketClient.finish-670"><span class="linenos">670</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;processing _keep_alive_thread cancel...&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-671"><a href="#AsyncAgentWebSocketClient.finish-671"><span class="linenos">671</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-672"><a href="#AsyncAgentWebSocketClient.finish-672"><span class="linenos">672</span></a>            <span class="c1"># Use asyncio.gather to wait for tasks to be cancelled</span>
</span><span id="AsyncAgentWebSocketClient.finish-673"><a href="#AsyncAgentWebSocketClient.finish-673"><span class="linenos">673</span></a>            <span class="c1"># Prevent indefinite waiting by setting a timeout</span>
</span><span id="AsyncAgentWebSocketClient.finish-674"><a href="#AsyncAgentWebSocketClient.finish-674"><span class="linenos">674</span></a>            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">),</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-675"><a href="#AsyncAgentWebSocketClient.finish-675"><span class="linenos">675</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;threads joined&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-676"><a href="#AsyncAgentWebSocketClient.finish-676"><span class="linenos">676</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-677"><a href="#AsyncAgentWebSocketClient.finish-677"><span class="linenos">677</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_speaker</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient.finish-678"><a href="#AsyncAgentWebSocketClient.finish-678"><span class="linenos">678</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_microphone</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AsyncAgentWebSocketClient.finish-679"><a href="#AsyncAgentWebSocketClient.finish-679"><span class="linenos">679</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-680"><a href="#AsyncAgentWebSocketClient.finish-680"><span class="linenos">680</span></a>            <span class="c1"># debug the threads</span>
</span><span id="AsyncAgentWebSocketClient.finish-681"><a href="#AsyncAgentWebSocketClient.finish-681"><span class="linenos">681</span></a>            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">():</span>
</span><span id="AsyncAgentWebSocketClient.finish-682"><a href="#AsyncAgentWebSocketClient.finish-682"><span class="linenos">682</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;after running thread: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-683"><a href="#AsyncAgentWebSocketClient.finish-683"><span class="linenos">683</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;number of active threads: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">())</span>
</span><span id="AsyncAgentWebSocketClient.finish-684"><a href="#AsyncAgentWebSocketClient.finish-684"><span class="linenos">684</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-685"><a href="#AsyncAgentWebSocketClient.finish-685"><span class="linenos">685</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;finish succeeded&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-686"><a href="#AsyncAgentWebSocketClient.finish-686"><span class="linenos">686</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">spam</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.finish LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-687"><a href="#AsyncAgentWebSocketClient.finish-687"><span class="linenos">687</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="AsyncAgentWebSocketClient.finish-688"><a href="#AsyncAgentWebSocketClient.finish-688"><span class="linenos">688</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-689"><a href="#AsyncAgentWebSocketClient.finish-689"><span class="linenos">689</span></a>        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.finish-690"><a href="#AsyncAgentWebSocketClient.finish-690"><span class="linenos">690</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;tasks cancelled error: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-691"><a href="#AsyncAgentWebSocketClient.finish-691"><span class="linenos">691</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.finish LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-692"><a href="#AsyncAgentWebSocketClient.finish-692"><span class="linenos">692</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="AsyncAgentWebSocketClient.finish-693"><a href="#AsyncAgentWebSocketClient.finish-693"><span class="linenos">693</span></a>
</span><span id="AsyncAgentWebSocketClient.finish-694"><a href="#AsyncAgentWebSocketClient.finish-694"><span class="linenos">694</span></a>        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AsyncAgentWebSocketClient.finish-695"><a href="#AsyncAgentWebSocketClient.finish-695"><span class="linenos">695</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;tasks cancellation timed out: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-696"><a href="#AsyncAgentWebSocketClient.finish-696"><span class="linenos">696</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncAgentWebSocketClient.finish LEAVE&quot;</span><span class="p">)</span>
</span><span id="AsyncAgentWebSocketClient.finish-697"><a href="#AsyncAgentWebSocketClient.finish-697"><span class="linenos">697</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Closes the WebSocket connection gracefully.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/abstract_async_websocket.html#AbstractAsyncWebSocketClient">deepgram.clients.common.v1.abstract_async_websocket.AbstractAsyncWebSocketClient</a></dt>
                                <dd id="AsyncAgentWebSocketClient.delegate_listening" class="function"><a href="../common/v1/abstract_async_websocket.html#AbstractAsyncWebSocketClient.delegate_listening">delegate_listening</a></dd>
                <dd id="AsyncAgentWebSocketClient.is_connected" class="function"><a href="../common/v1/abstract_async_websocket.html#AbstractAsyncWebSocketClient.is_connected">is_connected</a></dd>
                <dd id="AsyncAgentWebSocketClient.send" class="function"><a href="../common/v1/abstract_async_websocket.html#AbstractAsyncWebSocketClient.send">send</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="OpenResponse">
                            <input id="OpenResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">OpenResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="OpenResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpenResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OpenResponse-17"><a href="#OpenResponse-17"><span class="linenos">17</span></a><span class="nd">@dataclass</span>
</span><span id="OpenResponse-18"><a href="#OpenResponse-18"><span class="linenos">18</span></a><span class="k">class</span><span class="w"> </span><span class="nc">OpenResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="OpenResponse-19"><a href="#OpenResponse-19"><span class="linenos">19</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpenResponse-20"><a href="#OpenResponse-20"><span class="linenos">20</span></a><span class="sd">    Open Message from the Deepgram Platform</span>
</span><span id="OpenResponse-21"><a href="#OpenResponse-21"><span class="linenos">21</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="OpenResponse-22"><a href="#OpenResponse-22"><span class="linenos">22</span></a>
</span><span id="OpenResponse-23"><a href="#OpenResponse-23"><span class="linenos">23</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Open Message from the Deepgram Platform</p>
</div>


                            <div id="OpenResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">OpenResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#OpenResponse.__init__"></a>
    
    

                            </div>
                            <div id="OpenResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#OpenResponse.type"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="OpenResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="CloseResponse">
                            <input id="CloseResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">CloseResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="CloseResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CloseResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CloseResponse-29"><a href="#CloseResponse-29"><span class="linenos">29</span></a><span class="nd">@dataclass</span>
</span><span id="CloseResponse-30"><a href="#CloseResponse-30"><span class="linenos">30</span></a><span class="k">class</span><span class="w"> </span><span class="nc">CloseResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="CloseResponse-31"><a href="#CloseResponse-31"><span class="linenos">31</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CloseResponse-32"><a href="#CloseResponse-32"><span class="linenos">32</span></a><span class="sd">    Close Message from the Deepgram Platform</span>
</span><span id="CloseResponse-33"><a href="#CloseResponse-33"><span class="linenos">33</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CloseResponse-34"><a href="#CloseResponse-34"><span class="linenos">34</span></a>
</span><span id="CloseResponse-35"><a href="#CloseResponse-35"><span class="linenos">35</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Close Message from the Deepgram Platform</p>
</div>


                            <div id="CloseResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">CloseResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#CloseResponse.__init__"></a>
    
    

                            </div>
                            <div id="CloseResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#CloseResponse.type"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="CloseResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="ErrorResponse">
                            <input id="ErrorResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">ErrorResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="ErrorResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ErrorResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ErrorResponse-41"><a href="#ErrorResponse-41"><span class="linenos">41</span></a><span class="nd">@dataclass</span>
</span><span id="ErrorResponse-42"><a href="#ErrorResponse-42"><span class="linenos">42</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ErrorResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="ErrorResponse-43"><a href="#ErrorResponse-43"><span class="linenos">43</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ErrorResponse-44"><a href="#ErrorResponse-44"><span class="linenos">44</span></a><span class="sd">    Error Message from the Deepgram Platform</span>
</span><span id="ErrorResponse-45"><a href="#ErrorResponse-45"><span class="linenos">45</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ErrorResponse-46"><a href="#ErrorResponse-46"><span class="linenos">46</span></a>
</span><span id="ErrorResponse-47"><a href="#ErrorResponse-47"><span class="linenos">47</span></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ErrorResponse-48"><a href="#ErrorResponse-48"><span class="linenos">48</span></a>    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ErrorResponse-49"><a href="#ErrorResponse-49"><span class="linenos">49</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ErrorResponse-50"><a href="#ErrorResponse-50"><span class="linenos">50</span></a>    <span class="n">variant</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="ErrorResponse-51"><a href="#ErrorResponse-51"><span class="linenos">51</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="ErrorResponse-52"><a href="#ErrorResponse-52"><span class="linenos">52</span></a>    <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Error Message from the Deepgram Platform</p>
</div>


                            <div id="ErrorResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">ErrorResponse</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">variant</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#ErrorResponse.__init__"></a>
    
    

                            </div>
                            <div id="ErrorResponse.description" class="classattr">
                                <div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#ErrorResponse.description"></a>
    
    

                            </div>
                            <div id="ErrorResponse.message" class="classattr">
                                <div class="attr variable">
            <span class="name">message</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#ErrorResponse.message"></a>
    
    

                            </div>
                            <div id="ErrorResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#ErrorResponse.type"></a>
    
    

                            </div>
                            <div id="ErrorResponse.variant" class="classattr">
                                <div class="attr variable">
            <span class="name">variant</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#ErrorResponse.variant"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="ErrorResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="UnhandledResponse">
                            <input id="UnhandledResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">UnhandledResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="UnhandledResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UnhandledResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UnhandledResponse-58"><a href="#UnhandledResponse-58"><span class="linenos">58</span></a><span class="nd">@dataclass</span>
</span><span id="UnhandledResponse-59"><a href="#UnhandledResponse-59"><span class="linenos">59</span></a><span class="k">class</span><span class="w"> </span><span class="nc">UnhandledResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="UnhandledResponse-60"><a href="#UnhandledResponse-60"><span class="linenos">60</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UnhandledResponse-61"><a href="#UnhandledResponse-61"><span class="linenos">61</span></a><span class="sd">    Unhandled Message from the Deepgram Platform</span>
</span><span id="UnhandledResponse-62"><a href="#UnhandledResponse-62"><span class="linenos">62</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="UnhandledResponse-63"><a href="#UnhandledResponse-63"><span class="linenos">63</span></a>
</span><span id="UnhandledResponse-64"><a href="#UnhandledResponse-64"><span class="linenos">64</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="UnhandledResponse-65"><a href="#UnhandledResponse-65"><span class="linenos">65</span></a>    <span class="n">raw</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Unhandled Message from the Deepgram Platform</p>
</div>


                            <div id="UnhandledResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">UnhandledResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>, </span><span class="param"><span class="n">raw</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#UnhandledResponse.__init__"></a>
    
    

                            </div>
                            <div id="UnhandledResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#UnhandledResponse.type"></a>
    
    

                            </div>
                            <div id="UnhandledResponse.raw" class="classattr">
                                <div class="attr variable">
            <span class="name">raw</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#UnhandledResponse.raw"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="UnhandledResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="WelcomeResponse">
                            <input id="WelcomeResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">WelcomeResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="WelcomeResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WelcomeResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WelcomeResponse-22"><a href="#WelcomeResponse-22"><span class="linenos">22</span></a><span class="nd">@dataclass</span>
</span><span id="WelcomeResponse-23"><a href="#WelcomeResponse-23"><span class="linenos">23</span></a><span class="k">class</span><span class="w"> </span><span class="nc">WelcomeResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="WelcomeResponse-24"><a href="#WelcomeResponse-24"><span class="linenos">24</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="WelcomeResponse-25"><a href="#WelcomeResponse-25"><span class="linenos">25</span></a><span class="sd">    The server will send a Welcome message as soon as the websocket opens.</span>
</span><span id="WelcomeResponse-26"><a href="#WelcomeResponse-26"><span class="linenos">26</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="WelcomeResponse-27"><a href="#WelcomeResponse-27"><span class="linenos">27</span></a>
</span><span id="WelcomeResponse-28"><a href="#WelcomeResponse-28"><span class="linenos">28</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="WelcomeResponse-29"><a href="#WelcomeResponse-29"><span class="linenos">29</span></a>    <span class="n">session_id</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>The server will send a Welcome message as soon as the websocket opens.</p>
</div>


                            <div id="WelcomeResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">WelcomeResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">session_id</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#WelcomeResponse.__init__"></a>
    
    

                            </div>
                            <div id="WelcomeResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#WelcomeResponse.type"></a>
    
    

                            </div>
                            <div id="WelcomeResponse.session_id" class="classattr">
                                <div class="attr variable">
            <span class="name">session_id</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#WelcomeResponse.session_id"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="WelcomeResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="SettingsAppliedResponse">
                            <input id="SettingsAppliedResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">SettingsAppliedResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="SettingsAppliedResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SettingsAppliedResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SettingsAppliedResponse-32"><a href="#SettingsAppliedResponse-32"><span class="linenos">32</span></a><span class="nd">@dataclass</span>
</span><span id="SettingsAppliedResponse-33"><a href="#SettingsAppliedResponse-33"><span class="linenos">33</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SettingsAppliedResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="SettingsAppliedResponse-34"><a href="#SettingsAppliedResponse-34"><span class="linenos">34</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SettingsAppliedResponse-35"><a href="#SettingsAppliedResponse-35"><span class="linenos">35</span></a><span class="sd">    The server will send a SettingsApplied message as soon as the settings are applied.</span>
</span><span id="SettingsAppliedResponse-36"><a href="#SettingsAppliedResponse-36"><span class="linenos">36</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SettingsAppliedResponse-37"><a href="#SettingsAppliedResponse-37"><span class="linenos">37</span></a>
</span><span id="SettingsAppliedResponse-38"><a href="#SettingsAppliedResponse-38"><span class="linenos">38</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>The server will send a SettingsApplied message as soon as the settings are applied.</p>
</div>


                            <div id="SettingsAppliedResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">SettingsAppliedResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#SettingsAppliedResponse.__init__"></a>
    
    

                            </div>
                            <div id="SettingsAppliedResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#SettingsAppliedResponse.type"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="SettingsAppliedResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="ConversationTextResponse">
                            <input id="ConversationTextResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">ConversationTextResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="ConversationTextResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ConversationTextResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ConversationTextResponse-41"><a href="#ConversationTextResponse-41"><span class="linenos">41</span></a><span class="nd">@dataclass</span>
</span><span id="ConversationTextResponse-42"><a href="#ConversationTextResponse-42"><span class="linenos">42</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ConversationTextResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="ConversationTextResponse-43"><a href="#ConversationTextResponse-43"><span class="linenos">43</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ConversationTextResponse-44"><a href="#ConversationTextResponse-44"><span class="linenos">44</span></a><span class="sd">    The server will send a ConversationText message every time the agent hears the user say something, and every time the agent speaks something itself.</span>
</span><span id="ConversationTextResponse-45"><a href="#ConversationTextResponse-45"><span class="linenos">45</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ConversationTextResponse-46"><a href="#ConversationTextResponse-46"><span class="linenos">46</span></a>
</span><span id="ConversationTextResponse-47"><a href="#ConversationTextResponse-47"><span class="linenos">47</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="ConversationTextResponse-48"><a href="#ConversationTextResponse-48"><span class="linenos">48</span></a>    <span class="n">role</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="ConversationTextResponse-49"><a href="#ConversationTextResponse-49"><span class="linenos">49</span></a>    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>The server will send a ConversationText message every time the agent hears the user say something, and every time the agent speaks something itself.</p>
</div>


                            <div id="ConversationTextResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">ConversationTextResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">role</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">content</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#ConversationTextResponse.__init__"></a>
    
    

                            </div>
                            <div id="ConversationTextResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ConversationTextResponse.type"></a>
    
    

                            </div>
                            <div id="ConversationTextResponse.role" class="classattr">
                                <div class="attr variable">
            <span class="name">role</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ConversationTextResponse.role"></a>
    
    

                            </div>
                            <div id="ConversationTextResponse.content" class="classattr">
                                <div class="attr variable">
            <span class="name">content</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ConversationTextResponse.content"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="ConversationTextResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="UserStartedSpeakingResponse">
                            <input id="UserStartedSpeakingResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">UserStartedSpeakingResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="UserStartedSpeakingResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UserStartedSpeakingResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UserStartedSpeakingResponse-52"><a href="#UserStartedSpeakingResponse-52"><span class="linenos">52</span></a><span class="nd">@dataclass</span>
</span><span id="UserStartedSpeakingResponse-53"><a href="#UserStartedSpeakingResponse-53"><span class="linenos">53</span></a><span class="k">class</span><span class="w"> </span><span class="nc">UserStartedSpeakingResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="UserStartedSpeakingResponse-54"><a href="#UserStartedSpeakingResponse-54"><span class="linenos">54</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UserStartedSpeakingResponse-55"><a href="#UserStartedSpeakingResponse-55"><span class="linenos">55</span></a><span class="sd">    The server will send a UserStartedSpeaking message every time the user begins a new utterance.</span>
</span><span id="UserStartedSpeakingResponse-56"><a href="#UserStartedSpeakingResponse-56"><span class="linenos">56</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="UserStartedSpeakingResponse-57"><a href="#UserStartedSpeakingResponse-57"><span class="linenos">57</span></a>
</span><span id="UserStartedSpeakingResponse-58"><a href="#UserStartedSpeakingResponse-58"><span class="linenos">58</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>The server will send a UserStartedSpeaking message every time the user begins a new utterance.</p>
</div>


                            <div id="UserStartedSpeakingResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">UserStartedSpeakingResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#UserStartedSpeakingResponse.__init__"></a>
    
    

                            </div>
                            <div id="UserStartedSpeakingResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#UserStartedSpeakingResponse.type"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="UserStartedSpeakingResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="AgentThinkingResponse">
                            <input id="AgentThinkingResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">AgentThinkingResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="AgentThinkingResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AgentThinkingResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AgentThinkingResponse-61"><a href="#AgentThinkingResponse-61"><span class="linenos">61</span></a><span class="nd">@dataclass</span>
</span><span id="AgentThinkingResponse-62"><a href="#AgentThinkingResponse-62"><span class="linenos">62</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AgentThinkingResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="AgentThinkingResponse-63"><a href="#AgentThinkingResponse-63"><span class="linenos">63</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentThinkingResponse-64"><a href="#AgentThinkingResponse-64"><span class="linenos">64</span></a><span class="sd">    The server will send an AgentThinking message to inform the client of a non-verbalized agent thought.</span>
</span><span id="AgentThinkingResponse-65"><a href="#AgentThinkingResponse-65"><span class="linenos">65</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AgentThinkingResponse-66"><a href="#AgentThinkingResponse-66"><span class="linenos">66</span></a>
</span><span id="AgentThinkingResponse-67"><a href="#AgentThinkingResponse-67"><span class="linenos">67</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="AgentThinkingResponse-68"><a href="#AgentThinkingResponse-68"><span class="linenos">68</span></a>    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>The server will send an AgentThinking message to inform the client of a non-verbalized agent thought.</p>
</div>


                            <div id="AgentThinkingResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">AgentThinkingResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">content</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#AgentThinkingResponse.__init__"></a>
    
    

                            </div>
                            <div id="AgentThinkingResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#AgentThinkingResponse.type"></a>
    
    

                            </div>
                            <div id="AgentThinkingResponse.content" class="classattr">
                                <div class="attr variable">
            <span class="name">content</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#AgentThinkingResponse.content"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="AgentThinkingResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="FunctionCalling">
                            <input id="FunctionCalling-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">FunctionCalling</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="FunctionCalling-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FunctionCalling"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FunctionCalling-71"><a href="#FunctionCalling-71"><span class="linenos">71</span></a><span class="nd">@dataclass</span>
</span><span id="FunctionCalling-72"><a href="#FunctionCalling-72"><span class="linenos">72</span></a><span class="k">class</span><span class="w"> </span><span class="nc">FunctionCalling</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="FunctionCalling-73"><a href="#FunctionCalling-73"><span class="linenos">73</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FunctionCalling-74"><a href="#FunctionCalling-74"><span class="linenos">74</span></a><span class="sd">    The server will sometimes send FunctionCalling messages when making function calls to help the client developer debug function calling workflows.</span>
</span><span id="FunctionCalling-75"><a href="#FunctionCalling-75"><span class="linenos">75</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="FunctionCalling-76"><a href="#FunctionCalling-76"><span class="linenos">76</span></a>
</span><span id="FunctionCalling-77"><a href="#FunctionCalling-77"><span class="linenos">77</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>The server will sometimes send FunctionCalling messages when making function calls to help the client developer debug function calling workflows.</p>
</div>


                            <div id="FunctionCalling.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">FunctionCalling</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#FunctionCalling.__init__"></a>
    
    

                            </div>
                            <div id="FunctionCalling.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#FunctionCalling.type"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="FunctionCalling.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="FunctionCallRequest">
                            <input id="FunctionCallRequest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">FunctionCallRequest</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="FunctionCallRequest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FunctionCallRequest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FunctionCallRequest-80"><a href="#FunctionCallRequest-80"><span class="linenos">80</span></a><span class="nd">@dataclass</span>
</span><span id="FunctionCallRequest-81"><a href="#FunctionCallRequest-81"><span class="linenos">81</span></a><span class="k">class</span><span class="w"> </span><span class="nc">FunctionCallRequest</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="FunctionCallRequest-82"><a href="#FunctionCallRequest-82"><span class="linenos">82</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FunctionCallRequest-83"><a href="#FunctionCallRequest-83"><span class="linenos">83</span></a><span class="sd">    The FunctionCallRequest message is used to call a function from the server to the client.</span>
</span><span id="FunctionCallRequest-84"><a href="#FunctionCallRequest-84"><span class="linenos">84</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="FunctionCallRequest-85"><a href="#FunctionCallRequest-85"><span class="linenos">85</span></a>
</span><span id="FunctionCallRequest-86"><a href="#FunctionCallRequest-86"><span class="linenos">86</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="FunctionCallRequest-87"><a href="#FunctionCallRequest-87"><span class="linenos">87</span></a>    <span class="n">function_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="FunctionCallRequest-88"><a href="#FunctionCallRequest-88"><span class="linenos">88</span></a>    <span class="n">function_call_id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="FunctionCallRequest-89"><a href="#FunctionCallRequest-89"><span class="linenos">89</span></a>    <span class="nb">input</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>The FunctionCallRequest message is used to call a function from the server to the client.</p>
</div>


                            <div id="FunctionCallRequest.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">FunctionCallRequest</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">function_name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">function_call_id</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="nb">input</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#FunctionCallRequest.__init__"></a>
    
    

                            </div>
                            <div id="FunctionCallRequest.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#FunctionCallRequest.type"></a>
    
    

                            </div>
                            <div id="FunctionCallRequest.function_name" class="classattr">
                                <div class="attr variable">
            <span class="name">function_name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#FunctionCallRequest.function_name"></a>
    
    

                            </div>
                            <div id="FunctionCallRequest.function_call_id" class="classattr">
                                <div class="attr variable">
            <span class="name">function_call_id</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#FunctionCallRequest.function_call_id"></a>
    
    

                            </div>
                            <div id="FunctionCallRequest.input" class="classattr">
                                <div class="attr variable">
            <span class="name">input</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#FunctionCallRequest.input"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="FunctionCallRequest.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="AgentStartedSpeakingResponse">
                            <input id="AgentStartedSpeakingResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">AgentStartedSpeakingResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="AgentStartedSpeakingResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AgentStartedSpeakingResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AgentStartedSpeakingResponse-92"><a href="#AgentStartedSpeakingResponse-92"><span class="linenos"> 92</span></a><span class="nd">@dataclass</span>
</span><span id="AgentStartedSpeakingResponse-93"><a href="#AgentStartedSpeakingResponse-93"><span class="linenos"> 93</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AgentStartedSpeakingResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="AgentStartedSpeakingResponse-94"><a href="#AgentStartedSpeakingResponse-94"><span class="linenos"> 94</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentStartedSpeakingResponse-95"><a href="#AgentStartedSpeakingResponse-95"><span class="linenos"> 95</span></a><span class="sd">    The server will send an AgentStartedSpeaking message when it begins streaming an agent audio response to the client for playback.</span>
</span><span id="AgentStartedSpeakingResponse-96"><a href="#AgentStartedSpeakingResponse-96"><span class="linenos"> 96</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AgentStartedSpeakingResponse-97"><a href="#AgentStartedSpeakingResponse-97"><span class="linenos"> 97</span></a>
</span><span id="AgentStartedSpeakingResponse-98"><a href="#AgentStartedSpeakingResponse-98"><span class="linenos"> 98</span></a>    <span class="n">total_latency</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="AgentStartedSpeakingResponse-99"><a href="#AgentStartedSpeakingResponse-99"><span class="linenos"> 99</span></a>    <span class="n">tts_latency</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="AgentStartedSpeakingResponse-100"><a href="#AgentStartedSpeakingResponse-100"><span class="linenos">100</span></a>    <span class="n">ttt_latency</span><span class="p">:</span> <span class="nb">float</span>
</span></pre></div>


            <div class="docstring"><p>The server will send an AgentStartedSpeaking message when it begins streaming an agent audio response to the client for playback.</p>
</div>


                            <div id="AgentStartedSpeakingResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">AgentStartedSpeakingResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">total_latency</span><span class="p">:</span> <span class="nb">float</span>, </span><span class="param"><span class="n">tts_latency</span><span class="p">:</span> <span class="nb">float</span>, </span><span class="param"><span class="n">ttt_latency</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#AgentStartedSpeakingResponse.__init__"></a>
    
    

                            </div>
                            <div id="AgentStartedSpeakingResponse.total_latency" class="classattr">
                                <div class="attr variable">
            <span class="name">total_latency</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#AgentStartedSpeakingResponse.total_latency"></a>
    
    

                            </div>
                            <div id="AgentStartedSpeakingResponse.tts_latency" class="classattr">
                                <div class="attr variable">
            <span class="name">tts_latency</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#AgentStartedSpeakingResponse.tts_latency"></a>
    
    

                            </div>
                            <div id="AgentStartedSpeakingResponse.ttt_latency" class="classattr">
                                <div class="attr variable">
            <span class="name">ttt_latency</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#AgentStartedSpeakingResponse.ttt_latency"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="AgentStartedSpeakingResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="AgentAudioDoneResponse">
                            <input id="AgentAudioDoneResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">AgentAudioDoneResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="AgentAudioDoneResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AgentAudioDoneResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AgentAudioDoneResponse-103"><a href="#AgentAudioDoneResponse-103"><span class="linenos">103</span></a><span class="nd">@dataclass</span>
</span><span id="AgentAudioDoneResponse-104"><a href="#AgentAudioDoneResponse-104"><span class="linenos">104</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AgentAudioDoneResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="AgentAudioDoneResponse-105"><a href="#AgentAudioDoneResponse-105"><span class="linenos">105</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentAudioDoneResponse-106"><a href="#AgentAudioDoneResponse-106"><span class="linenos">106</span></a><span class="sd">    The server will send an AgentAudioDone message immediately after it sends the last audio message in a piece of agent speech.</span>
</span><span id="AgentAudioDoneResponse-107"><a href="#AgentAudioDoneResponse-107"><span class="linenos">107</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AgentAudioDoneResponse-108"><a href="#AgentAudioDoneResponse-108"><span class="linenos">108</span></a>
</span><span id="AgentAudioDoneResponse-109"><a href="#AgentAudioDoneResponse-109"><span class="linenos">109</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>The server will send an AgentAudioDone message immediately after it sends the last audio message in a piece of agent speech.</p>
</div>


                            <div id="AgentAudioDoneResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">AgentAudioDoneResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#AgentAudioDoneResponse.__init__"></a>
    
    

                            </div>
                            <div id="AgentAudioDoneResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#AgentAudioDoneResponse.type"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="AgentAudioDoneResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="InjectionRefusedResponse">
                            <input id="InjectionRefusedResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">InjectionRefusedResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="InjectionRefusedResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InjectionRefusedResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InjectionRefusedResponse-112"><a href="#InjectionRefusedResponse-112"><span class="linenos">112</span></a><span class="nd">@dataclass</span>
</span><span id="InjectionRefusedResponse-113"><a href="#InjectionRefusedResponse-113"><span class="linenos">113</span></a><span class="k">class</span><span class="w"> </span><span class="nc">InjectionRefusedResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="InjectionRefusedResponse-114"><a href="#InjectionRefusedResponse-114"><span class="linenos">114</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="InjectionRefusedResponse-115"><a href="#InjectionRefusedResponse-115"><span class="linenos">115</span></a><span class="sd">    The server will send an InjectionRefused message when an InjectAgentMessage request is ignored because it arrived while the user was speaking or while the server was sending audio for an agent response.</span>
</span><span id="InjectionRefusedResponse-116"><a href="#InjectionRefusedResponse-116"><span class="linenos">116</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="InjectionRefusedResponse-117"><a href="#InjectionRefusedResponse-117"><span class="linenos">117</span></a>
</span><span id="InjectionRefusedResponse-118"><a href="#InjectionRefusedResponse-118"><span class="linenos">118</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>The server will send an InjectionRefused message when an InjectAgentMessage request is ignored because it arrived while the user was speaking or while the server was sending audio for an agent response.</p>
</div>


                            <div id="InjectionRefusedResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">InjectionRefusedResponse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#InjectionRefusedResponse.__init__"></a>
    
    

                            </div>
                            <div id="InjectionRefusedResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#InjectionRefusedResponse.type"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="InjectionRefusedResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="SettingsConfigurationOptions">
                            <input id="SettingsConfigurationOptions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">SettingsConfigurationOptions</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="SettingsConfigurationOptions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SettingsConfigurationOptions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SettingsConfigurationOptions-254"><a href="#SettingsConfigurationOptions-254"><span class="linenos">254</span></a><span class="nd">@dataclass</span>
</span><span id="SettingsConfigurationOptions-255"><a href="#SettingsConfigurationOptions-255"><span class="linenos">255</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SettingsConfigurationOptions</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="SettingsConfigurationOptions-256"><a href="#SettingsConfigurationOptions-256"><span class="linenos">256</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SettingsConfigurationOptions-257"><a href="#SettingsConfigurationOptions-257"><span class="linenos">257</span></a><span class="sd">    The client should send a SettingsConfiguration message immediately after opening the websocket and before sending any audio.</span>
</span><span id="SettingsConfigurationOptions-258"><a href="#SettingsConfigurationOptions-258"><span class="linenos">258</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SettingsConfigurationOptions-259"><a href="#SettingsConfigurationOptions-259"><span class="linenos">259</span></a>
</span><span id="SettingsConfigurationOptions-260"><a href="#SettingsConfigurationOptions-260"><span class="linenos">260</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">SettingsConfiguration</span><span class="p">)</span>
</span><span id="SettingsConfigurationOptions-261"><a href="#SettingsConfigurationOptions-261"><span class="linenos">261</span></a>    <span class="n">audio</span><span class="p">:</span> <span class="n">Audio</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Audio</span><span class="p">)</span>
</span><span id="SettingsConfigurationOptions-262"><a href="#SettingsConfigurationOptions-262"><span class="linenos">262</span></a>    <span class="n">agent</span><span class="p">:</span> <span class="n">Agent</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Agent</span><span class="p">)</span>
</span><span id="SettingsConfigurationOptions-263"><a href="#SettingsConfigurationOptions-263"><span class="linenos">263</span></a>    <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Context</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="SettingsConfigurationOptions-264"><a href="#SettingsConfigurationOptions-264"><span class="linenos">264</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="SettingsConfigurationOptions-265"><a href="#SettingsConfigurationOptions-265"><span class="linenos">265</span></a>    <span class="p">)</span>
</span><span id="SettingsConfigurationOptions-266"><a href="#SettingsConfigurationOptions-266"><span class="linenos">266</span></a>
</span><span id="SettingsConfigurationOptions-267"><a href="#SettingsConfigurationOptions-267"><span class="linenos">267</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="SettingsConfigurationOptions-268"><a href="#SettingsConfigurationOptions-268"><span class="linenos">268</span></a>        <span class="n">_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="SettingsConfigurationOptions-269"><a href="#SettingsConfigurationOptions-269"><span class="linenos">269</span></a>        <span class="k">if</span> <span class="s2">&quot;audio&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="SettingsConfigurationOptions-270"><a href="#SettingsConfigurationOptions-270"><span class="linenos">270</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;audio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Audio</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span> <span class="k">for</span> <span class="n">audio</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;audio&quot;</span><span class="p">]]</span>
</span><span id="SettingsConfigurationOptions-271"><a href="#SettingsConfigurationOptions-271"><span class="linenos">271</span></a>        <span class="k">if</span> <span class="s2">&quot;agent&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="SettingsConfigurationOptions-272"><a href="#SettingsConfigurationOptions-272"><span class="linenos">272</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;agent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Agent</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;agent&quot;</span><span class="p">]]</span>
</span><span id="SettingsConfigurationOptions-273"><a href="#SettingsConfigurationOptions-273"><span class="linenos">273</span></a>        <span class="k">if</span> <span class="s2">&quot;context&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="SettingsConfigurationOptions-274"><a href="#SettingsConfigurationOptions-274"><span class="linenos">274</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;context&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="SettingsConfigurationOptions-275"><a href="#SettingsConfigurationOptions-275"><span class="linenos">275</span></a>                <span class="n">Context</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;context&quot;</span><span class="p">]</span>
</span><span id="SettingsConfigurationOptions-276"><a href="#SettingsConfigurationOptions-276"><span class="linenos">276</span></a>            <span class="p">]</span>
</span><span id="SettingsConfigurationOptions-277"><a href="#SettingsConfigurationOptions-277"><span class="linenos">277</span></a>        <span class="k">return</span> <span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="SettingsConfigurationOptions-278"><a href="#SettingsConfigurationOptions-278"><span class="linenos">278</span></a>
</span><span id="SettingsConfigurationOptions-279"><a href="#SettingsConfigurationOptions-279"><span class="linenos">279</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="SettingsConfigurationOptions-280"><a href="#SettingsConfigurationOptions-280"><span class="linenos">280</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SettingsConfigurationOptions-281"><a href="#SettingsConfigurationOptions-281"><span class="linenos">281</span></a><span class="sd">        Check the options for any deprecated or soon-to-be-deprecated options.</span>
</span><span id="SettingsConfigurationOptions-282"><a href="#SettingsConfigurationOptions-282"><span class="linenos">282</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SettingsConfigurationOptions-283"><a href="#SettingsConfigurationOptions-283"><span class="linenos">283</span></a>        <span class="n">logger</span> <span class="o">=</span> <span class="n">verboselogs</span><span class="o">.</span><span class="n">VerboseLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="SettingsConfigurationOptions-284"><a href="#SettingsConfigurationOptions-284"><span class="linenos">284</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">())</span>
</span><span id="SettingsConfigurationOptions-285"><a href="#SettingsConfigurationOptions-285"><span class="linenos">285</span></a>        <span class="n">prev</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">level</span>
</span><span id="SettingsConfigurationOptions-286"><a href="#SettingsConfigurationOptions-286"><span class="linenos">286</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">verboselogs</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
</span><span id="SettingsConfigurationOptions-287"><a href="#SettingsConfigurationOptions-287"><span class="linenos">287</span></a>
</span><span id="SettingsConfigurationOptions-288"><a href="#SettingsConfigurationOptions-288"><span class="linenos">288</span></a>        <span class="c1"># do we need to check anything here?</span>
</span><span id="SettingsConfigurationOptions-289"><a href="#SettingsConfigurationOptions-289"><span class="linenos">289</span></a>
</span><span id="SettingsConfigurationOptions-290"><a href="#SettingsConfigurationOptions-290"><span class="linenos">290</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span>
</span><span id="SettingsConfigurationOptions-291"><a href="#SettingsConfigurationOptions-291"><span class="linenos">291</span></a>
</span><span id="SettingsConfigurationOptions-292"><a href="#SettingsConfigurationOptions-292"><span class="linenos">292</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>The client should send a SettingsConfiguration message immediately after opening the websocket and before sending any audio.</p>
</div>


                            <div id="SettingsConfigurationOptions.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">SettingsConfigurationOptions</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;SettingsConfiguration&#39;</span>,</span><span class="param">	<span class="n">audio</span><span class="p">:</span> <span class="n"><a href="#Audio">Audio</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">agent</span><span class="p">:</span> <span class="n"><a href="#Agent">Agent</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Context">Context</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#SettingsConfigurationOptions.__init__"></a>
    
    

                            </div>
                            <div id="SettingsConfigurationOptions.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;SettingsConfiguration&#39;</span>

        
    </div>
    <a class="headerlink" href="#SettingsConfigurationOptions.type"></a>
    
    

                            </div>
                            <div id="SettingsConfigurationOptions.audio" class="classattr">
                                <div class="attr variable">
            <span class="name">audio</span><span class="annotation">: <a href="#Audio">Audio</a></span>

        
    </div>
    <a class="headerlink" href="#SettingsConfigurationOptions.audio"></a>
    
    

                            </div>
                            <div id="SettingsConfigurationOptions.agent" class="classattr">
                                <div class="attr variable">
            <span class="name">agent</span><span class="annotation">: <a href="#Agent">Agent</a></span>

        
    </div>
    <a class="headerlink" href="#SettingsConfigurationOptions.agent"></a>
    
    

                            </div>
                            <div id="SettingsConfigurationOptions.context" class="classattr">
                                <div class="attr variable">
            <span class="name">context</span><span class="annotation">: Optional[<a href="#Context">Context</a>]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#SettingsConfigurationOptions.context"></a>
    
    

                            </div>
                            <div id="SettingsConfigurationOptions.check" class="classattr">
                                        <input id="SettingsConfigurationOptions.check-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">check</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="SettingsConfigurationOptions.check-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SettingsConfigurationOptions.check"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SettingsConfigurationOptions.check-279"><a href="#SettingsConfigurationOptions.check-279"><span class="linenos">279</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="SettingsConfigurationOptions.check-280"><a href="#SettingsConfigurationOptions.check-280"><span class="linenos">280</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SettingsConfigurationOptions.check-281"><a href="#SettingsConfigurationOptions.check-281"><span class="linenos">281</span></a><span class="sd">        Check the options for any deprecated or soon-to-be-deprecated options.</span>
</span><span id="SettingsConfigurationOptions.check-282"><a href="#SettingsConfigurationOptions.check-282"><span class="linenos">282</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SettingsConfigurationOptions.check-283"><a href="#SettingsConfigurationOptions.check-283"><span class="linenos">283</span></a>        <span class="n">logger</span> <span class="o">=</span> <span class="n">verboselogs</span><span class="o">.</span><span class="n">VerboseLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="SettingsConfigurationOptions.check-284"><a href="#SettingsConfigurationOptions.check-284"><span class="linenos">284</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">())</span>
</span><span id="SettingsConfigurationOptions.check-285"><a href="#SettingsConfigurationOptions.check-285"><span class="linenos">285</span></a>        <span class="n">prev</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">level</span>
</span><span id="SettingsConfigurationOptions.check-286"><a href="#SettingsConfigurationOptions.check-286"><span class="linenos">286</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">verboselogs</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
</span><span id="SettingsConfigurationOptions.check-287"><a href="#SettingsConfigurationOptions.check-287"><span class="linenos">287</span></a>
</span><span id="SettingsConfigurationOptions.check-288"><a href="#SettingsConfigurationOptions.check-288"><span class="linenos">288</span></a>        <span class="c1"># do we need to check anything here?</span>
</span><span id="SettingsConfigurationOptions.check-289"><a href="#SettingsConfigurationOptions.check-289"><span class="linenos">289</span></a>
</span><span id="SettingsConfigurationOptions.check-290"><a href="#SettingsConfigurationOptions.check-290"><span class="linenos">290</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span>
</span><span id="SettingsConfigurationOptions.check-291"><a href="#SettingsConfigurationOptions.check-291"><span class="linenos">291</span></a>
</span><span id="SettingsConfigurationOptions.check-292"><a href="#SettingsConfigurationOptions.check-292"><span class="linenos">292</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Check the options for any deprecated or soon-to-be-deprecated options.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="SettingsConfigurationOptions.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="UpdateInstructionsOptions">
                            <input id="UpdateInstructionsOptions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">UpdateInstructionsOptions</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="UpdateInstructionsOptions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UpdateInstructionsOptions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UpdateInstructionsOptions-298"><a href="#UpdateInstructionsOptions-298"><span class="linenos">298</span></a><span class="nd">@dataclass</span>
</span><span id="UpdateInstructionsOptions-299"><a href="#UpdateInstructionsOptions-299"><span class="linenos">299</span></a><span class="k">class</span><span class="w"> </span><span class="nc">UpdateInstructionsOptions</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="UpdateInstructionsOptions-300"><a href="#UpdateInstructionsOptions-300"><span class="linenos">300</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UpdateInstructionsOptions-301"><a href="#UpdateInstructionsOptions-301"><span class="linenos">301</span></a><span class="sd">    The client can send an UpdateInstructions message to give additional instructions to the Think model in the middle of a conversation.</span>
</span><span id="UpdateInstructionsOptions-302"><a href="#UpdateInstructionsOptions-302"><span class="linenos">302</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="UpdateInstructionsOptions-303"><a href="#UpdateInstructionsOptions-303"><span class="linenos">303</span></a>
</span><span id="UpdateInstructionsOptions-304"><a href="#UpdateInstructionsOptions-304"><span class="linenos">304</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">UpdateInstructions</span><span class="p">)</span>
</span><span id="UpdateInstructionsOptions-305"><a href="#UpdateInstructionsOptions-305"><span class="linenos">305</span></a>    <span class="n">instructions</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The client can send an UpdateInstructions message to give additional instructions to the Think model in the middle of a conversation.</p>
</div>


                            <div id="UpdateInstructionsOptions.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">UpdateInstructionsOptions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;UpdateInstructions&#39;</span>, </span><span class="param"><span class="n">instructions</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#UpdateInstructionsOptions.__init__"></a>
    
    

                            </div>
                            <div id="UpdateInstructionsOptions.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;UpdateInstructions&#39;</span>

        
    </div>
    <a class="headerlink" href="#UpdateInstructionsOptions.type"></a>
    
    

                            </div>
                            <div id="UpdateInstructionsOptions.instructions" class="classattr">
                                <div class="attr variable">
            <span class="name">instructions</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#UpdateInstructionsOptions.instructions"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="UpdateInstructionsOptions.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="UpdateSpeakOptions">
                            <input id="UpdateSpeakOptions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">UpdateSpeakOptions</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="UpdateSpeakOptions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UpdateSpeakOptions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UpdateSpeakOptions-311"><a href="#UpdateSpeakOptions-311"><span class="linenos">311</span></a><span class="nd">@dataclass</span>
</span><span id="UpdateSpeakOptions-312"><a href="#UpdateSpeakOptions-312"><span class="linenos">312</span></a><span class="k">class</span><span class="w"> </span><span class="nc">UpdateSpeakOptions</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="UpdateSpeakOptions-313"><a href="#UpdateSpeakOptions-313"><span class="linenos">313</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UpdateSpeakOptions-314"><a href="#UpdateSpeakOptions-314"><span class="linenos">314</span></a><span class="sd">    The client can send an UpdateSpeak message to change the Speak model in the middle of a conversation.</span>
</span><span id="UpdateSpeakOptions-315"><a href="#UpdateSpeakOptions-315"><span class="linenos">315</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="UpdateSpeakOptions-316"><a href="#UpdateSpeakOptions-316"><span class="linenos">316</span></a>
</span><span id="UpdateSpeakOptions-317"><a href="#UpdateSpeakOptions-317"><span class="linenos">317</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">UpdateSpeak</span><span class="p">)</span>
</span><span id="UpdateSpeakOptions-318"><a href="#UpdateSpeakOptions-318"><span class="linenos">318</span></a>    <span class="n">model</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The client can send an UpdateSpeak message to change the Speak model in the middle of a conversation.</p>
</div>


                            <div id="UpdateSpeakOptions.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">UpdateSpeakOptions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;UpdateSpeak&#39;</span>, </span><span class="param"><span class="n">model</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#UpdateSpeakOptions.__init__"></a>
    
    

                            </div>
                            <div id="UpdateSpeakOptions.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;UpdateSpeak&#39;</span>

        
    </div>
    <a class="headerlink" href="#UpdateSpeakOptions.type"></a>
    
    

                            </div>
                            <div id="UpdateSpeakOptions.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#UpdateSpeakOptions.model"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="UpdateSpeakOptions.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="InjectAgentMessageOptions">
                            <input id="InjectAgentMessageOptions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">InjectAgentMessageOptions</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="InjectAgentMessageOptions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InjectAgentMessageOptions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InjectAgentMessageOptions-324"><a href="#InjectAgentMessageOptions-324"><span class="linenos">324</span></a><span class="nd">@dataclass</span>
</span><span id="InjectAgentMessageOptions-325"><a href="#InjectAgentMessageOptions-325"><span class="linenos">325</span></a><span class="k">class</span><span class="w"> </span><span class="nc">InjectAgentMessageOptions</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="InjectAgentMessageOptions-326"><a href="#InjectAgentMessageOptions-326"><span class="linenos">326</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="InjectAgentMessageOptions-327"><a href="#InjectAgentMessageOptions-327"><span class="linenos">327</span></a><span class="sd">    The client can send an InjectAgentMessage to immediately trigger an agent statement. If the injection request arrives while the user is speaking, or while the server is in the middle of sending audio for an agent response, then the request will be ignored and the server will reply with an InjectionRefused.</span>
</span><span id="InjectAgentMessageOptions-328"><a href="#InjectAgentMessageOptions-328"><span class="linenos">328</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="InjectAgentMessageOptions-329"><a href="#InjectAgentMessageOptions-329"><span class="linenos">329</span></a>
</span><span id="InjectAgentMessageOptions-330"><a href="#InjectAgentMessageOptions-330"><span class="linenos">330</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">AgentWebSocketEvents</span><span class="o">.</span><span class="n">InjectAgentMessage</span><span class="p">)</span>
</span><span id="InjectAgentMessageOptions-331"><a href="#InjectAgentMessageOptions-331"><span class="linenos">331</span></a>    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The client can send an InjectAgentMessage to immediately trigger an agent statement. If the injection request arrives while the user is speaking, or while the server is in the middle of sending audio for an agent response, then the request will be ignored and the server will reply with an InjectionRefused.</p>
</div>


                            <div id="InjectAgentMessageOptions.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">InjectAgentMessageOptions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;InjectAgentMessage&#39;</span>, </span><span class="param"><span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#InjectAgentMessageOptions.__init__"></a>
    
    

                            </div>
                            <div id="InjectAgentMessageOptions.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;InjectAgentMessage&#39;</span>

        
    </div>
    <a class="headerlink" href="#InjectAgentMessageOptions.type"></a>
    
    

                            </div>
                            <div id="InjectAgentMessageOptions.message" class="classattr">
                                <div class="attr variable">
            <span class="name">message</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#InjectAgentMessageOptions.message"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="InjectAgentMessageOptions.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="FunctionCallResponse">
                            <input id="FunctionCallResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">FunctionCallResponse</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="FunctionCallResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FunctionCallResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FunctionCallResponse-337"><a href="#FunctionCallResponse-337"><span class="linenos">337</span></a><span class="nd">@dataclass</span>
</span><span id="FunctionCallResponse-338"><a href="#FunctionCallResponse-338"><span class="linenos">338</span></a><span class="k">class</span><span class="w"> </span><span class="nc">FunctionCallResponse</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="FunctionCallResponse-339"><a href="#FunctionCallResponse-339"><span class="linenos">339</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FunctionCallResponse-340"><a href="#FunctionCallResponse-340"><span class="linenos">340</span></a><span class="sd">    TheFunctionCallResponse message is a JSON command that the client should reply with every time there is a FunctionCallRequest received.</span>
</span><span id="FunctionCallResponse-341"><a href="#FunctionCallResponse-341"><span class="linenos">341</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="FunctionCallResponse-342"><a href="#FunctionCallResponse-342"><span class="linenos">342</span></a>
</span><span id="FunctionCallResponse-343"><a href="#FunctionCallResponse-343"><span class="linenos">343</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;FunctionCallResponse&quot;</span>
</span><span id="FunctionCallResponse-344"><a href="#FunctionCallResponse-344"><span class="linenos">344</span></a>    <span class="n">function_call_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="FunctionCallResponse-345"><a href="#FunctionCallResponse-345"><span class="linenos">345</span></a>    <span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>TheFunctionCallResponse message is a JSON command that the client should reply with every time there is a FunctionCallRequest received.</p>
</div>


                            <div id="FunctionCallResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">FunctionCallResponse</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;FunctionCallResponse&#39;</span>,</span><span class="param">	<span class="n">function_call_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#FunctionCallResponse.__init__"></a>
    
    

                            </div>
                            <div id="FunctionCallResponse.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;FunctionCallResponse&#39;</span>

        
    </div>
    <a class="headerlink" href="#FunctionCallResponse.type"></a>
    
    

                            </div>
                            <div id="FunctionCallResponse.function_call_id" class="classattr">
                                <div class="attr variable">
            <span class="name">function_call_id</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#FunctionCallResponse.function_call_id"></a>
    
    

                            </div>
                            <div id="FunctionCallResponse.output" class="classattr">
                                <div class="attr variable">
            <span class="name">output</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#FunctionCallResponse.output"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="FunctionCallResponse.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="AgentKeepAlive">
                            <input id="AgentKeepAlive-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">AgentKeepAlive</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="AgentKeepAlive-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AgentKeepAlive"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AgentKeepAlive-351"><a href="#AgentKeepAlive-351"><span class="linenos">351</span></a><span class="nd">@dataclass</span>
</span><span id="AgentKeepAlive-352"><a href="#AgentKeepAlive-352"><span class="linenos">352</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AgentKeepAlive</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="AgentKeepAlive-353"><a href="#AgentKeepAlive-353"><span class="linenos">353</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AgentKeepAlive-354"><a href="#AgentKeepAlive-354"><span class="linenos">354</span></a><span class="sd">    The KeepAlive message is a JSON command that you can use to ensure that the server does not close the connection.</span>
</span><span id="AgentKeepAlive-355"><a href="#AgentKeepAlive-355"><span class="linenos">355</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AgentKeepAlive-356"><a href="#AgentKeepAlive-356"><span class="linenos">356</span></a>
</span><span id="AgentKeepAlive-357"><a href="#AgentKeepAlive-357"><span class="linenos">357</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;KeepAlive&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The KeepAlive message is a JSON command that you can use to ensure that the server does not close the connection.</p>
</div>


                            <div id="AgentKeepAlive.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">AgentKeepAlive</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;KeepAlive&#39;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#AgentKeepAlive.__init__"></a>
    
    

                            </div>
                            <div id="AgentKeepAlive.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;KeepAlive&#39;</span>

        
    </div>
    <a class="headerlink" href="#AgentKeepAlive.type"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="AgentKeepAlive.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Listen">
                            <input id="Listen-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Listen</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Listen-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Listen"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Listen-21"><a href="#Listen-21"><span class="linenos">21</span></a><span class="nd">@dataclass</span>
</span><span id="Listen-22"><a href="#Listen-22"><span class="linenos">22</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Listen</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Listen-23"><a href="#Listen-23"><span class="linenos">23</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Listen-24"><a href="#Listen-24"><span class="linenos">24</span></a><span class="sd">    This class defines any configuration settings for the Listen model.</span>
</span><span id="Listen-25"><a href="#Listen-25"><span class="linenos">25</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Listen-26"><a href="#Listen-26"><span class="linenos">26</span></a>
</span><span id="Listen-27"><a href="#Listen-27"><span class="linenos">27</span></a>    <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Listen-28"><a href="#Listen-28"><span class="linenos">28</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Listen-29"><a href="#Listen-29"><span class="linenos">29</span></a>    <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This class defines any configuration settings for the Listen model.</p>
</div>


                            <div id="Listen.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Listen</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Listen.__init__"></a>
    
    

                            </div>
                            <div id="Listen.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Listen.model"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Listen.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Speak">
                            <input id="Speak-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Speak</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Speak-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Speak"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Speak-32"><a href="#Speak-32"><span class="linenos">32</span></a><span class="nd">@dataclass</span>
</span><span id="Speak-33"><a href="#Speak-33"><span class="linenos">33</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Speak</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Speak-34"><a href="#Speak-34"><span class="linenos">34</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Speak-35"><a href="#Speak-35"><span class="linenos">35</span></a><span class="sd">    This class defines any configuration settings for the Speak model.</span>
</span><span id="Speak-36"><a href="#Speak-36"><span class="linenos">36</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Speak-37"><a href="#Speak-37"><span class="linenos">37</span></a>
</span><span id="Speak-38"><a href="#Speak-38"><span class="linenos">38</span></a>    <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Speak-39"><a href="#Speak-39"><span class="linenos">39</span></a>        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;aura-asteria-en&quot;</span><span class="p">,</span>
</span><span id="Speak-40"><a href="#Speak-40"><span class="linenos">40</span></a>        <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">),</span>
</span><span id="Speak-41"><a href="#Speak-41"><span class="linenos">41</span></a>    <span class="p">)</span>
</span><span id="Speak-42"><a href="#Speak-42"><span class="linenos">42</span></a>    <span class="n">provider</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Speak-43"><a href="#Speak-43"><span class="linenos">43</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Speak-44"><a href="#Speak-44"><span class="linenos">44</span></a>    <span class="p">)</span>
</span><span id="Speak-45"><a href="#Speak-45"><span class="linenos">45</span></a>    <span class="n">voice_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Speak-46"><a href="#Speak-46"><span class="linenos">46</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Speak-47"><a href="#Speak-47"><span class="linenos">47</span></a>    <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This class defines any configuration settings for the Speak model.</p>
</div>


                            <div id="Speak.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Speak</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;aura-asteria-en&#39;</span>,</span><span class="param">	<span class="n">provider</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">voice_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Speak.__init__"></a>
    
    

                            </div>
                            <div id="Speak.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">&#39;aura-asteria-en&#39;</span>

        
    </div>
    <a class="headerlink" href="#Speak.model"></a>
    
    

                            </div>
                            <div id="Speak.provider" class="classattr">
                                <div class="attr variable">
            <span class="name">provider</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Speak.provider"></a>
    
    

                            </div>
                            <div id="Speak.voice_id" class="classattr">
                                <div class="attr variable">
            <span class="name">voice_id</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Speak.voice_id"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Speak.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Header">
                            <input id="Header-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Header</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Header-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Header"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Header-50"><a href="#Header-50"><span class="linenos">50</span></a><span class="nd">@dataclass</span>
</span><span id="Header-51"><a href="#Header-51"><span class="linenos">51</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Header</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Header-52"><a href="#Header-52"><span class="linenos">52</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Header-53"><a href="#Header-53"><span class="linenos">53</span></a><span class="sd">    This class defines a single key/value pair for a header.</span>
</span><span id="Header-54"><a href="#Header-54"><span class="linenos">54</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Header-55"><a href="#Header-55"><span class="linenos">55</span></a>
</span><span id="Header-56"><a href="#Header-56"><span class="linenos">56</span></a>    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Header-57"><a href="#Header-57"><span class="linenos">57</span></a>    <span class="n">value</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>This class defines a single key/value pair for a header.</p>
</div>


                            <div id="Header.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Header</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">key</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Header.__init__"></a>
    
    

                            </div>
                            <div id="Header.key" class="classattr">
                                <div class="attr variable">
            <span class="name">key</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Header.key"></a>
    
    

                            </div>
                            <div id="Header.value" class="classattr">
                                <div class="attr variable">
            <span class="name">value</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Header.value"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Header.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Item">
                            <input id="Item-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Item</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Item-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Item"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Item-60"><a href="#Item-60"><span class="linenos">60</span></a><span class="nd">@dataclass</span>
</span><span id="Item-61"><a href="#Item-61"><span class="linenos">61</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Item</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Item-62"><a href="#Item-62"><span class="linenos">62</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Item-63"><a href="#Item-63"><span class="linenos">63</span></a><span class="sd">    This class defines a single item in a list of items.</span>
</span><span id="Item-64"><a href="#Item-64"><span class="linenos">64</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Item-65"><a href="#Item-65"><span class="linenos">65</span></a>
</span><span id="Item-66"><a href="#Item-66"><span class="linenos">66</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Item-67"><a href="#Item-67"><span class="linenos">67</span></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
</span></pre></div>


            <div class="docstring"><p>This class defines a single item in a list of items.</p>
</div>


                            <div id="Item.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Item</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">description</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Item.__init__"></a>
    
    

                            </div>
                            <div id="Item.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Item.type"></a>
    
    

                            </div>
                            <div id="Item.description" class="classattr">
                                <div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Item.description"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Item.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Properties">
                            <input id="Properties-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Properties</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Properties-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Properties"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Properties-70"><a href="#Properties-70"><span class="linenos">70</span></a><span class="nd">@dataclass</span>
</span><span id="Properties-71"><a href="#Properties-71"><span class="linenos">71</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Properties</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Properties-72"><a href="#Properties-72"><span class="linenos">72</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Properties-73"><a href="#Properties-73"><span class="linenos">73</span></a><span class="sd">    This class defines the properties which is just a list of items.</span>
</span><span id="Properties-74"><a href="#Properties-74"><span class="linenos">74</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Properties-75"><a href="#Properties-75"><span class="linenos">75</span></a>
</span><span id="Properties-76"><a href="#Properties-76"><span class="linenos">76</span></a>    <span class="n">item</span><span class="p">:</span> <span class="n">Item</span>
</span><span id="Properties-77"><a href="#Properties-77"><span class="linenos">77</span></a>
</span><span id="Properties-78"><a href="#Properties-78"><span class="linenos">78</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="Properties-79"><a href="#Properties-79"><span class="linenos">79</span></a>        <span class="n">_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="Properties-80"><a href="#Properties-80"><span class="linenos">80</span></a>        <span class="k">if</span> <span class="s2">&quot;item&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Properties-81"><a href="#Properties-81"><span class="linenos">81</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Item</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;item&quot;</span><span class="p">]]</span>
</span><span id="Properties-82"><a href="#Properties-82"><span class="linenos">82</span></a>        <span class="k">return</span> <span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>This class defines the properties which is just a list of items.</p>
</div>


                            <div id="Properties.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Properties</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">item</span><span class="p">:</span> <span class="n"><a href="#Item">Item</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Properties.__init__"></a>
    
    

                            </div>
                            <div id="Properties.item" class="classattr">
                                <div class="attr variable">
            <span class="name">item</span><span class="annotation">: <a href="#Item">Item</a></span>

        
    </div>
    <a class="headerlink" href="#Properties.item"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Properties.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Parameters">
                            <input id="Parameters-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Parameters</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Parameters-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters-85"><a href="#Parameters-85"><span class="linenos">85</span></a><span class="nd">@dataclass</span>
</span><span id="Parameters-86"><a href="#Parameters-86"><span class="linenos">86</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Parameters</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Parameters-87"><a href="#Parameters-87"><span class="linenos">87</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Parameters-88"><a href="#Parameters-88"><span class="linenos">88</span></a><span class="sd">    This class defines the parameters for a function.</span>
</span><span id="Parameters-89"><a href="#Parameters-89"><span class="linenos">89</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Parameters-90"><a href="#Parameters-90"><span class="linenos">90</span></a>
</span><span id="Parameters-91"><a href="#Parameters-91"><span class="linenos">91</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Parameters-92"><a href="#Parameters-92"><span class="linenos">92</span></a>    <span class="n">properties</span><span class="p">:</span> <span class="n">Properties</span>
</span><span id="Parameters-93"><a href="#Parameters-93"><span class="linenos">93</span></a>    <span class="n">required</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="Parameters-94"><a href="#Parameters-94"><span class="linenos">94</span></a>
</span><span id="Parameters-95"><a href="#Parameters-95"><span class="linenos">95</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="Parameters-96"><a href="#Parameters-96"><span class="linenos">96</span></a>        <span class="n">_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="Parameters-97"><a href="#Parameters-97"><span class="linenos">97</span></a>        <span class="k">if</span> <span class="s2">&quot;properties&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Parameters-98"><a href="#Parameters-98"><span class="linenos">98</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Parameters-99"><a href="#Parameters-99"><span class="linenos">99</span></a>        <span class="k">return</span> <span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>This class defines the parameters for a function.</p>
</div>


                            <div id="Parameters.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Parameters</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">properties</span><span class="p">:</span> <span class="n"><a href="#Properties">Properties</a></span>,</span><span class="param">	<span class="n">required</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Parameters.__init__"></a>
    
    

                            </div>
                            <div id="Parameters.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Parameters.type"></a>
    
    

                            </div>
                            <div id="Parameters.properties" class="classattr">
                                <div class="attr variable">
            <span class="name">properties</span><span class="annotation">: <a href="#Properties">Properties</a></span>

        
    </div>
    <a class="headerlink" href="#Parameters.properties"></a>
    
    

                            </div>
                            <div id="Parameters.required" class="classattr">
                                <div class="attr variable">
            <span class="name">required</span><span class="annotation">: List[str]</span>

        
    </div>
    <a class="headerlink" href="#Parameters.required"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Parameters.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Function">
                            <input id="Function-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Function</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Function-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Function"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Function-102"><a href="#Function-102"><span class="linenos">102</span></a><span class="nd">@dataclass</span>
</span><span id="Function-103"><a href="#Function-103"><span class="linenos">103</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Function</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Function-104"><a href="#Function-104"><span class="linenos">104</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Function-105"><a href="#Function-105"><span class="linenos">105</span></a><span class="sd">    This class defines a function for the Think model.</span>
</span><span id="Function-106"><a href="#Function-106"><span class="linenos">106</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Function-107"><a href="#Function-107"><span class="linenos">107</span></a>
</span><span id="Function-108"><a href="#Function-108"><span class="linenos">108</span></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Function-109"><a href="#Function-109"><span class="linenos">109</span></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Function-110"><a href="#Function-110"><span class="linenos">110</span></a>    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Function-111"><a href="#Function-111"><span class="linenos">111</span></a>    <span class="n">method</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Function-112"><a href="#Function-112"><span class="linenos">112</span></a>    <span class="n">headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Header</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Function-113"><a href="#Function-113"><span class="linenos">113</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Function-114"><a href="#Function-114"><span class="linenos">114</span></a>    <span class="p">)</span>
</span><span id="Function-115"><a href="#Function-115"><span class="linenos">115</span></a>    <span class="n">parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Parameters</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Function-116"><a href="#Function-116"><span class="linenos">116</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Function-117"><a href="#Function-117"><span class="linenos">117</span></a>    <span class="p">)</span>
</span><span id="Function-118"><a href="#Function-118"><span class="linenos">118</span></a>
</span><span id="Function-119"><a href="#Function-119"><span class="linenos">119</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="Function-120"><a href="#Function-120"><span class="linenos">120</span></a>        <span class="n">_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="Function-121"><a href="#Function-121"><span class="linenos">121</span></a>        <span class="k">if</span> <span class="s2">&quot;parameters&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Function-122"><a href="#Function-122"><span class="linenos">122</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;parameters&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Function-123"><a href="#Function-123"><span class="linenos">123</span></a>                <span class="n">Parameters</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="k">for</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;parameters&quot;</span><span class="p">]</span>
</span><span id="Function-124"><a href="#Function-124"><span class="linenos">124</span></a>            <span class="p">]</span>
</span><span id="Function-125"><a href="#Function-125"><span class="linenos">125</span></a>        <span class="k">if</span> <span class="s2">&quot;headers&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Function-126"><a href="#Function-126"><span class="linenos">126</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;headers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Function-127"><a href="#Function-127"><span class="linenos">127</span></a>                <span class="n">Header</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span> <span class="k">for</span> <span class="n">headers</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;headers&quot;</span><span class="p">]</span>
</span><span id="Function-128"><a href="#Function-128"><span class="linenos">128</span></a>            <span class="p">]</span>
</span><span id="Function-129"><a href="#Function-129"><span class="linenos">129</span></a>        <span class="k">return</span> <span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>This class defines a function for the Think model.</p>
</div>


                            <div id="Function.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Function</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">description</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">url</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">method</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n"><a href="#Header">Header</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Parameters">Parameters</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Function.__init__"></a>
    
    

                            </div>
                            <div id="Function.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Function.name"></a>
    
    

                            </div>
                            <div id="Function.description" class="classattr">
                                <div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Function.description"></a>
    
    

                            </div>
                            <div id="Function.url" class="classattr">
                                <div class="attr variable">
            <span class="name">url</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Function.url"></a>
    
    

                            </div>
                            <div id="Function.method" class="classattr">
                                <div class="attr variable">
            <span class="name">method</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Function.method"></a>
    
    

                            </div>
                            <div id="Function.headers" class="classattr">
                                <div class="attr variable">
            <span class="name">headers</span><span class="annotation">: Optional[List[<a href="#Header">Header</a>]]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Function.headers"></a>
    
    

                            </div>
                            <div id="Function.parameters" class="classattr">
                                <div class="attr variable">
            <span class="name">parameters</span><span class="annotation">: Optional[<a href="#Parameters">Parameters</a>]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Function.parameters"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Function.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Provider">
                            <input id="Provider-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Provider</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Provider-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Provider"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Provider-132"><a href="#Provider-132"><span class="linenos">132</span></a><span class="nd">@dataclass</span>
</span><span id="Provider-133"><a href="#Provider-133"><span class="linenos">133</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Provider</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Provider-134"><a href="#Provider-134"><span class="linenos">134</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Provider-135"><a href="#Provider-135"><span class="linenos">135</span></a><span class="sd">    This class defines the provider for the Think model.</span>
</span><span id="Provider-136"><a href="#Provider-136"><span class="linenos">136</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Provider-137"><a href="#Provider-137"><span class="linenos">137</span></a>
</span><span id="Provider-138"><a href="#Provider-138"><span class="linenos">138</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Provider-139"><a href="#Provider-139"><span class="linenos">139</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Provider-140"><a href="#Provider-140"><span class="linenos">140</span></a>    <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This class defines the provider for the Think model.</p>
</div>


                            <div id="Provider.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Provider</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Provider.__init__"></a>
    
    

                            </div>
                            <div id="Provider.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Provider.type"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Provider.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Think">
                            <input id="Think-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Think</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Think-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Think"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Think-143"><a href="#Think-143"><span class="linenos">143</span></a><span class="nd">@dataclass</span>
</span><span id="Think-144"><a href="#Think-144"><span class="linenos">144</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Think</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Think-145"><a href="#Think-145"><span class="linenos">145</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Think-146"><a href="#Think-146"><span class="linenos">146</span></a><span class="sd">    This class defines any configuration settings for the Think model.</span>
</span><span id="Think-147"><a href="#Think-147"><span class="linenos">147</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Think-148"><a href="#Think-148"><span class="linenos">148</span></a>
</span><span id="Think-149"><a href="#Think-149"><span class="linenos">149</span></a>    <span class="n">provider</span><span class="p">:</span> <span class="n">Provider</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Provider</span><span class="p">)</span>
</span><span id="Think-150"><a href="#Think-150"><span class="linenos">150</span></a>    <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Think-151"><a href="#Think-151"><span class="linenos">151</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Think-152"><a href="#Think-152"><span class="linenos">152</span></a>    <span class="p">)</span>
</span><span id="Think-153"><a href="#Think-153"><span class="linenos">153</span></a>    <span class="n">instructions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Think-154"><a href="#Think-154"><span class="linenos">154</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Think-155"><a href="#Think-155"><span class="linenos">155</span></a>    <span class="p">)</span>
</span><span id="Think-156"><a href="#Think-156"><span class="linenos">156</span></a>    <span class="n">functions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Function</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Think-157"><a href="#Think-157"><span class="linenos">157</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Think-158"><a href="#Think-158"><span class="linenos">158</span></a>    <span class="p">)</span>
</span><span id="Think-159"><a href="#Think-159"><span class="linenos">159</span></a>
</span><span id="Think-160"><a href="#Think-160"><span class="linenos">160</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="Think-161"><a href="#Think-161"><span class="linenos">161</span></a>        <span class="n">_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="Think-162"><a href="#Think-162"><span class="linenos">162</span></a>        <span class="k">if</span> <span class="s2">&quot;provider&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Think-163"><a href="#Think-163"><span class="linenos">163</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;provider&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Think-164"><a href="#Think-164"><span class="linenos">164</span></a>                <span class="n">Provider</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span> <span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;provider&quot;</span><span class="p">]</span>
</span><span id="Think-165"><a href="#Think-165"><span class="linenos">165</span></a>            <span class="p">]</span>
</span><span id="Think-166"><a href="#Think-166"><span class="linenos">166</span></a>        <span class="k">if</span> <span class="s2">&quot;functions&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Think-167"><a href="#Think-167"><span class="linenos">167</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;functions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Think-168"><a href="#Think-168"><span class="linenos">168</span></a>                <span class="n">Function</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">functions</span><span class="p">)</span> <span class="k">for</span> <span class="n">functions</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;functions&quot;</span><span class="p">]</span>
</span><span id="Think-169"><a href="#Think-169"><span class="linenos">169</span></a>            <span class="p">]</span>
</span><span id="Think-170"><a href="#Think-170"><span class="linenos">170</span></a>        <span class="k">return</span> <span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>This class defines any configuration settings for the Think model.</p>
</div>


                            <div id="Think.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Think</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">provider</span><span class="p">:</span> <span class="n"><a href="#Provider">Provider</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">instructions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">functions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n"><a href="#Function">Function</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Think.__init__"></a>
    
    

                            </div>
                            <div id="Think.provider" class="classattr">
                                <div class="attr variable">
            <span class="name">provider</span><span class="annotation">: <a href="#Provider">Provider</a></span>

        
    </div>
    <a class="headerlink" href="#Think.provider"></a>
    
    

                            </div>
                            <div id="Think.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Think.model"></a>
    
    

                            </div>
                            <div id="Think.instructions" class="classattr">
                                <div class="attr variable">
            <span class="name">instructions</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Think.instructions"></a>
    
    

                            </div>
                            <div id="Think.functions" class="classattr">
                                <div class="attr variable">
            <span class="name">functions</span><span class="annotation">: Optional[List[<a href="#Function">Function</a>]]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Think.functions"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Think.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Agent">
                            <input id="Agent-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Agent</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Agent-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Agent"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Agent-173"><a href="#Agent-173"><span class="linenos">173</span></a><span class="nd">@dataclass</span>
</span><span id="Agent-174"><a href="#Agent-174"><span class="linenos">174</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Agent</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Agent-175"><a href="#Agent-175"><span class="linenos">175</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Agent-176"><a href="#Agent-176"><span class="linenos">176</span></a><span class="sd">    This class defines any configuration settings for the Agent model.</span>
</span><span id="Agent-177"><a href="#Agent-177"><span class="linenos">177</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Agent-178"><a href="#Agent-178"><span class="linenos">178</span></a>
</span><span id="Agent-179"><a href="#Agent-179"><span class="linenos">179</span></a>    <span class="n">listen</span><span class="p">:</span> <span class="n">Listen</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Listen</span><span class="p">)</span>
</span><span id="Agent-180"><a href="#Agent-180"><span class="linenos">180</span></a>    <span class="n">think</span><span class="p">:</span> <span class="n">Think</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Think</span><span class="p">)</span>
</span><span id="Agent-181"><a href="#Agent-181"><span class="linenos">181</span></a>    <span class="n">speak</span><span class="p">:</span> <span class="n">Speak</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Speak</span><span class="p">)</span>
</span><span id="Agent-182"><a href="#Agent-182"><span class="linenos">182</span></a>
</span><span id="Agent-183"><a href="#Agent-183"><span class="linenos">183</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="Agent-184"><a href="#Agent-184"><span class="linenos">184</span></a>        <span class="n">_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="Agent-185"><a href="#Agent-185"><span class="linenos">185</span></a>        <span class="k">if</span> <span class="s2">&quot;listen&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Agent-186"><a href="#Agent-186"><span class="linenos">186</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;listen&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Listen</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">listen</span><span class="p">)</span> <span class="k">for</span> <span class="n">listen</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;listen&quot;</span><span class="p">]]</span>
</span><span id="Agent-187"><a href="#Agent-187"><span class="linenos">187</span></a>        <span class="k">if</span> <span class="s2">&quot;think&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Agent-188"><a href="#Agent-188"><span class="linenos">188</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;think&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Think</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">think</span><span class="p">)</span> <span class="k">for</span> <span class="n">think</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;think&quot;</span><span class="p">]]</span>
</span><span id="Agent-189"><a href="#Agent-189"><span class="linenos">189</span></a>        <span class="k">if</span> <span class="s2">&quot;speak&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Agent-190"><a href="#Agent-190"><span class="linenos">190</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;speak&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Speak</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">speak</span><span class="p">)</span> <span class="k">for</span> <span class="n">speak</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;speak&quot;</span><span class="p">]]</span>
</span><span id="Agent-191"><a href="#Agent-191"><span class="linenos">191</span></a>        <span class="k">return</span> <span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>This class defines any configuration settings for the Agent model.</p>
</div>


                            <div id="Agent.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Agent</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">listen</span><span class="p">:</span> <span class="n"><a href="#Listen">Listen</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">think</span><span class="p">:</span> <span class="n"><a href="#Think">Think</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">speak</span><span class="p">:</span> <span class="n"><a href="#Speak">Speak</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Agent.__init__"></a>
    
    

                            </div>
                            <div id="Agent.listen" class="classattr">
                                <div class="attr variable">
            <span class="name">listen</span><span class="annotation">: <a href="#Listen">Listen</a></span>

        
    </div>
    <a class="headerlink" href="#Agent.listen"></a>
    
    

                            </div>
                            <div id="Agent.think" class="classattr">
                                <div class="attr variable">
            <span class="name">think</span><span class="annotation">: <a href="#Think">Think</a></span>

        
    </div>
    <a class="headerlink" href="#Agent.think"></a>
    
    

                            </div>
                            <div id="Agent.speak" class="classattr">
                                <div class="attr variable">
            <span class="name">speak</span><span class="annotation">: <a href="#Speak">Speak</a></span>

        
    </div>
    <a class="headerlink" href="#Agent.speak"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Agent.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Input">
                            <input id="Input-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Input</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Input-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Input"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Input-194"><a href="#Input-194"><span class="linenos">194</span></a><span class="nd">@dataclass</span>
</span><span id="Input-195"><a href="#Input-195"><span class="linenos">195</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Input</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Input-196"><a href="#Input-196"><span class="linenos">196</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Input-197"><a href="#Input-197"><span class="linenos">197</span></a><span class="sd">    This class defines any configuration settings for the input audio.</span>
</span><span id="Input-198"><a href="#Input-198"><span class="linenos">198</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Input-199"><a href="#Input-199"><span class="linenos">199</span></a>
</span><span id="Input-200"><a href="#Input-200"><span class="linenos">200</span></a>    <span class="n">encoding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;linear16&quot;</span><span class="p">)</span>
</span><span id="Input-201"><a href="#Input-201"><span class="linenos">201</span></a>    <span class="n">sample_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">16000</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This class defines any configuration settings for the input audio.</p>
</div>


                            <div id="Input.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Input</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">encoding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;linear16&#39;</span>, </span><span class="param"><span class="n">sample_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16000</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Input.__init__"></a>
    
    

                            </div>
                            <div id="Input.encoding" class="classattr">
                                <div class="attr variable">
            <span class="name">encoding</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">&#39;linear16&#39;</span>

        
    </div>
    <a class="headerlink" href="#Input.encoding"></a>
    
    

                            </div>
                            <div id="Input.sample_rate" class="classattr">
                                <div class="attr variable">
            <span class="name">sample_rate</span><span class="annotation">: int</span>        =
<span class="default_value">16000</span>

        
    </div>
    <a class="headerlink" href="#Input.sample_rate"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Input.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Output">
                            <input id="Output-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Output</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Output-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Output"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Output-204"><a href="#Output-204"><span class="linenos">204</span></a><span class="nd">@dataclass</span>
</span><span id="Output-205"><a href="#Output-205"><span class="linenos">205</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Output</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Output-206"><a href="#Output-206"><span class="linenos">206</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Output-207"><a href="#Output-207"><span class="linenos">207</span></a><span class="sd">    This class defines any configuration settings for the output audio.</span>
</span><span id="Output-208"><a href="#Output-208"><span class="linenos">208</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Output-209"><a href="#Output-209"><span class="linenos">209</span></a>
</span><span id="Output-210"><a href="#Output-210"><span class="linenos">210</span></a>    <span class="n">encoding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;linear16&quot;</span><span class="p">)</span>
</span><span id="Output-211"><a href="#Output-211"><span class="linenos">211</span></a>    <span class="n">sample_rate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">16000</span><span class="p">)</span>
</span><span id="Output-212"><a href="#Output-212"><span class="linenos">212</span></a>    <span class="n">bitrate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Output-213"><a href="#Output-213"><span class="linenos">213</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Output-214"><a href="#Output-214"><span class="linenos">214</span></a>    <span class="p">)</span>
</span><span id="Output-215"><a href="#Output-215"><span class="linenos">215</span></a>    <span class="n">container</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This class defines any configuration settings for the output audio.</p>
</div>


                            <div id="Output.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Output</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">encoding</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;linear16&#39;</span>,</span><span class="param">	<span class="n">sample_rate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">16000</span>,</span><span class="param">	<span class="n">bitrate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">container</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Output.__init__"></a>
    
    

                            </div>
                            <div id="Output.encoding" class="classattr">
                                <div class="attr variable">
            <span class="name">encoding</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">&#39;linear16&#39;</span>

        
    </div>
    <a class="headerlink" href="#Output.encoding"></a>
    
    

                            </div>
                            <div id="Output.sample_rate" class="classattr">
                                <div class="attr variable">
            <span class="name">sample_rate</span><span class="annotation">: Optional[int]</span>        =
<span class="default_value">16000</span>

        
    </div>
    <a class="headerlink" href="#Output.sample_rate"></a>
    
    

                            </div>
                            <div id="Output.bitrate" class="classattr">
                                <div class="attr variable">
            <span class="name">bitrate</span><span class="annotation">: Optional[int]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Output.bitrate"></a>
    
    

                            </div>
                            <div id="Output.container" class="classattr">
                                <div class="attr variable">
            <span class="name">container</span><span class="annotation">: Optional[str]</span>        =
<span class="default_value">&#39;none&#39;</span>

        
    </div>
    <a class="headerlink" href="#Output.container"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Output.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Audio">
                            <input id="Audio-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Audio</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Audio-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Audio"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Audio-218"><a href="#Audio-218"><span class="linenos">218</span></a><span class="nd">@dataclass</span>
</span><span id="Audio-219"><a href="#Audio-219"><span class="linenos">219</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Audio</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Audio-220"><a href="#Audio-220"><span class="linenos">220</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Audio-221"><a href="#Audio-221"><span class="linenos">221</span></a><span class="sd">    This class defines any configuration settings for the audio.</span>
</span><span id="Audio-222"><a href="#Audio-222"><span class="linenos">222</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Audio-223"><a href="#Audio-223"><span class="linenos">223</span></a>
</span><span id="Audio-224"><a href="#Audio-224"><span class="linenos">224</span></a>    <span class="nb">input</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Input</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Input</span><span class="p">)</span>
</span><span id="Audio-225"><a href="#Audio-225"><span class="linenos">225</span></a>    <span class="n">output</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Output</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Output</span><span class="p">)</span>
</span><span id="Audio-226"><a href="#Audio-226"><span class="linenos">226</span></a>
</span><span id="Audio-227"><a href="#Audio-227"><span class="linenos">227</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="Audio-228"><a href="#Audio-228"><span class="linenos">228</span></a>        <span class="n">_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="Audio-229"><a href="#Audio-229"><span class="linenos">229</span></a>        <span class="k">if</span> <span class="s2">&quot;input&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Audio-230"><a href="#Audio-230"><span class="linenos">230</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;input&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Input</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="k">for</span> <span class="nb">input</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;input&quot;</span><span class="p">]]</span>
</span><span id="Audio-231"><a href="#Audio-231"><span class="linenos">231</span></a>        <span class="k">if</span> <span class="s2">&quot;output&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Audio-232"><a href="#Audio-232"><span class="linenos">232</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Output</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="k">for</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">]]</span>
</span><span id="Audio-233"><a href="#Audio-233"><span class="linenos">233</span></a>        <span class="k">return</span> <span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>This class defines any configuration settings for the audio.</p>
</div>


                            <div id="Audio.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Audio</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="nb">input</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Input">Input</a></span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">output</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Output">Output</a></span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Audio.__init__"></a>
    
    

                            </div>
                            <div id="Audio.input" class="classattr">
                                <div class="attr variable">
            <span class="name">input</span><span class="annotation">: Optional[<a href="#Input">Input</a>]</span>

        
    </div>
    <a class="headerlink" href="#Audio.input"></a>
    
    

                            </div>
                            <div id="Audio.output" class="classattr">
                                <div class="attr variable">
            <span class="name">output</span><span class="annotation">: Optional[<a href="#Output">Output</a>]</span>

        
    </div>
    <a class="headerlink" href="#Audio.output"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Audio.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Context">
                            <input id="Context-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Context</span><wbr>(<span class="base"><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></span>):

                <label class="view-source-button" for="Context-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Context"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Context-236"><a href="#Context-236"><span class="linenos">236</span></a><span class="nd">@dataclass</span>
</span><span id="Context-237"><a href="#Context-237"><span class="linenos">237</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Context</span><span class="p">(</span><span class="n">BaseResponse</span><span class="p">):</span>
</span><span id="Context-238"><a href="#Context-238"><span class="linenos">238</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Context-239"><a href="#Context-239"><span class="linenos">239</span></a><span class="sd">    This class defines any configuration settings for the context.</span>
</span><span id="Context-240"><a href="#Context-240"><span class="linenos">240</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Context-241"><a href="#Context-241"><span class="linenos">241</span></a>
</span><span id="Context-242"><a href="#Context-242"><span class="linenos">242</span></a>    <span class="n">messages</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="Context-243"><a href="#Context-243"><span class="linenos">243</span></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dataclass_config</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Context-244"><a href="#Context-244"><span class="linenos">244</span></a>    <span class="p">)</span>
</span><span id="Context-245"><a href="#Context-245"><span class="linenos">245</span></a>    <span class="n">replay</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Context-246"><a href="#Context-246"><span class="linenos">246</span></a>
</span><span id="Context-247"><a href="#Context-247"><span class="linenos">247</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="Context-248"><a href="#Context-248"><span class="linenos">248</span></a>        <span class="n">_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="Context-249"><a href="#Context-249"><span class="linenos">249</span></a>        <span class="k">if</span> <span class="s2">&quot;messages&quot;</span> <span class="ow">in</span> <span class="n">_dict</span><span class="p">:</span>
</span><span id="Context-250"><a href="#Context-250"><span class="linenos">250</span></a>            <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_dict</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Context-251"><a href="#Context-251"><span class="linenos">251</span></a>        <span class="k">return</span> <span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>This class defines any configuration settings for the context.</p>
</div>


                            <div id="Context.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Context</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">messages</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">replay</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Context.__init__"></a>
    
    

                            </div>
                            <div id="Context.messages" class="classattr">
                                <div class="attr variable">
            <span class="name">messages</span><span class="annotation">: Optional[List[Tuple[str, str]]]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Context.messages"></a>
    
    

                            </div>
                            <div id="Context.replay" class="classattr">
                                <div class="attr variable">
            <span class="name">replay</span><span class="annotation">: Optional[bool]</span>        =
<span class="default_value">False</span>

        
    </div>
    <a class="headerlink" href="#Context.replay"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="../common/v1/shared_response.html#BaseResponse">deepgram.clients.common.v1.shared_response.BaseResponse</a></dt>
                                <dd id="Context.eval" class="function"><a href="../common/v1/shared_response.html#BaseResponse.eval">eval</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>